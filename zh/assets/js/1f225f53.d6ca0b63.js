"use strict";(self.webpackChunkchia_docs=self.webpackChunkchia_docs||[]).push([[1609],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>m});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=o.createContext({}),d=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=d(e.components);return o.createElement(s.Provider,{value:t},e.children)},h="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),h=d(n),u=a,m=h["".concat(s,".").concat(u)]||h[u]||p[u]||r;return n?o.createElement(m,i(i({ref:t},c),{},{components:n})):o.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[h]="string"==typeof e?e:a,i[1]=l;for(var d=2;d<r;d++)i[d]=n[d];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4014:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var o=n(7462),a=(n(7294),n(3905));const r={title:"Headless Node",slug:"/headless-node"},i=void 0,l={unversionedId:"reference-client/headless-node",id:"reference-client/headless-node",title:"Headless Node",description:"Exposing a Chia daemon to the network is an advanced configuration. This allows other computers to communicate with the Chia daemon, including the ability to create transactions and send XCH.",source:"@site/docs/reference-client/headless-node.md",sourceDirName:"reference-client",slug:"/headless-node",permalink:"/zh/headless-node",draft:!1,editUrl:"https://github.com/Chia-Network/chia-docs/blob/main/docs/reference-client/headless-node.md",tags:[],version:"current",frontMatter:{title:"Headless Node",slug:"/headless-node"},sidebar:"tutorialSidebar",previous:{title:"Chia on Raspberry Pi",permalink:"/zh/chia-on-raspberry-pi"},next:{title:"References",permalink:"/zh/references"}},s={},d=[{value:"On the daemon host",id:"on-the-daemon-host",level:2},{value:"Expose the daemon to the network",id:"expose-the-daemon-to-the-network",level:3},{value:"Copy the daemon&#39;s cert files",id:"copy-the-daemons-cert-files",level:3},{value:"On the GUI host",id:"on-the-gui-host",level:2},{value:"Reference the daemon&#39;s cert files",id:"reference-the-daemons-cert-files",level:3},{value:"GUI Client",id:"gui-client",level:2},{value:"Can the GUI find the config folder?",id:"can-the-gui-find-the-config-folder",level:3},{value:"Can the GUI find the remote daemon&#39;s certs?",id:"can-the-gui-find-the-remote-daemons-certs",level:3},{value:"Connectivity",id:"connectivity",level:2},{value:"Has the daemon been bound to a routable IP address?",id:"has-the-daemon-been-bound-to-a-routable-ip-address",level:3},{value:"Is the daemon&#39;s port opened on the firewall?",id:"is-the-daemons-port-opened-on-the-firewall",level:3},{value:"Is VMWare Plugin Service bound to daemon port?",id:"is-vmware-plugin-service-bound-to-daemon-port",level:3}],c={toc:d},h="wrapper";function p(e){let{components:t,...n}=e;return(0,a.kt)(h,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Exposing a Chia daemon to the network is an advanced configuration. This allows other computers to communicate with the Chia daemon, including the ability to create transactions and send XCH."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"If you do not know how to configure and properly secure a computer network ",(0,a.kt)("em",{parentName:"strong"},"do not")," use a remote daemon.")),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"Never")," expose the Chia daemon to the internet."),(0,a.kt)("h1",{id:"setup"},"Setup"),(0,a.kt)("p",null,"The following instructions are for a Linux-based farmer (daemon host) and Windows GUI (main node). The same concept applies to other OS combinations."),(0,a.kt)("h2",{id:"on-the-daemon-host"},"On the daemon host"),(0,a.kt)("h3",{id:"expose-the-daemon-to-the-network"},"Expose the daemon to the network"),(0,a.kt)("p",null,"In ",(0,a.kt)("inlineCode",{parentName:"p"},"config.yaml"),", change ",(0,a.kt)("inlineCode",{parentName:"p"},"self_hostname")," from ",(0,a.kt)("inlineCode",{parentName:"p"},"localhost")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"0.0.0.0"),". This binds the daemon to all IPv4 addresses on the local machine."),(0,a.kt)("p",null,"Next, open the port that the daemon is listening on (55400 by default). The UI assumes that the daemon is already running and it will ",(0,a.kt)("em",{parentName:"p"},"not")," attempt to start a remote daemon. Using ",(0,a.kt)("a",{parentName:"p",href:"https://help.ubuntu.com/community/UFW"},"ufw")," and restricting traffic to just the UI's host:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"sudo ufw allow from <IP of UI machine> to any port 55400 proto tcp\n")),(0,a.kt)("h3",{id:"copy-the-daemons-cert-files"},"Copy the daemon's cert files"),(0,a.kt)("p",null,"To secure their connection, the GUI will need the daemon's certificates. Copy these files to the Windows machine:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"~/.chia/mainnet/config/ssl/daemon/private_daemon.crt\n~/.chia/mainnet/config/ssl/daemon/private_daemon.key\n")),(0,a.kt)("h2",{id:"on-the-gui-host"},"On the GUI host"),(0,a.kt)("h3",{id:"reference-the-daemons-cert-files"},"Reference the daemon's cert files"),(0,a.kt)("p",null,"Place the daemon's cert files, copied earlier, in the following location:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"~/.chia/mainnet/config/ssl/ui/\n~/.chia/mainnet/config/ssl/ui/\n")),(0,a.kt)("p",null,"Find the ",(0,a.kt)("inlineCode",{parentName:"p"},"ui")," section in ",(0,a.kt)("inlineCode",{parentName:"p"},"config.yaml")," and specify the following settings:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"daemon_host: <name or IP of the daemon host>\ndaemon_port: 55400\ndaemon_ssl:\n  private_crt: config/ssl/ui/private_daemon.crt\n  private_key: config/ssl/ui/private_daemon.key\n")),(0,a.kt)("h1",{id:"troubleshooting"},"Troubleshooting"),(0,a.kt)("h2",{id:"gui-client"},"GUI Client"),(0,a.kt)("h3",{id:"can-the-gui-find-the-config-folder"},"Can the GUI find the config folder?"),(0,a.kt)("p",null,"The first thing to check is that the daemon's websocket URI shows up on the title bar. It should look like this:"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/5160233/111890456-6ca97f00-89b7-11eb-8f20-a8dc80d0d138.png",alt:"image"})),(0,a.kt)("p",null,"Make sure there isn't a ",(0,a.kt)("a",{parentName:"p",href:"https://yamlchecker.com/"},"syntax error")," in config.yaml."),(0,a.kt)("h3",{id:"can-the-gui-find-the-remote-daemons-certs"},"Can the GUI find the remote daemon's certs?"),(0,a.kt)("p",null,"Double check that in the ",(0,a.kt)("inlineCode",{parentName:"p"},"ui")," section the crt and key paths are correct. It ",(0,a.kt)("em",{parentName:"p"},"shouldn't")," point to the folder where the local certs are stored. It has to point to the folder where you copied the daemon's certs."),(0,a.kt)("h2",{id:"connectivity"},"Connectivity"),(0,a.kt)("h3",{id:"has-the-daemon-been-bound-to-a-routable-ip-address"},"Has the daemon been bound to a routable IP address?"),(0,a.kt)("p",null,"On the daemon host run ",(0,a.kt)("inlineCode",{parentName:"p"},"sudo netstat -tulpn | grep 55400")," or your OS's equivalent. It should show something similar to ",(0,a.kt)("inlineCode",{parentName:"p"},"tcp 0 0 0.0.0.0:55400 0.0.0.0:* LISTEN 2925/chia_daemon"),"."),(0,a.kt)("p",null,"If you see ",(0,a.kt)("inlineCode",{parentName:"p"},"127.0.0.1")," it means you haven't changed the daemon's bind IP address. The loopback address is not routable on the network. Double check that ",(0,a.kt)("inlineCode",{parentName:"p"},"self_hostname: 0.0.0.0")," is correct in the config. Also, make sure you have fully restarted the daemon:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"chia stop all -d\nchia start farmer\n")),(0,a.kt)("h3",{id:"is-the-daemons-port-opened-on-the-firewall"},"Is the daemon's port opened on the firewall?"),(0,a.kt)("p",null,"Run ",(0,a.kt)("inlineCode",{parentName:"p"},"sudo ufw status | grep 55400")," or your OS and firewall equivalent. You should see something like ",(0,a.kt)("inlineCode",{parentName:"p"},"55400/tcp ALLOW"),"."),(0,a.kt)("h3",{id:"is-vmware-plugin-service-bound-to-daemon-port"},"Is VMWare Plugin Service bound to daemon port?"),(0,a.kt)("p",null,"Verify that the default port 55400 is not bound to VMWare Plugin or other service on the daemon host. If pre-bound, stop that other service or change the ",(0,a.kt)("inlineCode",{parentName:"p"},"daemon_port")," value in ",(0,a.kt)("inlineCode",{parentName:"p"},"config.yaml"),". ",(0,a.kt)("inlineCode",{parentName:"p"},"netstat -tulpn")," includes the process name of listeners. It should be ",(0,a.kt)("inlineCode",{parentName:"p"},"chia_daemon"),"."))}p.isMDXComponent=!0}}]);
<!doctype html>
<html class="docs-version-current" lang="zh" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">10.2 Harvester Protocol | Chia Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://docs.chia.net/zh/docs/10protocol/harvester_protocol"><meta data-react-helmet="true" name="docusaurus_locale" content="zh"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="10.2 Harvester Protocol | Chia Documentation"><meta data-react-helmet="true" name="description" content="The harvester protocol defines the messages sent between a farmer service and a harvester service. The harvester protocol defines the messages sent between a farmer service and a harvester service. These tend to be on the same machine for small farmers, but for medium or large farmers they can be in multiple machines."><meta data-react-helmet="true" property="og:description" content="The harvester protocol defines the messages sent between a farmer service and a harvester service. The harvester protocol defines the messages sent between a farmer service and a harvester service. These tend to be on the same machine for small farmers, but for medium or large farmers they can be in multiple machines."><link data-react-helmet="true" rel="shortcut icon" href="/zh/img/chia_leaf_green.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.chia.net/zh/docs/10protocol/harvester_protocol"><link data-react-helmet="true" rel="alternate" href="https://docs.chia.net/docs/10protocol/harvester_protocol" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.chia.net/zh/docs/10protocol/harvester_protocol" hreflang="zh"><link data-react-helmet="true" rel="alternate" href="https://docs.chia.net/docs/10protocol/harvester_protocol" hreflang="x-default"><link rel="stylesheet" href="/zh/assets/css/styles.864117c7.css">
<link rel="preload" href="/zh/assets/js/runtime~main.d65043bd.js" as="script">
<link rel="preload" href="/zh/assets/js/main.3378a4eb.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><img src="/zh/img/chia-docs-icon.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/zh/img/chia-docs-icon.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title"> Chia Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/docs/01introduction/what-is-chia">Docs</a><a href="https://www.chia.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia.net</a><a href="https://github.com/Chia-Network/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia Github</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">1 - Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">2 - Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">3 - Consensus Algorithm</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">4 - Coin Set Model</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">5 - Block Validation</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">6 - Mempool</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">7 - Networking</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">8 - Serialization</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">9 - Keys and Signatures</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">10 - Protocol</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/10protocol/protocol">10.1 Chia Protocol</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/docs/10protocol/harvester_protocol">10.2 Harvester Protocol</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/10protocol/full_node_protocol">10.3 Full Node Protocol</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/10protocol/wallet_protocol">10.4 Wallet Protocol</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">11 - Pool Protocol</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">12 - RPC APIs</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">13 - Command Line Interface</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">14 - Python Implementation</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">15 - Resources</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>10.2 Harvester Protocol</h1></header><p>The harvester protocol defines the messages sent between a farmer service and a harvester service. The harvester protocol defines the messages sent between a farmer service and a harvester service. These tend to be on the same machine for small farmers, but for medium or large farmers they can be in multiple machines.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="harvester_handshake"></a>harvester_handshake<a class="hash-link" href="#harvester_handshake" title="Direct link to heading">#</a></h2><p>The handshake between farmer and harvester. The handshake between farmer and harvester. A farmer sends this message to harvesters, to initialize them and tell them which pool public keys and farmer public keys are acceptable to use.</p><p>A farmer can be connected to multiple harvesters, but a harvester should only have one farmer connection. The harvester can start using plots which have these keys associated with them. The harvester can start using plots which have these keys associated with them.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">HarvesterHandshake</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Streamable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    farmer_public_keys</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">G1Element</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    pool_public_keys</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">G1Element</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="new_signage_point_harvester"></a>new_signage_point_harvester<a class="hash-link" href="#new_signage_point_harvester" title="Direct link to heading">#</a></h2><p>This message is a notification from the farmer to the harvester of a new challenge. The harvester first checks which plots pass the plot filter (see section 3.6), and for those that do, fetches the quality. This requires around 7-9 random reads (and thus disk seeks) for each quality. Each plot is expected to have one proof of space (and therefore one quality) on average, so for 50 plots, a harvester would have around 50 qualities. For those qualities that are sufficiently good to win a block or a pool partial, the whole proof is fetched (64 random reads in the plot), and then <code>new_proof_of_space</code> is sent to the farmer.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">NewSignagePointHarvester</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Streamable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    challenge_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32     </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The challenge hash for the sub slot in which the signage point lies</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    difficulty</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint64          </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The current blockchain difficulty</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    sub_slot_iters</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint64      </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The current blockchain sub-slot iters</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    signage_point_index</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint8  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The signage point&#x27;s index, from 0 to 63. class NewSignagePointHarvester(Streamable):</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    challenge_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32     </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The challenge hash for the sub slot in which the signage point lies</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    difficulty</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint64          </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The current blockchain difficulty</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    sub_slot_iters</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint64      </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The current blockchain sub-slot iters</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    signage_point_index</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint8  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The signage point&#x27;s index, from 0 to 63. 0 for an end of sub slot signage point</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    sp_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32            </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The hash of the signage point, this is == challenge_hash iff the index is 0</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    pool_difficulties</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">PoolDifficulty</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># List of each pool the farmer is in, and what the difficulty is for that pool</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">PoolDifficulty</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Streamable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    difficulty</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint64                  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The current difficulty that is set for plots belonging to this pool contract</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    sub_slot_iters</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint64              </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The pool sub slot iters, which is static for each network (mainnet, testnet)</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    pool_contract_puzzle_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The pool contract puzzle hash which can be in many plots</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="new_proof_of_space"></a>new_proof_of_space<a class="hash-link" href="#new_proof_of_space" title="Direct link to heading">#</a></h2><p>A successful proof of space that is sent to the farmer. A successful proof of space that is sent to the farmer. The <code>challenge_hash</code>, <code>sp_hash</code>, and <code>signage_point_index</code> correspond to the ones sent in <code>new_signage_point_harvester</code>. Many proofs can be submitted for each signage point. Many proofs can be submitted for each signage point.</p><p>The plot is a string chosen by the harvester to represent the winning plot (and proof index) in future communications between the farmer and harvester. This can be, for example, the filename of the plot with an additional byte for the index. This is relevant, because a certain plot can potentially have more than one proof for each signage point, and we want communications for each proof to be separate and not conflict (specifically to fetch signatures from the harvester). This can be, for example, the filename of the plot with an additional byte for the index. This is relevant, because a certain plot can potentially have more than one proof for each signage point, and we want communications for each proof to be separate and not conflict (specifically to fetch signatures from the harvester).</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">NewProofOfSpace</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Streamable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    challenge_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    sp_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    plot_identifier</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">str</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    proof</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> ProofOfSpace         </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># The actual proof of space which contains more data, shown below</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    signage_point_index</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint8</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">ProofOfSpace</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Streamable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    challenge</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32                              </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># This is the challenge for the pospace, explained in section 3.5</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    pool_public_key</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">G1Element</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">            </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Only one of these two should be present</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    pool_contract_puzzle_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">bytes32</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Present only for pooled plots</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    plot_public_key</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> G1Element                      </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Explained in the keys section </span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    size</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint8                                     </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># k size, usually 32 but can vary</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    proof</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">bytes</span><span class="token plain">                                    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># proof bytes, 64 k bit values, total size 8k bytes</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="request_signatures"></a>request_signatures<a class="hash-link" href="#request_signatures" title="Direct link to heading">#</a></h2><p>This is a request from the farmer to the harvester for a signature from the plot key, for a specific plot (using the plot identifier from <code>new_proof_of_space</code>). The farmer can request signatures from multiple messages. The farmer can request signatures from multiple messages.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">RequestSignatures</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Streamable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    plot_identifier</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">str</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    challenge_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    sp_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    messages</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">bytes32</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="respond_signatures"></a>respond_signatures<a class="hash-link" href="#respond_signatures" title="Direct link to heading">#</a></h2><p>This is a response to <code>request_signatures</code>. The local public key is the public key corresponding to the secret key in the plot. This is a response to <code>request_signatures</code>. The local public key is the public key corresponding to the secret key in the plot. To see more about the keys for plots, look at <a href="/zh/docs/09keys/keys-and-signatures">section 9</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">RespondSignatures</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Streamable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    plot_identifier</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">str</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    challenge_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    sp_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    local_pk</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> G1Element   </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Key in the plot</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    farmer_pk</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> G1Element  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Key controlled by farmer</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    message_signatures</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">Tuple</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">bytes32</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> G2Element</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="request_plots"></a>request_plots<a class="hash-link" href="#request_plots" title="Direct link to heading">#</a></h2><p>A request from the farmer to the harvester for the list of all plots being farmed by the harvester.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">RequestPlots</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Streamable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">pass</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="respond_plots"></a>respond_plots<a class="hash-link" href="#respond_plots" title="Direct link to heading">#</a></h2><p>A response to <code>request_plots</code> request. This message is also sent whenever a new plot is loaded. This message is also sent whenever a new plot is loaded.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">RespondPlots</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Streamable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    plots</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">Plot</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    failed_to_open_filenames</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token builtin" style="color:rgb(72, 118, 214)">str</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Filenames for files which cannot be opened</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    no_key_filenames</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> List</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token builtin" style="color:rgb(72, 118, 214)">str</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain">          </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Filenames for files which cannot be farmed by this farmer</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Plot</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Streamable</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    filename</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">str</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    size</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint8</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    plot_id</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> bytes32</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    pool_public_key</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">G1Element</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    pool_contract_puzzle_hash</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Optional</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain">bytes32</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#403f53"><span class="token plain">    plot_public_key</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> G1Element</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    file_size</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint64</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    time_modified</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> uint64</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Chia-Network/chia-docs/blob/main/docs/10protocol/harvester_protocol.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/zh/docs/10protocol/protocol"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« 10.1 Chia Protocol</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/zh/docs/10protocol/full_node_protocol"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">10.3 Full Node Protocol Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#harvester_handshake" class="table-of-contents__link">harvester_handshake</a></li><li><a href="#new_signage_point_harvester" class="table-of-contents__link">new_signage_point_harvester</a></li><li><a href="#new_proof_of_space" class="table-of-contents__link">new_proof_of_space</a></li><li><a href="#request_signatures" class="table-of-contents__link">request_signatures</a></li><li><a href="#respond_signatures" class="table-of-contents__link">respond_signatures</a></li><li><a href="#request_plots" class="table-of-contents__link">request_plots</a></li><li><a href="#respond_plots" class="table-of-contents__link">respond_plots</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Approach</div><ul class="footer__items"><li class="footer__item"><a href="https://www.chia.net/approach" target="_blank" rel="noopener noreferrer" class="footer__link-item">White Paper</a></li></ul></div><div class="col footer__col"><div class="footer__title">Technology</div><ul class="footer__items"><li class="footer__item"><a href="https://www.chia.net/greenpaper" target="_blank" rel="noopener noreferrer" class="footer__link-item">Green Paper</a></li><li class="footer__item"><a href="https://www.chia.net/assets/Chia-New-Consensus-0.9.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item">Consensus 1.1</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items"><li class="footer__item"><a href="https://www.chia.net/grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants</a></li><li class="footer__item"><a href="https://www.chialisp.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chialisp</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items"><li class="footer__item"><a href="https://chia.net/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About</a></li><li class="footer__item"><a href="https://chia.net/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://chia.net/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2022 Chia Network Inc., Licensed under the <a href="https://github.com/Chia-Network/chia-docs/blob/main/LICENSE" target="_blank">Apache License, Version 2.0</a> | <a href="https://www.chia.net/terms">Terms</a></div></div></div></footer></div>
<script src="/zh/assets/js/runtime~main.d65043bd.js"></script>
<script src="/zh/assets/js/main.3378a4eb.js"></script>
</body>
</html>
"use strict";(self.webpackChunkchia_docs=self.webpackChunkchia_docs||[]).push([[3366],{1708:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>f,frontMatter:()=>r,metadata:()=>a,toc:()=>h});const a=JSON.parse('{"id":"guides/cat/cat2-upgrade/cat2-issuance","title":"CAT2 Token Reissuance","description":"CAT1 will reach its end of life at block 2,311,760, which will occur on July 26, 2022 at around 17:00 UTC.","source":"@site/docs/guides/cat/cat2-upgrade/cat2-issuance.md","sourceDirName":"guides/cat/cat2-upgrade","slug":"/guides/cat2-issuance","permalink":"/guides/cat2-issuance","draft":false,"unlisted":false,"editUrl":"https://github.com/Chia-Network/chia-docs/blob/main/docs/guides/cat/cat2-upgrade/cat2-issuance.md","tags":[],"version":"current","frontMatter":{"title":"CAT2 Token Reissuance","sidebar_label":"3. Token Reissuance","slug":"/guides/cat2-issuance"},"sidebar":"guides","previous":{"title":"2. Snapshot Generation","permalink":"/guides/cat2-snapshot"},"next":{"title":"CAT Creation Tutorial","permalink":"/guides/cat-creation-tutorial"}}');var i=s(4848),t=s(8453),l=s(1470),c=s(9365);const r={title:"CAT2 Token Reissuance",sidebar_label:"3. Token Reissuance",slug:"/guides/cat2-issuance"},o=void 0,d={},h=[{value:"Install the CAT Admin Tool",id:"install-the-cat-admin-tool",level:2},{value:"Secure the Bag (Single Issuance)",id:"secure-single",level:2},{value:"Secure the Bag (Multi Issuance)",id:"secure-multi",level:2},{value:"Unwind the Bag",id:"unwind",level:2},{value:"Test Run: Unwind the Bag",id:"test-unwind",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsx)(n.p,{children:"CAT1 will reach its end of life at block 2,311,760, which will occur on July 26, 2022 at around 17:00 UTC."}),(0,i.jsxs)(n.p,{children:["For more information on this end-of-life process, see the ",(0,i.jsx)(n.a,{href:"/guides/cat2-intro",children:"Intro and FAQ guide"}),"."]})]}),"\n",(0,i.jsx)(n.p,{children:"This document will show CAT1 issuers how to:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Install the CAT admin tool, which will be used to reissue tokens"}),"\n",(0,i.jsx)(n.li,{children:'"Secure the bag" \u2013 create a tree of new coins that are identical to the original CAT1 coins, in both size and destination wallet'}),"\n",(0,i.jsx)(n.li,{children:'"Unwind the bag" \u2013 airdrop the coins to the appropriate locations'}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Before starting this guide, you will need a snapshot CSV, instructions for which can be found in the ",(0,i.jsx)(n.a,{href:"/guides/cat2-snapshot",children:"Snapshot Generation guide"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"install-the-cat-admin-tool",children:"Install the CAT Admin Tool"}),"\n",(0,i.jsx)(n.admonition,{type:"warning",children:(0,i.jsxs)(n.p,{children:["A new version of the CAT Admin Tool will be released shortly after Chia version ",(0,i.jsx)(n.code,{children:"1.5.0"}),", at approximately the end-of-life block height (",(0,i.jsx)(n.code,{children:"2311760"}),"). You should not attempt token reissuance before you have updated to this version."]})}),"\n",(0,i.jsxs)(n.p,{children:["Now that you have a CSV file containing the necessary information, you can run the ",(0,i.jsx)(n.a,{href:"https://github.com/Chia-Network/CAT-admin-tool",children:"CAT Admin Tool"})," to secure and airdrop a set of CAT2 tokens equivalent in size and address to their CAT1 counterparts."]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["Open a new terminal window and run the following to clone the CAT Admin Tool repository, using the ",(0,i.jsx)(n.code,{children:"main"})," branch:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/Chia-Network/CAT-admin-tool.git -b main\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Change to the cloned repository:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cd CAT-admin-tool\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Create a new virtual environment and then activate it:"}),"\n"]}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"python -m venv venv\n.\\venv\\Scripts\\Activate.ps1\n"})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python3 -m venv venv\n. ./venv/bin/activate\n"})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python3 -m venv venv\n. ./venv/bin/activate\n"})})})]}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsxs)(n.li,{children:["Install the latest versions of ",(0,i.jsx)(n.code,{children:"pip"}),", ",(0,i.jsx)(n.code,{children:"setuptools"})," and ",(0,i.jsx)(n.code,{children:"wheel"}),":"]}),"\n"]}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"python -m pip install --upgrade pip setuptools wheel\n"})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python3 -m pip install --upgrade pip setuptools wheel\n"})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"python3 -m pip install --upgrade pip setuptools wheel\n"})})})]}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsx)(n.li,{children:"Install the CAT Admin Tool:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pip install .\npip install chia-dev-tools --no-deps\npip install pytest\n"})}),"\n",(0,i.jsxs)(n.admonition,{type:"note",children:[(0,i.jsx)(n.p,{children:"You can safely ignore the following errors:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ERROR: Failed building wheel for CAT-admin-tool\nERROR: pip's dependency resolver...\n"})}),(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"Python 3.9+ may be required on macOS"})})]}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsx)(n.li,{children:"The CAT Admin Tool should now be installed and configured properly. To test it, run:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cats --help\ncdv --help\n"})}),"\n",(0,i.jsx)(n.p,{children:"You should get a usage statement for each command. At this point, you're ready to create your new CAT2 coins."}),"\n",(0,i.jsx)(n.h2,{id:"secure-single",children:"Secure the Bag (Single Issuance)"}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["If your CAT used a multi-issuance TAIL, then skip to the ",(0,i.jsx)(n.a,{href:"#secure-multi",children:"next section"}),"."]})}),"\n",(0,i.jsxs)(n.p,{children:["This section will show you how to create a tree of CAT2 coins that are identical to the original CAT1 coins, in both size and destination puzzle hash (address). We'll start by demonstrating how to do this with single-issuance CATs, which typically (though not always) use the ",(0,i.jsx)(n.code,{children:"genesis_by_coin_id"})," TAIL."]}),"\n",(0,i.jsx)(n.p,{children:"If you are unsure whether your CAT used a single- or multi-issuance TAIL, step 1 will show you how to view the TAIL that was used to create it."}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Figure out the total number of XCH mojos that were issued for your CAT1."}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Navigate to ",(0,i.jsx)(n.a,{href:"https://www.taildatabase.com",children:"taildatabase.com"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Search for your CAT. We'll use Spacebucks for this example."}),"\n",(0,i.jsxs)(n.li,{children:["You'll see ",(0,i.jsx)(n.em,{children:"Supply"})," (and a number) under the title on the right side of your screen. The number indicates the number of tokens issued. However, you need to multiply this number by 1,000 in order to calculate the number of XCH mojos used for the issuance. For example, Spacebucks had an issuance of 1 billion (1,000,000,000) tokens, which is equivalent to 1 trillion (1,000,000,000,000) XCH mojos."]}),"\n",(0,i.jsxs)(n.li,{children:["Click the ",(0,i.jsx)(n.em,{children:"Chialisp"})," button. This will show you the TAIL that was used for issuance. If it was a single-issuance CAT, it likely used ",(0,i.jsx)(n.code,{children:"genesis_by_coin_id"}),". If you are unsure, compare the TAIL shown with the ",(0,i.jsx)(n.a,{href:"https://github.com/Chia-Network/chia-blockchain/blob/main/chia/wallet/puzzles/genesis_by_coin_id.clvm",children:"TAIL in GitHub"}),". Take note of this TAIL as you will need to input its hex version in a subsequent step (if you used one of our reference TAILs, then you already have a copy of this file)."]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Sync a Chia wallet that has at least as many XCH mojos as the original issuance."}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You must run Chia ",(0,i.jsx)(n.code,{children:"1.5.0"})," or greater."]}),"\n",(0,i.jsx)(n.li,{children:"You can run either the light wallet or a full node."}),"\n",(0,i.jsx)(n.li,{children:"You are recommended to have enough mojos to cover transaction fees for the reissuance. The recommended amount is five hundred thousand (500,000) mojos per coin to be reissued."}),"\n",(0,i.jsxs)(n.li,{children:["You are ",(0,i.jsx)(n.strong,{children:"required"})," to have a single coin that is large enough to cover the entire reissuance. Even if your XCH balance is sufficient, it may be separated into multiple small coins. The easiest way to ensure that you have a sufficiently large coin is to send a transaction to yourself of at least the total value required."]}),"\n"]})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Use the CAT Admin Tool to select a coin that will be used for issuing the CAT2 tokens."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["From a terminal window you'll need to run the ",(0,i.jsx)(n.code,{children:"cats"})," command. The arguments needed for this command include:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--tail"})," \u2013 The TAIL program that was originally used (usually this is ",(0,i.jsx)(n.code,{children:"genesis_by_coin_id"}),"), in hex file format."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--send-to"})," \u2013 Where to send the tokens when they are initially issued. This is a placeholder only \u2013 you can enter any XCH address here. The value is required, but it will be ignored."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--amount"})," \u2013 The total number of mojos for this issuance. You need to have this many mojos in your wallet. This number must match the actual number of mojos that were originally issued."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--as-bytes"})," \u2013 This tells the tool to output the spend bundle in bytes instead of JSON."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--select-coin"})," \u2013 This tells the tool to select a specific coin from your wallet."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The command to run is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cats --tail <HEX-FILE> --send-to <ADDRESS> --amount <AMOUNT> --as-bytes --select-coin\n"})}),"\n",(0,i.jsx)(n.p,{children:"Here's an example of the command to reissue Spacebucks:"}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"cats --tail .\\reference_tails\\genesis_by_coin_id.clsp.hex --send-to xch1rh6punh4fy70y80ef4g89c9hqvm54dtl0fvyc4ejdccp3y6p04fqn5x8x8 --amount 1000000000000 --as-bytes --select-coin\n"})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cats --tail ./reference_tails/genesis_by_coin_id.clsp.hex --send-to xch1rh6punh4fy70y80ef4g89c9hqvm54dtl0fvyc4ejdccp3y6p04fqn5x8x8 --amount 1000000000000 --as-bytes --select-coin\n"})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cats --tail ./reference_tails/genesis_by_coin_id.clsp.hex --send-to xch1rh6punh4fy70y80ef4g89c9hqvm54dtl0fvyc4ejdccp3y6p04fqn5x8x8 --amount 1000000000000 --as-bytes --select-coin\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"The last line of the output will be something like:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Name: 8f4dbff8df3f6aa9303eb47625cf8f09d885f1ad6a2d440582cb6bd45f53d2e8\n"})}),"\n",(0,i.jsx)(n.p,{children:"This is the Coin ID of the coin that you will use for reissuance. Keep this value handy."}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:'Obtain the target puzzle hash by running the "secure_the_bag" command. The important arguments here are:'}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--tail"})," \u2013 The TAIL program that was originally used (usually this is ",(0,i.jsx)(n.code,{children:"genesis_by_coin_id"}),"), in hex file format."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--amount"})," \u2013 The total number of mojos for this issuance. You need to have this many mojos in your wallet. This number must match the actual number of mojos that were originally issued."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--secure-the-bag-targets-path"})," \u2013 The full path to the CSV file that contains the snapshot of this CAT."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--curry"})," \u2013 The value of ",(0,i.jsx)(n.code,{children:"Name:"})," from the above output. Note that you need to prepend ",(0,i.jsx)(n.code,{children:"0x"})," to this argument, so for the above example, this value would start with ",(0,i.jsx)(n.code,{children:"0x8f4"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The command to run is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"secure_the_bag --tail <HEX-FILE> --amount <AMOUNT> --secure-the-bag-targets-path <PATH-TO-CSV-FILE> --prefix xch --curry <COIN-ID>\n"})}),"\n",(0,i.jsx)(n.p,{children:"Here's an example of the command to secure the bag for Spacebucks:"}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"secure_the_bag --tail .\\reference_tails\\genesis_by_coin_id.clsp.hex --amount 1000000000000 --secure-the-bag-targets-path C:\\Users\\Username\\Downloads\\spacebucks.csv --prefix xch --curry 0x8f4dbff8df3f6aa9303eb47625cf8f09d885f1ad6a2d440582cb6bd45f53d2e8\n"})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"secure_the_bag --tail ./reference_tails/genesis_by_coin_id.clsp.hex --amount 1000000000000 --secure-the-bag-targets-path /home/Username/Downloads/spacebucks.csv --prefix xch --curry 0x8f4dbff8df3f6aa9303eb47625cf8f09d885f1ad6a2d440582cb6bd45f53d2e8\n"})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"secure_the_bag --tail ./reference_tails/genesis_by_coin_id.clsp.hex --amount 1000000000000 --secure-the-bag-targets-path /Users/Username/Download/spacebucks.csv --prefix xch --curry 0x8f4dbff8df3f6aa9303eb47625cf8f09d885f1ad6a2d440582cb6bd45f53d2e8\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"The command will create a tree of coins. This could take a long time, depending on how many coins need to be created. While it's in progress, it will output the percent complete. After it is finished, it will output the puzzle hash and address of the new coin to be created."}),"\n",(0,i.jsx)(n.p,{children:"For this example, the final two lines of the output are:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Secure the bag root puzzle hash: 17060adf6856d2904c4fe90c9690b710cf758aee5968718e2fbfd12f7b9d817f\nSecure the bag root address: xch19k6cl5syzvxgkgulr7m49v2r57yh0aanm23hrffgd89j4nj3ywhqxadyqr\n"})}),"\n",(0,i.jsx)(n.p,{children:"You'll need both of these values later."}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsxs)(n.li,{children:["Push the transaction to the network. This will actually create the coin tree (",(0,i.jsx)(n.em,{children:"Secure the Bag"}),"). The arguments are the same as above, with one exception:"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"--send-to"}),' \u2013 The XCH address from the "Secure the bag root address:" of the above output']}),"\n",(0,i.jsx)(n.p,{children:"The command to run is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cats --tail <TAIL hex file> --send-to <root address> --amount <amount in mojos> --as-bytes --curry <0x Coin ID>\n"})}),"\n",(0,i.jsx)(n.p,{children:"For this example, the command looks like this:"}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"cats --tail .\\reference_tails\\genesis_by_coin_id.clsp.hex --send-to xch19k6cl5syzvxgkgulr7m49v2r57yh0aanm23hrffgd89j4nj3ywhqxadyqr --amount 1000000000000 --as-bytes --curry 0x8f4dbff8df3f6aa9303eb47625cf8f09d885f1ad6a2d440582cb6bd45f53d2e8\n"})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cats --tail ./reference_tails/genesis_by_coin_id.clsp.hex --send-to xch19k6cl5syzvxgkgulr7m49v2r57yh0aanm23hrffgd89j4nj3ywhqxadyqr --amount 1000000000000 --as-bytes --curry 0x8f4dbff8df3f6aa9303eb47625cf8f09d885f1ad6a2d440582cb6bd45f53d2e8\n"})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cats --tail ./reference_tails/genesis_by_coin_id.clsp.hex --send-to xch19k6cl5syzvxgkgulr7m49v2r57yh0aanm23hrffgd89j4nj3ywhqxadyqr --amount 1000000000000 --as-bytes --curry 0x8f4dbff8df3f6aa9303eb47625cf8f09d885f1ad6a2d440582cb6bd45f53d2e8\n"})})})]}),"\n",(0,i.jsxs)(n.p,{children:["You will need to confirm that you want to push the transaction, then you will receive the ",(0,i.jsx)(n.code,{children:"Asset ID"})," and ",(0,i.jsx)(n.code,{children:"Eve Coin ID"}),". For this example, the following was the result:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"The transaction has been created, would you like to push it to the network? (Y/N)y\nSuccessfully pushed the transaction to the network\nAsset ID: 9c39398afb1d7ffa03a589f60e5e39f2ae4572ff7048e689fe3128c339581b2d\nEve Coin ID: 9fe3e95308949cb9c49333f829922dc7118cd3e2fdf365cde669b47852ce3a7b\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You will need to use both of these values later. At this point, the amount you selected should have been deducted from your wallet in order to secure the bag. However, as this is not a standard transaction, it will not show up in the ",(0,i.jsx)(n.em,{children:"Transactions"})," section of your wallet GUI."]}),"\n",(0,i.jsx)(n.p,{children:"After the transaction has been pushed to the blockchain, you will have successfully created a tree of coins that have an identical size and ultimate destination as the original set of CAT1 coins."}),"\n",(0,i.jsx)(n.h2,{id:"secure-multi",children:"Secure the Bag (Multi Issuance)"}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["If you have already run ",(0,i.jsx)(n.code,{children:"secure_the_bag"})," for a single-issuance CAT in the ",(0,i.jsx)(n.a,{href:"#secure-single",children:"previous section"}),", then you should skip this section and proceed to the next section, ",(0,i.jsx)(n.a,{href:"#unwind",children:"Unwind the Bag"}),"."]})}),"\n",(0,i.jsxs)(n.p,{children:["This section will show you how to secure the bag for a multi-issuance CAT that used a ",(0,i.jsx)(n.code,{children:"delegated_tail"})," for its outer puzzle, and a ",(0,i.jsx)(n.code,{children:"genesis_by_coin_id"})," for its inner puzzle. This is the standard way to implement a multi-issuance CAT. If you used custom TAILs for your issuance, then you might still be able to use the commands described here."]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:["You need to use the same public/private key pair to sign the CAT2 issuance as you used for the CAT1 issuance. Your ",(0,i.jsx)(n.code,{children:"Asset ID"})," will not change between CAT1 and CAT2."]})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Figure out the total number of XCH mojos that were issued for your CAT1."}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Navigate to ",(0,i.jsx)(n.a,{href:"https://www.taildatabase.com",children:"taildatabase.com"}),"."]}),"\n",(0,i.jsx)(n.li,{children:"Search for your CAT."}),"\n",(0,i.jsxs)(n.li,{children:["You'll see ",(0,i.jsx)(n.em,{children:"Supply"})," (and a number) under the title on the right side of your screen. The number indicates the number of tokens issued. However, you need to multiply this number by 1,000 in order to calculate the number of XCH mojos used for the issuance. In this example, we'll use an issuance of 6 million (6,000,000) tokens, which is equivalent to 6 billion (6,000,000,000) XCH mojos."]}),"\n",(0,i.jsxs)(n.li,{children:["Click the ",(0,i.jsx)(n.em,{children:"Chialisp"})," button. This will show you the TAIL that was used for issuance. If it was a multi-issuance CAT, it likely used ",(0,i.jsx)(n.code,{children:"delegated_tail"}),". If you are unsure, compare the TAIL shown with the ",(0,i.jsx)(n.a,{href:"https://github.com/Chia-Network/chia-blockchain/blob/main/chia/wallet/puzzles/delegated_tail.clvm",children:"TAIL in GitHub"}),". Take note of this TAIL as you will need to input its hex version in a subsequent step (if you used one of our reference TAILs, then you already have a copy of this file)."]}),"\n"]}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"Sync a Chia wallet that has at least as many XCH mojos as the original issuance."}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["You must run Chia ",(0,i.jsx)(n.code,{children:"1.5.0"})," or greater."]}),"\n",(0,i.jsx)(n.li,{children:"You can run either the light wallet or a full node."}),"\n",(0,i.jsx)(n.li,{children:"You are recommended to have enough mojos to cover transaction fees for the reissuance. The recommended amount is five hundred thousand (500,000) mojos per coin to be reissued."}),"\n",(0,i.jsxs)(n.li,{children:["You are ",(0,i.jsx)(n.strong,{children:"required"})," to have a single coin that is large enough to cover the entire reissuance. Even if your XCH balance is sufficient, it may be separated into multiple small coins. The easiest way to ensure that you have a sufficiently large coin is to send a transaction to yourself of at least the total value required."]}),"\n"]})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:"Use the CAT Admin Tool to select a coin that will be used for issuing the CAT2 tokens."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["From a terminal window you'll need to run the ",(0,i.jsx)(n.code,{children:"cats"})," command. The arguments needed for this command include:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--tail"})," \u2013 The TAIL program that was originally used (usually this is ",(0,i.jsx)(n.code,{children:"delegated_tail"}),"), in hex file format."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--send-to"})," \u2013 Where to send the tokens when they are initially issued. This is a placeholder only \u2013 you can enter any XCH address here. The value is required, but it will be ignored."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--amount"})," \u2013 The total number of mojos for this issuance. You need to have this many mojos in your wallet. This number must match the actual number of mojos that were originally issued."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--as-bytes"})," \u2013 This tells the tool to output the spend bundle in bytes instead of JSON."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--select-coin"})," \u2013 This tells the tool to select a specific coin from your wallet."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The command to run is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cats --tail <HEX-FILE> --send-to <ADDRESS> --amount <AMOUNT> --as-bytes --select-coin\n"})}),"\n",(0,i.jsx)(n.p,{children:"Here's an example of the command:"}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"cats --tail .\\reference_tails\\delegated_tail.clsp.hex --send-to xch1rh6punh4fy70y80ef4g89c9hqvm54dtl0fvyc4ejdccp3y6p04fqn5x8x8 --amount 6000000000 --as-bytes --select-coin\n"})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cats --tail ./reference_tails/delegated_tail.clsp.hex --send-to xch1rh6punh4fy70y80ef4g89c9hqvm54dtl0fvyc4ejdccp3y6p04fqn5x8x8 --amount 6000000000 --as-bytes --select-coin\n"})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cats --tail ./reference_tails/delegated_tail.clsp.hex --send-to xch1rh6punh4fy70y80ef4g89c9hqvm54dtl0fvyc4ejdccp3y6p04fqn5x8x8 --amount 6000000000 --as-bytes --select-coin\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"The last line of the output will be something like:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Name: 11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6\n"})}),"\n",(0,i.jsx)(n.p,{children:"This is the Coin ID of the coin that you will use for reissuance. Keep this value handy."}),"\n",(0,i.jsxs)(n.ol,{start:"4",children:["\n",(0,i.jsx)(n.li,{children:'Obtain the target puzzle hash by running the "secure_the_bag" command. The important arguments here are:'}),"\n"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--tail"})," \u2013 The TAIL program that was originally used (usually this is ",(0,i.jsx)(n.code,{children:"delegated_tail"}),"), in hex file format."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--amount"})," \u2013 The total number of mojos for this issuance. You need to have this many mojos in your wallet. This number must match the actual number of mojos that were originally issued."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--secure-the-bag-targets-path"})," \u2013 The full path to the CSV file that contains the snapshot of this CAT."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--curry"})," \u2013 The value of ",(0,i.jsx)(n.code,{children:"Name:"})," from the above output. Note that you need to prepend ",(0,i.jsx)(n.code,{children:"0x"})," to this argument, so for the above example, this value would start with ",(0,i.jsx)(n.code,{children:"0x110"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The command to run is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"secure_the_bag --tail <HEX-FILE> --amount <AMOUNT> --secure-the-bag-targets-path <PATH-TO-CSV-FILE> --prefix xch --curry <COIN-ID>\n"})}),"\n",(0,i.jsx)(n.p,{children:"Here's an example of the command to secure the bag:"}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"secure_the_bag --tail .\\reference_tails\\delegated_tail.clsp.hex --amount 6000000000 --secure-the-bag-targets-path C:\\Users\\Username\\Downloads\\multi.csv --prefix xch --curry 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6\n"})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"secure_the_bag --tail ./reference_tails/delegated_tail.clsp.hex --amount 6000000000 --secure-the-bag-targets-path /home/Username/Downloads/multi.csv --prefix xch --curry 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6\n"})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"secure_the_bag --tail ./reference_tails/delegated_tail.clsp.hex --amount 6000000000 --secure-the-bag-targets-path /Users/Username/Download/multi.csv --prefix xch --curry 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"The command will create a tree of coins. This could take a long time, depending on how many coins need to be created. While it's in progress, it will output the percent complete. After it is finished, it will output the puzzle hash and address of the new coin to be created."}),"\n",(0,i.jsx)(n.p,{children:"For this example, the final two lines of the output are:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Secure the bag root puzzle hash: ce663d935a4ca545475eeebff680922c32f496b326ade73a9820e354526449a1\nSecure the bag root address: xch1rd7hejemt57amqtxq8azqg90hgxyhd9shwyjuppq5ez2jn4rlznscn4efy\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You should now have obtained the ",(0,i.jsx)(n.code,{children:"Secure the bag root puzzle hash"})," and the ",(0,i.jsx)(n.code,{children:"Secure the bag root address"}),"."]}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsxs)(n.li,{children:["Using the coin ID obtained from the ",(0,i.jsx)(n.code,{children:"cats"})," command above, curry the ID into the ",(0,i.jsx)(n.code,{children:"genesis_by_coin_id"})," puzzle."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The command to run is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cdv clsp curry <HEX-FILE> -a <COIN-ID>\n"})}),"\n",(0,i.jsx)(n.p,{children:"In this example, the command will be:"}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"cdv clsp curry .\\reference_tails\\genesis_by_coin_id.clsp.hex -a 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6\n"})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cdv clsp curry ./reference_tails/genesis_by_coin_id.clsp.hex -a 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6\n"})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cdv clsp curry ./reference_tails/genesis_by_coin_id.clsp.hex -a 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"The output will be a new CLVM puzzle:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-lisp",children:"(a (q 2 (i 47 (q 8) (q 2 (i (= 45 2) () (q 8)) 1)) 1) (c (q . 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6) 1))\n"})}),"\n",(0,i.jsx)(n.p,{children:"You will need to use the resulting puzzle (the output, enclosed in parentheses) in a later step."}),"\n",(0,i.jsxs)(n.ol,{start:"6",children:["\n",(0,i.jsxs)(n.li,{children:["Run the same ",(0,i.jsx)(n.code,{children:"curry"})," command from the previous step, but add the ",(0,i.jsx)(n.code,{children:"--treehash"})," flag at the end:"]}),"\n"]}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"cdv clsp curry .\\reference_tails\\genesis_by_coin_id.clsp.hex -a 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6 --treehash\n"})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cdv clsp curry ./reference_tails/genesis_by_coin_id.clsp.hex -a 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6 --treehash\n"})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cdv clsp curry ./reference_tails/genesis_by_coin_id.clsp.hex -a 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6 --treehash\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"The output will be the treehash of the puzzle you calculated in the previous step:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"3a56fa8cdf70dfd0e894af58359d72cb04658a1b0628a4ffe0dcc02099c9863b\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"7",children:["\n",(0,i.jsx)(n.li,{children:"Sign the treehash that you just calculated. This will effectively sign the puzzle containing the coin you selected."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The command to run is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chia keys sign -d <TREEHASH> -f <FINGERPRINT> -t m -b\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Where ",(0,i.jsx)(n.code,{children:"<FINGERPRINT>"})," is the fingerprint of the wallet that holds the coin you previously selected. This fingerprint can be obtained by running ",(0,i.jsx)(n.code,{children:"chia keys show"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"For this example, the command is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chia keys sign -d 3a56fa8cdf70dfd0e894af58359d72cb04658a1b0628a4ffe0dcc02099c9863b -f 1131363750 -t m -b\n"})}),"\n",(0,i.jsx)(n.p,{children:"The output will be the public key used for signing, as well as the signature obtained:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Public key: 8a7afe10d00899b94cf0d407b85e1b9fca21868bcf158563fe9432b60e36db7136055186221fbd27ecc7fc0d5b99ef1b\nSignature: b75390ee21b001b7a721f719ff045e3dc2a1072ab0824a8e75c881398db0fbed8fde5c62bbdfe629dce5da3d77834559016acd6d403f9b90d3102da2e9452461457514088af0cabe0b8a8493fc9c09d1785f1322abc8958ecf7907eba0e0abcc\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"8",children:["\n",(0,i.jsxs)(n.li,{children:["The final step is to create the coin using the ",(0,i.jsx)(n.code,{children:"secure the bag root address"})," as the target address."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The command to run is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:'cats --tail <HEX-FILE> --curry <PUBLIC-KEY> --send-to <Secure the bag root address> --amount <amount in mojos> --as-bytes --solution "<curry command output>" --signature <signature>\n'})}),"\n",(0,i.jsx)(n.p,{children:"The arguments needed are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--tail"})," \u2013 The TAIL program that was originally used (usually this is ",(0,i.jsx)(n.code,{children:"delegated_tail"}),"), in hex file format."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--curry"})," \u2013 The public key obtained in the previous step. Be sure to prefix it with ",(0,i.jsx)(n.code,{children:"0x"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--send-to"})," \u2013 The ",(0,i.jsx)(n.code,{children:"secure the bag root address"}),", obtained from in a previous step."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--amount"})," \u2013 The total number of mojos for this issuance. You need to have this many mojos in your wallet. This number must match the actual number of mojos that were originally issued."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--as-bytes"})," \u2013 Output the spend bundle in bytes (don't change this)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--solution"})," \u2013 The output of the ",(0,i.jsx)(n.code,{children:"curry"})," command from a previous step (in quotes)."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--signature"})," \u2013 The signature obtained from the previous step."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"For this example, the command to execute is:"}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:'cats --tail .\\reference_tails\\delegated_tail.clsp.hex --curry 0x8a7afe10d00899b94cf0d407b85e1b9fca21868bcf158563fe9432b60e36db7136055186221fbd27ecc7fc0d5b99ef1b --send-to xch1rd7hejemt57amqtxq8azqg90hgxyhd9shwyjuppq5ez2jn4rlznscn4efy --amount 6000000000 --as-bytes --solution "(a (q 2 (i 47 (q 8) (q 2 (i (= 45 2) () (q 8)) 1)) 1) (c (q . 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6) 1))" --signature b75390ee21b001b7a721f719ff045e3dc2a1072ab0824a8e75c881398db0fbed8fde5c62bbdfe629dce5da3d77834559016acd6d403f9b90d3102da2e9452461457514088af0cabe0b8a8493fc9c09d1785f1322abc8958ecf7907eba0e0abcc\n'})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'cats --tail ./reference_tails/delegated_tail.clsp.hex --curry 0x8a7afe10d00899b94cf0d407b85e1b9fca21868bcf158563fe9432b60e36db7136055186221fbd27ecc7fc0d5b99ef1b --send-to xch1rd7hejemt57amqtxq8azqg90hgxyhd9shwyjuppq5ez2jn4rlznscn4efy --amount 6000000000 --as-bytes --solution "(a (q 2 (i 47 (q 8) (q 2 (i (= 45 2) () (q 8)) 1)) 1) (c (q . 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6) 1))" --signature b75390ee21b001b7a721f719ff045e3dc2a1072ab0824a8e75c881398db0fbed8fde5c62bbdfe629dce5da3d77834559016acd6d403f9b90d3102da2e9452461457514088af0cabe0b8a8493fc9c09d1785f1322abc8958ecf7907eba0e0abcc\n'})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'cats --tail ./reference_tails/delegated_tail.clsp.hex --curry 0x8a7afe10d00899b94cf0d407b85e1b9fca21868bcf158563fe9432b60e36db7136055186221fbd27ecc7fc0d5b99ef1b --send-to xch1rd7hejemt57amqtxq8azqg90hgxyhd9shwyjuppq5ez2jn4rlznscn4efy --amount 6000000000 --as-bytes --solution "(a (q 2 (i 47 (q 8) (q 2 (i (= 45 2) () (q 8)) 1)) 1) (c (q . 0x11038a7e107cb7e17a503ba201d94166018deecd777314e4697c5269d9f37fb6) 1))" --signature b75390ee21b001b7a721f719ff045e3dc2a1072ab0824a8e75c881398db0fbed8fde5c62bbdfe629dce5da3d77834559016acd6d403f9b90d3102da2e9452461457514088af0cabe0b8a8493fc9c09d1785f1322abc8958ecf7907eba0e0abcc\n'})})})]}),"\n",(0,i.jsx)(n.p,{children:"The output of this command will contain the Asset ID and Eve Coin ID for your issuance:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Asset ID: cd3f7b65e1c20317ea0586b272262d5d59c1f0ebcab02231f1ec6f738c1953cf\nEve Coin ID: 06e2afb16c5eebb4c5fbbfe95856cf961dc59a6292b969d5c9f8c8914e57987c\n"})}),"\n",(0,i.jsx)(n.p,{children:"You'll need these values in the next section. Note that if the Asset ID doesn't match the original CAT1 Asset ID, then something is wrong."}),"\n",(0,i.jsx)(n.h2,{id:"unwind",children:"Unwind the Bag"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"The steps in this section are the same for both single-issuance and multi-issuance CATs."})}),"\n",(0,i.jsxs)(n.admonition,{type:"tip",children:[(0,i.jsx)(n.p,{children:"This step will unwind the bag for the entire set of coins. You may wish to run a test by first unwinding the coins due to a specific address; this way you can verify that the unwinding to this address has worked before preceeding with unwinding the whole bag."}),(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"#test-unwind",children:"Skip to the next section if you want to run this test."})})]}),"\n",(0,i.jsxs)(n.p,{children:["The final step is to actually send the CAT2 tokens to the correct locations (AKA ",(0,i.jsx)(n.em,{children:'"unwind the bag"'}),"). This will send coins to each appropriate wallet."]}),"\n",(0,i.jsx)(n.p,{children:"The important values for this command are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--eve-coin-id"}),' \u2013 Obtained from the final "secure the bag" command above.']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--tail-hash"})," \u2013 The ",(0,i.jsx)(n.code,{children:"Asset ID:"}),' from the final "secure the bag" command above.']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--secure-the-bag-targets-path"})," \u2013 The full path to the CSV file that contains the snapshot of this CAT."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--unwind-fee"})," \u2013 An optional blockchain fee in mojos, will be applied to each spend."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--wallet-id"})," \u2013 The ID of the wallet from which to unwind (typically ",(0,i.jsx)(n.code,{children:"1"}),")."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The command to run is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"unwind_the_bag --eve-coin-id <EVE-COIN-ID> --tail-hash <ASSET-ID> --secure-the-bag-targets-path <PATH-TO-CSV-FILE> --unwind-fee <FEE> --wallet-id <WALLET-ID>\n"})}),"\n",(0,i.jsx)(n.p,{children:"For this example, the command to unwind the entire bag is:"}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"unwind_the_bag --eve-coin-id 9fe3e95308949cb9c49333f829922dc7118cd3e2fdf365cde669b47852ce3a7b --tail-hash 9c39398afb1d7ffa03a589f60e5e39f2ae4572ff7048e689fe3128c339581b2d --secure-the-bag-targets-path C:\\Users\\Username\\Downloads\\spacebucks.csv --unwind-fee 500000 --wallet-id 1\n"})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"unwind_the_bag --eve-coin-id 9fe3e95308949cb9c49333f829922dc7118cd3e2fdf365cde669b47852ce3a7b --tail-hash 9c39398afb1d7ffa03a589f60e5e39f2ae4572ff7048e689fe3128c339581b2d --secure-the-bag-targets-path /home/Username/Downloads/spacebucks.csv --unwind-fee 500000 --wallet-id 1\n"})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"unwind_the_bag --eve-coin-id 9fe3e95308949cb9c49333f829922dc7118cd3e2fdf365cde669b47852ce3a7b --tail-hash 9c39398afb1d7ffa03a589f60e5e39f2ae4572ff7048e689fe3128c339581b2d --secure-the-bag-targets-path /Users/Username/Downloads/spacebucks.csv --unwind-fee 500000 --wallet-id 1\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"This command could take a long time to finish running. Afterward, you will have an exact copy of your CAT1 issuance, but in CAT2 form."}),"\n",(0,i.jsxs)(n.p,{children:["At this point, you can navigate to ",(0,i.jsx)(n.a,{href:"https://www.taildatabase.com/",children:"taildatabase.com"})," and register your new CAT2 token, using the Asset ID obtained from the final step of the Secure the Bag section."]}),"\n",(0,i.jsx)(n.p,{children:"\ud83c\udf89 Congratulations! You've successfully reissued your tokens in the CAT2 standard. \ud83c\udf89"}),"\n",(0,i.jsx)(n.h2,{id:"test-unwind",children:"Test Run: Unwind the Bag"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Optional:"})," Before unwinding the bag all at once, you can run a test by sending the correct number of tokens to a single address."]})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"We used Spacebucks in the single-issuance example, so we'll obtain the puzzle hash of a wallet that contains some CAT1 Spacebucks. First, run:"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"chia keys show\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This will show the ",(0,i.jsx)(n.code,{children:"First wallet address"})," of the key pair that contains Spacebucks:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"First wallet address: xch1qzz5xrd05698f2n2tt4qm500kys6p4w79ph7s2xrlau3drfugl3qqh9j4l\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsxs)(n.li,{children:["Use the ",(0,i.jsx)(n.code,{children:"cdv decode"})," command to obtain the puzzle hash that corresponds to this wallet address:"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"cdv decode xch1qzz5xrd05698f2n2tt4qm500kys6p4w79ph7s2xrlau3drfugl3qqh9j4l\n"})}),"\n",(0,i.jsx)(n.p,{children:"Which outputs:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"0085430dafa68a74aa6a5aea0dd1efb121a0d5de286fe828c3ff79168d3c47e2\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If you want to verify that the puzzle hash is actually due to receive some tokens, you can check the CSV file. In this case, puzzle hash ",(0,i.jsx)(n.code,{children:"0085..."})," should receive 42 thousand (42,000) barfs."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Run the ",(0,i.jsx)(n.code,{children:"unwind_the_bag"})," command to send the appropriate amount to that puzzle hash. Be sure to run this command from the wallet that has the appropriate funds in it."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The important values for this command are:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--eve-coin-id"}),' \u2013 Obtained from the final "secure the bag" command above.']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--tail-hash"})," \u2013 The ",(0,i.jsx)(n.code,{children:"Asset ID:"}),' from the final "secure the bag" command above.']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--secure-the-bag-targets-path"})," \u2013 The full path to the CSV file that contains the snapshot of this CAT."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--unwind-fee"})," \u2013 An optional blockchain fee in mojos, will be applied to each spend."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--wallet-id"})," \u2013 The ID of the wallet from which to unwind (typically ",(0,i.jsx)(n.code,{children:"1"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"--unwind-target-puzzle-hash"})," \u2013 The puzzle hash obtained from the ",(0,i.jsx)(n.code,{children:"cdv decode"})," command above."]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"The command to run is:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"unwind_the_bag --eve-coin-id <EVE-COIN-ID> --tail-hash <ASSET-ID> --secure-the-bag-targets-path <PATH-TO-CSV-FILE> --unwind-fee <FEE> --wallet-id <WALLET-ID> --unwind-target-puzzle-hash <PUZZLE-HASH>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["You may have noticed that this command is identical to ",(0,i.jsx)(n.a,{href:"#unwind",children:"the command that unwinds the whole bag"}),", with the addition of the ",(0,i.jsx)(n.code,{children:"--unwind-target-puzzle-hash"})," flag that ensures only coins are sent to a specific address."]}),"\n",(0,i.jsx)(n.p,{children:"In this example, the command to unwind the bag is:"}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:"unwind_the_bag --eve-coin-id 9fe3e95308949cb9c49333f829922dc7118cd3e2fdf365cde669b47852ce3a7b --tail-hash 9c39398afb1d7ffa03a589f60e5e39f2ae4572ff7048e689fe3128c339581b2d --secure-the-bag-targets-path C:\\Users\\Username\\Downloads\\spacebucks.csv --unwind-fee 500000 --wallet-id 1 --unwind-target-puzzle-hash 0085430dafa68a74aa6a5aea0dd1efb121a0d5de286fe828c3ff79168d3c47e2\n"})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"unwind_the_bag --eve-coin-id 9fe3e95308949cb9c49333f829922dc7118cd3e2fdf365cde669b47852ce3a7b --tail-hash 9c39398afb1d7ffa03a589f60e5e39f2ae4572ff7048e689fe3128c339581b2d --secure-the-bag-targets-path /home/Username/Downloads/spacebucks.csv --unwind-fee 500000 --wallet-id 1 --unwind-target-puzzle-hash 0085430dafa68a74aa6a5aea0dd1efb121a0d5de286fe828c3ff79168d3c47e2\n"})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"unwind_the_bag --eve-coin-id 9fe3e95308949cb9c49333f829922dc7118cd3e2fdf365cde669b47852ce3a7b --tail-hash 9c39398afb1d7ffa03a589f60e5e39f2ae4572ff7048e689fe3128c339581b2d --secure-the-bag-targets-path /Users/Username/Downloads/spacebucks.csv --unwind-fee 500000 --wallet-id 1 --unwind-target-puzzle-hash 0085430dafa68a74aa6a5aea0dd1efb121a0d5de286fe828c3ff79168d3c47e2\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"This command could take a long time, depending on the total number of coins to unwind.\nYou will need to verify the spend of each individual coin to unwind, and the command will monitor the blockchain for the coin(s) to be spent."}),"\n",(0,i.jsx)(n.p,{children:"The end result should be that the appropriate number of coins are sent to the puzzle hash, which you can then verify in your Chia wallet (assuming you control that wallet)."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Each puzzle hash in the bag can only receive one airdrop. When you later unwind the bag for each puzzle hash, any puzzle hashes that have already received an airdrop will be skipped. They will ",(0,i.jsx)(n.em,{children:"not"})," receive a second airdrop."]})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsxs)(n.li,{children:["The puzzle hashes from the CSV file are actually ",(0,i.jsx)(n.em,{children:"inner"})," puzzle hashes, so searching for them on chain using ",(0,i.jsx)(n.code,{children:"cdv rpc coinrecords"})," is more complex than it normally would be. However, you can still verify that the bag was successfully unwound for that puzzle hash by searching for the hint:"]}),"\n"]}),"\n",(0,i.jsxs)(l.A,{defaultValue:"windows",groupId:"os",values:[{label:"Windows",value:"windows"},{label:"Linux",value:"linux"},{label:"macOS",value:"macos"}],children:[(0,i.jsx)(c.A,{value:"windows",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-powershell",children:'chia rpc full_node get_coin_records_by_hint \'{\\"hint\\": \\"<puzzle hash obtained in step 2>\\"}\'\n'})})}),(0,i.jsx)(c.A,{value:"linux",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'chia rpc full_node get_coin_records_by_hint \'{"hint": "<puzzle hash obtained in step 2>"}\'\n'})})}),(0,i.jsx)(c.A,{value:"macos",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'chia rpc full_node get_coin_records_by_hint \'{"hint": "<puzzle hash obtained in step 2>"}\'\n'})})})]}),"\n",(0,i.jsx)(n.p,{children:"You should see matching coin_records for each entry in the CSV file, along with its corresponding value."}),"\n",(0,i.jsxs)(n.p,{children:["Now that you've tested unwinding the bag, you can proceed to ",(0,i.jsx)(n.a,{href:"#unwind",children:"unwind the rest of the bag"}),"."]})]})}function f(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},9365:(e,n,s)=>{s.d(n,{A:()=>l});s(6540);var a=s(4164);const i={tabItem:"tabItem_Ymn6"};var t=s(4848);function l(e){let{children:n,hidden:s,className:l}=e;return(0,t.jsx)("div",{role:"tabpanel",className:(0,a.A)(i.tabItem,l),hidden:s,children:n})}},1470:(e,n,s)=>{s.d(n,{A:()=>v});var a=s(6540),i=s(4164),t=s(3104),l=s(6347),c=s(205),r=s(7485),o=s(1682),d=s(679);function h(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:s}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:s,attributes:a,default:i}}=e;return{value:n,label:s,attributes:a,default:i}}))}(s);return function(e){const n=(0,o.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function f(e){let{value:n,tabValues:s}=e;return s.some((e=>e.value===n))}function x(e){let{queryString:n=!1,groupId:s}=e;const i=(0,l.W6)(),t=function(e){let{queryString:n=!1,groupId:s}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!s)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return s??null}({queryString:n,groupId:s});return[(0,r.aZ)(t),(0,a.useCallback)((e=>{if(!t)return;const n=new URLSearchParams(i.location.search);n.set(t,e),i.replace({...i.location,search:n.toString()})}),[t,i])]}function p(e){const{defaultValue:n,queryString:s=!1,groupId:i}=e,t=u(e),[l,r]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:s}=e;if(0===s.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!f({value:n,tabValues:s}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${s.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=s.find((e=>e.default))??s[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:t}))),[o,h]=x({queryString:s,groupId:i}),[p,b]=function(e){let{groupId:n}=e;const s=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,t]=(0,d.Dv)(s);return[i,(0,a.useCallback)((e=>{s&&t.set(e)}),[s,t])]}({groupId:i}),m=(()=>{const e=o??p;return f({value:e,tabValues:t})?e:null})();(0,c.A)((()=>{m&&r(m)}),[m]);return{selectedValue:l,selectValue:(0,a.useCallback)((e=>{if(!f({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);r(e),h(e),b(e)}),[h,b,t]),tabValues:t}}var b=s(2303);const m={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=s(4848);function g(e){let{className:n,block:s,selectedValue:a,selectValue:l,tabValues:c}=e;const r=[],{blockElementScrollPositionUntilNextRender:o}=(0,t.a_)(),d=e=>{const n=e.currentTarget,s=r.indexOf(n),i=c[s].value;i!==a&&(o(n),l(i))},h=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const s=r.indexOf(e.currentTarget)+1;n=r[s]??r[0];break}case"ArrowLeft":{const s=r.indexOf(e.currentTarget)-1;n=r[s]??r[r.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":s},n),children:c.map((e=>{let{value:n,label:s,attributes:t}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>r.push(e),onKeyDown:h,onClick:d,...t,className:(0,i.A)("tabs__item",m.tabItem,t?.className,{"tabs__item--active":a===n}),children:s??n},n)}))})}function w(e){let{lazy:n,children:s,selectedValue:t}=e;const l=(Array.isArray(s)?s:[s]).filter(Boolean);if(n){const e=l.find((e=>e.props.value===t));return e?(0,a.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:l.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function y(e){const n=p(e);return(0,j.jsxs)("div",{className:(0,i.A)("tabs-container",m.tabList),children:[(0,j.jsx)(g,{...n,...e}),(0,j.jsx)(w,{...n,...e})]})}function v(e){const n=(0,b.A)();return(0,j.jsx)(y,{...e,children:h(e.children)},String(n))}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>c});var a=s(6540);const i={},t=a.createContext(i);function l(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);
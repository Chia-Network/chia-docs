<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-resources/chia-farming-workload">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Storage - Chia Farming Workload Analysis | Chia Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.chia.net/img/og-chia.png"><meta data-rh="true" name="twitter:image" content="https://docs.chia.net/img/og-chia.png"><meta data-rh="true" property="og:url" content="https://docs.chia.net/chia-farming-workload"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Storage - Chia Farming Workload Analysis | Chia Documentation"><meta data-rh="true" name="description" content="Jonmichael Hands, VP Storage, Chia Network. For comments and questions reach out to @LebanonJon on Discord, or @LebanonJon on Twitter"><meta data-rh="true" property="og:description" content="Jonmichael Hands, VP Storage, Chia Network. For comments and questions reach out to @LebanonJon on Discord, or @LebanonJon on Twitter"><link data-rh="true" rel="icon" href="/svg/chia-leaf-green.svg"><link data-rh="true" rel="canonical" href="https://docs.chia.net/chia-farming-workload"><link data-rh="true" rel="alternate" href="https://docs.chia.net/chia-farming-workload" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.chia.net/zh/chia-farming-workload" hreflang="zh"><link data-rh="true" rel="alternate" href="https://docs.chia.net/chia-farming-workload" hreflang="x-default"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/js/matomo.js" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.742ed211.css">
<link rel="preload" href="/assets/js/runtime~main.81e6b942.js" as="script">
<link rel="preload" href="/assets/js/main.eeb81a55.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/svg/chia-leaf-green.svg" alt="Chia Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/svg/chia-leaf-green.svg" alt="Chia Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Chia Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/introduction">Docs</a><a class="navbar__item navbar__link" href="/guides/crash-course/introduction">Guides</a><a href="https://chialisp.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chialisp<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://chia.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia Network<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Chia-Network/chia-blockchain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/introduction">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/plotting-basics">Plotting</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/farming-basics">Farming</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/rpc">RPC Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cli">CLI Reference</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/walletconnect-commands">WalletConnect</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/coin-set-intro">Coin Set Model</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/architecture-overview">Architecture</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/consensus-intro">Consensus</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/key-architecture">Keys</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/chia-protocol">Protocol</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/check-if-things-are-working">Reference Client</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/green-paper-abstract">Green Paper</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/references">Resources</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/references">References</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/chia-farming-workload">Storage - Chia Farming Workload Analysis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/faq">FAQ</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Resources</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Storage - Chia Farming Workload Analysis</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Storage - Chia Farming Workload Analysis</h1></header><p>Jonmichael Hands, VP Storage, Chia Network. For comments and questions reach out to @LebanonJon on <a href="https://discorg.gg/chia" target="_blank" rel="noopener noreferrer">Discord</a>, or <a href="https://twitter.com/LebanonJon" target="_blank" rel="noopener noreferrer">@LebanonJon</a> on Twitter</p><p><a href="https://docs.google.com/spreadsheets/d/1AJP8j673qfbxxju87SjGs174DMVFpzjS/edit?usp=sharing&amp;ouid=108662600751303250659&amp;rtpof=true&amp;sd=true" target="_blank" rel="noopener noreferrer">Model</a> in Excel</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="abstract">Abstract<a href="#abstract" class="hash-link" aria-label="Direct link to Abstract" title="Direct link to Abstract">​</a></h2><p>Chia uses a consensus called proof of space and time, in which participants prove to the network that they are storing a certain amount of data through a process called farming.</p><p>Farmers respond to network challenges to earn rewards for securing the Chia network, which involves generating proofs of space from stored data. The protocol for farming and harvesting was designed for quick and efficient verification of proofs of space while minimizing disk io (input/output). A harvester service checks plot files for partial proofs of space when a challenge is received. There is a plot filter designed to significantly reduce the amount of disk io required by requiring that a hash of the plot id and challenge contains a certain amount of zeros. We will explore the theoretical disk io requirements based on the protocols, and look at measured disk utilization during a real farming workload. The Chia farming workload differs from traditional enterprise or consumer storage use cases since the data stored in plot files contains no user data. The Chia farming workload is read-only, completely random distribution, and a low amount of data transferred between the device and host. Data durability (defined as the probability of not losing user data) and error rate requirements for Chia are significantly reduced compared to storing user data and may constitute a new class of storage media and promote used hardware that otherwise would not be suitable.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="proof-of-space-verification">Proof of space verification<a href="#proof-of-space-verification" class="hash-link" aria-label="Direct link to Proof of space verification" title="Direct link to Proof of space verification">​</a></h2><p>The proof of space construction and the <a href="/proof-of-space">Proof of Space page</a> contains the details on the format for plot files. A plot file size is determined by a k value where each plot is made up of 7 tables each with 2^k entries. When a challenge arrives the plot filter is applied to reduce the disk io by the value of the plot filter constant, which is currently set to 512. The probability of a plot being accessed each challenge, which happens on the signage point interval time, is 1/512. The probability of an individual disk being accessed can be found with the binomial distribution function cumulative probability with a probability per plot, n trials equal to the number of plots on the disk (probability of X successes ≥ 1) per signage point. The amount of IOPS (input/output operations per second) can be estimated by determining the mean of the plot filter passes per day and multiplying by the number of seeks required for a proof quality check. In the pooling protocol a pool operator requests several partial proofs of space per day per drive to verify that the pool participant is indeed storing as much data as they claim. The bandwidth and amount of data transferred can be estimated by looking at the average blocksize of the read requests multiplied by the IOPS.</p><p><strong>Constants in proof of space that were chosen for Chia</strong></p><ul><li>Signage point time (seconds): 9.375</li><li>Plot filter: 512</li><li>K value minimum: 32</li><li>IO Proof quality check: 9 read requests</li><li>IO Full proof of space (and partial request from pool): 64 read requests</li><li>Partials per day: set by pool operators, estimated at 300 for reference</li><li>Average IO size per request (kB): 14</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="storage-workload-profile">Storage workload profile<a href="#storage-workload-profile" class="hash-link" aria-label="Direct link to Storage workload profile" title="Direct link to Storage workload profile">​</a></h2><p>We can estimate the storage workload on a given drive capacity (measured in TB, terabytes) by knowing the k size selected and n number of plots that fit on the drive.</p><table><thead><tr><th>Drive size (TB)</th><th align="right">4</th><th align="right">8</th><th align="right">10</th><th align="right">12</th><th align="right">14</th><th align="right">16</th><th align="right">18</th><th align="right">20</th></tr></thead><tbody><tr><td>k value</td><td align="right">32</td><td align="right">32</td><td align="right">32</td><td align="right">32</td><td align="right">32</td><td align="right">32</td><td align="right">32</td><td align="right">32</td></tr><tr><td>Number of plots</td><td align="right">36</td><td align="right">73</td><td align="right">91</td><td align="right">110</td><td align="right">128</td><td align="right">146</td><td align="right">165</td><td align="right">183</td></tr><tr><td>k value</td><td align="right">34</td><td align="right">34</td><td align="right">34</td><td align="right">34</td><td align="right">34</td><td align="right">34</td><td align="right">34</td><td align="right">34</td></tr><tr><td>Number of plots</td><td align="right">8</td><td align="right">17</td><td align="right">21</td><td align="right">25</td><td align="right">30</td><td align="right">34</td><td align="right">38</td><td align="right">43</td></tr></tbody></table><p>Events per day, plots passing filter = signage points per day ✕ n plots / filter constant
number of reads =(Events per day, plots passing filter ✕ IO Proof quality check) +(IO Full proof of space ✕ Partials per day<br>
<!-- -->IOPS average =number of reads per day / 86400 seconds
MB read per day = Number of reads ✕ average IO size per request (kB) / 1000<br>
<!-- -->Bandwidth = IOPS <!-- -->*<!-- --> Block Size</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="average-io-size-per-request">Average IO Size per request<a href="#average-io-size-per-request" class="hash-link" aria-label="Direct link to Average IO Size per request" title="Direct link to Average IO Size per request">​</a></h3><p>An IO kernel trace was taken on a sample of drives to determine the block size requests on the block layer (commands sent directly to the drive over the SATA interface), and found that the majority of the IO commands sent were 12 and 16kB transfers. This will likely change very slightly with different storage hardware, operating systems, storage devices, drivers, and filesystems.</p><p><img loading="lazy" alt="iosize_hist" src="/assets/images/iosize_hist-190219243e9e76c2bc5bb8d9145983e7.png" title="iosize_hist" width="1027" height="461" class="img_ev3q"></p><p>Measured data from ext4 filesystem in Linux resulted in an average blocksize of
13.9kB with n=44 drives of capacity 18TB
14.5kB with n=94 drives capacity ranging from 8-18TB</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="calculated-data-read-and-disk-bandwidth">Calculated data read and disk bandwidth<a href="#calculated-data-read-and-disk-bandwidth" class="hash-link" aria-label="Direct link to Calculated data read and disk bandwidth" title="Direct link to Calculated data read and disk bandwidth">​</a></h3><p>Chia Farming Total Amount of data read per day per drive capacity</p><p><img loading="lazy" alt="data_per_day" src="/assets/images/data_per_day-63d731accc72197842f1076e5f7c7b7b.png" title="data_per_day" width="1244" height="856" class="img_ev3q"></p><p>Bandwidth and amount of data read are all directly proportional to the number of io requests required for the proof quality checks and partial proof of space generation. K=32 with a difficulty of 1 is the theoretical maximum bandwidth for Chia farming. It is typical for a pool operator to automatically adjust the difficulty to target enough partials per day to get an accurate estimate of the farming capacity, without a significant increase in io on the device.</p><p><img loading="lazy" alt="bw_drive" src="/assets/images/bw_drive-07b3cb42e0a93978256f609a441c466a.png" title="bw_drive" width="1244" height="856" class="img_ev3q"></p><p>As expected, bandwidth per drive scales with the number of plots per drive (which is increased when a higher capacity disk is used) and increases with difficulty. K=34 offers a reduction in io requirements by reducing the number of plots per disk.</p><p><img loading="lazy" alt="prob_access" src="/assets/images/prob_access-430f862506ceef20bba0cd6de8c9fea0.png" title="prob_access" width="1244" height="856" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="hard-drive-rated-workloads">Hard drive rated workloads<a href="#hard-drive-rated-workloads" class="hash-link" aria-label="Direct link to Hard drive rated workloads" title="Direct link to Hard drive rated workloads">​</a></h3><p>Hard disk drive reliability is rated at a specified amount of data read and written per year, expressed in TB/year. Common 3.5in HDDs used in Chia farming are rated at 200-550TB per year workload depending on the drive model and recommended use case. The amount of data written for Chia is often just the size of the drive, because plots are generated on ephemeral storage and then sequentially copied over to the drive. The amount of data read can be calculated by looking at the bandwidth of the drive and multiplying it by time. In the worst case, with the largest hard drive on the market today at 20TB, full of k=32 plots, at difficulty 1 pooling would read an average of 2.1GB per day, or 750 GB per year. This is 0.37% of the rated workload assuming a 200TB/year - Chia is an extremely light workload compared to typical end-user workloads (e.g. NAS, file or object storage, video streaming).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="measured-data">Measured data<a href="#measured-data" class="hash-link" aria-label="Direct link to Measured data" title="Direct link to Measured data">​</a></h2><p>Data was collected across a sample size of drives of varying capacity, as detailed in the system configuration. The duration of the measured data was 48 hours with a scraping period of 5s.</p><table><thead><tr><th>capacity</th><th>Sample Size</th><th>bandwidth (kB/s)</th><th>IOPS</th><th>blocksize (kB)</th><th>latency (ms)</th></tr></thead><tbody><tr><td>8</td><td>3</td><td>3.45</td><td>0.23</td><td>14.76</td><td>5.18</td></tr><tr><td>10</td><td>2</td><td>4.17</td><td>0.28</td><td>14.72</td><td>7.04</td></tr><tr><td>12</td><td>16</td><td>5.03</td><td>0.34</td><td>14.69</td><td>7.11</td></tr><tr><td>14</td><td>2</td><td>6.02</td><td>0.41</td><td>14.72</td><td>5.21</td></tr><tr><td>16</td><td>27</td><td>6.20</td><td>0.44</td><td>14.14</td><td>6.27</td></tr><tr><td>18</td><td>44</td><td>7.46</td><td>0.51</td><td>14.57</td><td>5.53</td></tr><tr><td>Total</td><td>94</td><td>6.46</td><td>0.45</td><td>14.48</td><td>6.02</td></tr></tbody></table><p>We compare the modeled metrics of an 18TB drive to the measure data collected</p><table><thead><tr><th>Metric</th><th>Estimated/Modeled</th><th>Measured</th></tr></thead><tbody><tr><td>Bandwidth per drive (kB/s)</td><td>4.59 kB/s</td><td>7.46 kB/s</td></tr><tr><td>IOPS</td><td>0.33</td><td>0.51</td></tr><tr><td>Disk busy time</td><td>0.136%</td><td>0.24%</td></tr><tr><td>Latency per request (ms)</td><td>4.3</td><td>6.02</td></tr></tbody></table><p>Disk IOPS</p><p><img loading="lazy" alt="IOPS" src="/assets/images/iops-73e6fe55c4999e2d6839ddaa4017bddf.png" title="IOPS" width="1861" height="1307" class="img_ev3q"></p><p>Disk bandwidth</p><p><img loading="lazy" alt="bw" src="/assets/images/bw-873a300af25d7147fb8dcb19f2979bb8.png" title="bw" width="1859" height="1300" class="img_ev3q"></p><p>Latency</p><p><img loading="lazy" alt="latency" src="/assets/images/latency-660c0a26ba53ce3873f0cf30ba293a4f.png" title="latency" width="1854" height="1761" class="img_ev3q"></p><p>Disk Utilization</p><p><img loading="lazy" alt="disk_busy" src="/assets/images/disk_busy-30e336f99ead8b64b141c1435abdef53.png" title="disk_busy" width="1854" height="1133" class="img_ev3q"></p><p>CPU Busy Time</p><p><img loading="lazy" alt="cpu busy time" src="/assets/images/cpu1-88fa0b4b9b174a63da789a05aae7179b.png" title="cpu" width="464" height="226" class="img_ev3q"></p><p>System CPU Utilization</p><p><img loading="lazy" alt="system utilization" src="/assets/images/cpu-4d37c79ab38c06322e3cfacba6775ebe.png" title="cpu" width="1871" height="410" class="img_ev3q"></p><p>Network Traffic (Chia harvester only)</p><p><img loading="lazy" alt="network" src="/assets/images/net-a524b6533296a516877749e576e4c0de.png" title="network traffic" width="1866" height="404" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="measurement-tools">Measurement tools<a href="#measurement-tools" class="hash-link" aria-label="Direct link to Measurement tools" title="Direct link to Measurement tools">​</a></h3><ul><li><a href="https://grafana.com/" target="_blank" rel="noopener noreferrer">Grafana</a></li><li><a href="https://prometheus.io/docs/guides/node-exporter/" target="_blank" rel="noopener noreferrer">Node Exporter</a></li><li><a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a></li><li><a href="https://github.com/Open-CAS/standalone-linux-io-tracer" target="_blank" rel="noopener noreferrer">Standalone Linux IO Tracer</a></li><li>dstat, iostat (sysstat)</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="system-configuration">System configuration<a href="#system-configuration" class="hash-link" aria-label="Direct link to System configuration" title="Direct link to System configuration">​</a></h3><p>Measured data collected from the following system</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">Motherboard: Intel R1208WFTYS</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">Intel Xeon Gold 6140 CPU, 128GB DDR4 @ 2400MT/s</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">HBA: LSI 9300-8e</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">JBOD: Supermicro 90 Bay, SuperChassis 946ED-R2KJBOD</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">Drive Models:</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">Seagate Exos x16 16TB, Firmware SN03</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">WD HC550 18TB, Firmware: PCGNW232WDC</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">WD WD120EDAZ: 8, 10, 12, 14TB, Firmware: 81.00A81</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-durability-uncorrectable-bit-error-rate-and-chia-farming">Data durability, uncorrectable bit error rate, and Chia farming<a href="#data-durability-uncorrectable-bit-error-rate-and-chia-farming" class="hash-link" aria-label="Direct link to Data durability, uncorrectable bit error rate, and Chia farming" title="Direct link to Data durability, uncorrectable bit error rate, and Chia farming">​</a></h2><p>UBER is defined as &quot;A metric for the rate of occurrence of data errors, equal to the number of data errors per bits read.&quot;
In HDD and SSD, UBER is generally reflected in lifetime values for an entire population, but the actual rates of error and rate of increase are dependent on many factors including time, temperature, and amount of wear on the storage media. In SSDs this is adjusted for and measured per the JESD218B specification which defines UBER for SSDs using &quot;The
numerator is the total count of data errors detected over the full TBW rating for the population of SSDs, or the sample of SSDs in the endurance verification.&quot;</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="uber-of-standard-storage-devices">UBER of standard storage devices<a href="#uber-of-standard-storage-devices" class="hash-link" aria-label="Direct link to UBER of standard storage devices" title="Direct link to UBER of standard storage devices">​</a></h3><p>Consumer HDDs are rated for less than 1 error per 10<sup>14</sup> (sometimes shown as UBER of 10<sup>-14</sup>). This means that if a consumer reads on 800TB of data, they would expect a single read error on average.</p><table><thead><tr><th>Device</th><th>UBER</th><th>Data read per error</th></tr></thead><tbody><tr><td>Consumer HDD</td><td>10<!-- -->-<!-- -->14</td><td>800 TB</td></tr><tr><td>Enterprise HDD</td><td>10<!-- -->-<!-- -->15</td><td>8 PB</td></tr><tr><td>SSD</td><td>10<!-- -->-<!-- -->17</td><td>800 PB</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="uber-in-chia">UBER in Chia<a href="#uber-in-chia" class="hash-link" aria-label="Direct link to UBER in Chia" title="Direct link to UBER in Chia">​</a></h3><p>In a storage system containing user data, an uncorrectable read error on a single storage device is handled by redundancy or parity, generally through RAID, erasure code, mirror, or backup of the data. Plot files contain random cryptographic hashes. If a device containing plots fails, no useful data is lost. Therefore, the best practice for Chia is not to include any data protection. If there is a single uncorrectable read error somewhere on the storage device, we could therefore calculate the probability of reading that LBA (logical block address) by using the estimated amount of data read per day in the Chia farming workload - because the reads are perfectly random, each read request coming from the harvester service will have an equal probability of being accessed.</p><p>Using the UBER and the estimated amount of data read per day with Chia farming, we can approximate the number of years it would take to encounter an error while farming Chia.</p><p><img loading="lazy" alt="UBER" src="/assets/images/uber-09f9747bd8e9eb88c1981b038bafab88.png" title="UBER" width="1200" height="742" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-happens-when-an-error-occurs">What happens when an error occurs?<a href="#what-happens-when-an-error-occurs" class="hash-link" aria-label="Direct link to What happens when an error occurs?" title="Direct link to What happens when an error occurs?">​</a></h3><p>Each k=32 plot file contains around 4.3 billion proofs. Depending on where the error occurs, in metadata, table 1, etc. there are a certain amount of proofs within a plot file that will be corrupted. In the absolute worst case that an entire plot file gets corrupted. A more likely case would just be that a certain percentage of proofs are corrupt, and the likelihood of reading those given the amount of data read per day in the Chia farming workload is extremely low. If the uncorrectable read error collides with a lookup for a partial proof of space, the farmer would fail that single request for a partial proof of space or proof quality check. This would lower the user&#x27;s estimated capacity for a short duration, but then revert to the mean. In other words, an error in Chia farming is not catastrophic. Chia farming workload is a very good fit for a storage device with a higher error rate, potentially even with an UBER of greater than 10<sup>-13 </sup>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2><p>Chia is a light workload for a hard drive, 309 times lower disk busy time than an example hyperscale data center workload<!-- -->[2]<!-- -->. Plot files contain random cryptographic hashes that can easily be created and no user data, removing data durability requirements for data storage in Chia farming. Proof of space is a novel use case for hard drives and can accept storage media with a high UBER compared to typical consumer and enterprise workloads. Chia farming will constitute a new class of storage that is optimized for high capacity, write once / read many, low power, and high error rate. Chia farming is a great fit for hard drive technology optimized for sequential write only, such as SMR (Shingled Magnetic Recording), and in the future NVMe ZNS (Zoned Name Spaces) paired with high capacity storage of a lower media grade. Chia farming would be an ideal use case for used storage, given the storage media is high enough capacity to maintain a competitive TCO compared to new more power-efficient disks.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h2><ol><li><a href="https://www.jedec.org/standards-documents/jesd218b01" target="_blank" rel="noopener noreferrer">JEDEC </a>JESD218B.01 SOLID STATE DRIVE (SSD) REQUIREMENTS AND ENDURANCE TEST METHOD</li><li><a href="https://www.usenix.org/system/files/fast21-pan.pdf" target="_blank" rel="noopener noreferrer">Facebook&#x27;s Tectonic Filesystem: Efficiency from Exascale</a></li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Chia-Network/chia-docs/blob/main/docs/resources/chia-farming-workload.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/references"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">References</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/faq"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">FAQ</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#abstract" class="table-of-contents__link toc-highlight">Abstract</a></li><li><a href="#proof-of-space-verification" class="table-of-contents__link toc-highlight">Proof of space verification</a></li><li><a href="#storage-workload-profile" class="table-of-contents__link toc-highlight">Storage workload profile</a><ul><li><a href="#average-io-size-per-request" class="table-of-contents__link toc-highlight">Average IO Size per request</a></li><li><a href="#calculated-data-read-and-disk-bandwidth" class="table-of-contents__link toc-highlight">Calculated data read and disk bandwidth</a></li><li><a href="#hard-drive-rated-workloads" class="table-of-contents__link toc-highlight">Hard drive rated workloads</a></li></ul></li><li><a href="#measured-data" class="table-of-contents__link toc-highlight">Measured data</a><ul><li><a href="#measurement-tools" class="table-of-contents__link toc-highlight">Measurement tools</a></li><li><a href="#system-configuration" class="table-of-contents__link toc-highlight">System configuration</a></li></ul></li><li><a href="#data-durability-uncorrectable-bit-error-rate-and-chia-farming" class="table-of-contents__link toc-highlight">Data durability, uncorrectable bit error rate, and Chia farming</a><ul><li><a href="#uber-of-standard-storage-devices" class="table-of-contents__link toc-highlight">UBER of standard storage devices</a></li><li><a href="#uber-in-chia" class="table-of-contents__link toc-highlight">UBER in Chia</a></li><li><a href="#what-happens-when-an-error-occurs" class="table-of-contents__link toc-highlight">What happens when an error occurs?</a></li></ul></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Approach</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chia.net/approach" target="_blank" rel="noopener noreferrer" class="footer__link-item">White Paper</a></li></ul></div><div class="col footer__col"><div class="footer__title">Technology</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chia.net/greenpaper" target="_blank" rel="noopener noreferrer" class="footer__link-item">Green Paper</a></li><li class="footer__item"><a href="https://docs.chia.net/consensus-intro" target="_blank" rel="noopener noreferrer" class="footer__link-item">Consensus 1.1</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chia.net/grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants</a></li><li class="footer__item"><a href="https://chialisp.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chialisp</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chia.net/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About</a></li><li class="footer__item"><a href="https://chia.net/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://chia.net/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2023 Chia Network Inc., Licensed under the <a href="https://github.com/Chia-Network/chia-docs/blob/main/LICENSE" target="_blank">Apache License, Version 2.0</a> | <a href="https://chia.net/terms">Terms</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.81e6b942.js"></script>
<script src="/assets/js/main.eeb81a55.js"></script>
</body>
</html>
<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/datalayer/datalayer-user-guide" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">DataLayer User Guide | Chia Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.chia.net/img/og-chia.png"><meta data-rh="true" name="twitter:image" content="https://docs.chia.net/img/og-chia.png"><meta data-rh="true" property="og:url" content="https://docs.chia.net/guides/datalayer-user-guide/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" property="og:locale:alternate" content="zh_Hans"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="DataLayer User Guide | Chia Documentation"><meta data-rh="true" name="description" content="This document will guide you through the process of setting up Chia&#x27;s DataLayer™ and running a few basic functions."><meta data-rh="true" property="og:description" content="This document will guide you through the process of setting up Chia&#x27;s DataLayer™ and running a few basic functions."><link data-rh="true" rel="icon" href="/svg/chia-leaf-green.svg"><link data-rh="true" rel="canonical" href="https://docs.chia.net/guides/datalayer-user-guide/"><link data-rh="true" rel="alternate" href="https://docs.chia.net/guides/datalayer-user-guide/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.chia.net/zh-Hans/guides/datalayer-user-guide/" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://docs.chia.net/guides/datalayer-user-guide/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Primitives","item":"https://docs.chia.net/guides/primitives"},{"@type":"ListItem","position":2,"name":"DataLayer™","item":"https://docs.chia.net/guides/datalayer-developer-guide"},{"@type":"ListItem","position":3,"name":"DataLayer User Guide","item":"https://docs.chia.net/guides/datalayer-user-guide"}]}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/js/matomo.js" async defer="defer"></script><link rel="stylesheet" href="/assets/css/styles.f7772b47.css">
<script src="/assets/js/runtime~main.3a9f4a8b.js" defer="defer"></script>
<script src="/assets/js/main.e40e5ff8.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/svg/chia-leaf-green.svg" alt="Chia Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/svg/chia-leaf-green.svg" alt="Chia Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Chia Docs</b></a><a class="navbar__item navbar__link" href="/chia-blockchain/introduction/">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/dev-guides-home/">Dev Guides</a><a class="navbar__item navbar__link" href="/academy-home/">Chia Academy</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/guides/datalayer-user-guide/" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="en">English</a></li><li><a href="/zh-Hans/guides/datalayer-user-guide/" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="zh-Hans">简体中文</a></li></ul></div><a href="https://chialisp.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chialisp<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://chia.net" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia Network<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/Chia-Network/chia-blockchain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/dev-guides-home/">Crash Course</a><button aria-label="Collapse sidebar category &#x27;Crash Course&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/crash-course/introduction/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/crash-course/intro-to-chialisp/">Chialisp</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/crash-course/smart-coins/">Smart Coins</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/crash-course/signatures/">Signatures</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/crash-course/state/">State</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/crash-course/inner-puzzles/">Inner Puzzles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/crash-course/cats-offers-nfts/">CATs, Offers and NFTs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/crash-course/chialisp-and-typescript/">Chialisp and TypeScript</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/guides/primitives/">Primitives</a><button aria-label="Collapse sidebar category &#x27;Primitives&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/guides/nft-developer-guide/">NFT Guide</a><button aria-label="Expand sidebar category &#x27;NFT Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/guides/cat-developer-guide/">CAT Guide</a><button aria-label="Expand sidebar category &#x27;CAT Guide&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/guides/datalayer-developer-guide/">DataLayer™</a><button aria-label="Collapse sidebar category &#x27;DataLayer™&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/guides/datalayer-user-guide/">DataLayer User Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/datalayer-permissions/">DataLayer Permissions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/guides/clawback-developer-guide/">Clawback</a><button aria-label="Expand sidebar category &#x27;Clawback&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/guides/offers-developer-guide/">Offers</a><button aria-label="Expand sidebar category &#x27;Offers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/guides/daos-developer-guide/">DAOs</a><button aria-label="Expand sidebar category &#x27;DAOs&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/guides/verifiable-credentials-guide/">Verifiable Credentials Guide</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/guides/tutorials/">Tutorials</a><button aria-label="Expand sidebar category &#x27;Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/guides/video-series/">Video Series</a><button aria-label="Expand sidebar category &#x27;Video Series&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/guides/primitives/"><span>Primitives</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/guides/datalayer-developer-guide/"><span>DataLayer™</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">DataLayer User Guide</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>DataLayer User Guide</h1></header><p>This document will guide you through the process of setting up Chia&#x27;s DataLayer™ and running a few basic functions.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="about-datalayer">About DataLayer<a href="#about-datalayer" class="hash-link" aria-label="Direct link to About DataLayer" title="Direct link to About DataLayer">​</a></h3>
<p>As a decentralized database, the Chia DataLayer allows users to store the original data locally. The hash of that data is then saved in a <a href="https://chialisp.com/singletons" target="_blank" rel="noopener noreferrer">singleton</a> (a coin with a unique ID that can be spent and recreated many times) with updated properties each time it is recreated. The on-chain component of Chia DataLayer is also a singleton. If the original data’s hash matches the hash stored on-chain, then the original data is guaranteed to be accurate.</p>
<p>At the basic level, the Chia DataLayer provides a shared data network with no central authority. Nodes in this network can subscribe to data from other nodes and receive updates whenever the data changes.</p>
<p>The real magic of DataLayer is the ability to use the data in smart contract transactions. Specifically, Chialisp code can directly process records stored in Chia DataLayer, opening up a new world of functionality for Chialisp programmers not available on any other blockchain. It starts with the concept of a &quot;proof of inclusion.&quot;</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="proof-of-inclusion">Proof of inclusion<a href="#proof-of-inclusion" class="hash-link" aria-label="Direct link to Proof of inclusion" title="Direct link to Proof of inclusion">​</a></h4>
<p>A proof of inclusion is a way to prove that a key/value pair is being stored, without needing to provide the entire Merkle tree from the store. This is accomplished by creating a spend of the DataLayer singleton that accepts two things in its solution:</p>
<ol>
<li>The hash of a key/value pair from the Merkle tree</li>
<li>Proof that the same key/value pair actually exists in the Merkle tree. This proof is obtained by providing the minimum peer hashes necessary to recalculate the Merkle root that is currently stored on-chain, starting from the leaf obtained from the key/value pair.</li>
</ol>
<p>When this proof is obtained, the singleton announces the hash that exists in that DataLayer table.</p>
<p>Proofs of inclusion are the basis for accessing DataLayer data from Chialisp because once the data is proven, it can be used to drive other functionality, starting with the two-party commit, and moving beyond to include oracles and off-chain contracts.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-1-two-party-commit">Example 1: Two-party commit<a href="#example-1-two-party-commit" class="hash-link" aria-label="Direct link to Example 1: Two-party commit" title="Direct link to Example 1: Two-party commit">​</a></h4>
<p>&quot;Two-party commit&quot; is the simplest example of a proof of inclusion. It is an Offer where the owner of one DataLayer table offers to make an update if and only if the owner of another DataLayer table makes a specified update.</p>
<p>A two-party commit uses an Offer that includes six asserts and spends.</p>
<p>In the original Offer, the maker includes:</p>
<ol>
<li>A spend of the maker&#x27;s DataLayer singleton to make the update to the maker&#x27;s table</li>
<li>A spend of the maker&#x27;s DataLayer singleton to announce a proof of inclusion of the updates made</li>
<li>An assert of an announcement from the taker of a proof of inclusion of a required update</li>
</ol>
<p>To accept the offer, the taker adds:</p>
<ol start="4">
<li>A spend of the taker DataLayer singleton to make the update</li>
<li>A spend of the taker DataLayer singleton to announce the proof of inclusion of the updated data</li>
<li>An assert of the proof of inclusion from the maker</li>
</ol>
<p>The offer spendbundle only goes through when all of the necessary assertions are satisfied.</p>
<p>Where it gets interesting is what other coins might do with that announcement. Another coin can accept the key and value in its solution, hash them, and assert an announcement from the DataLayer coin of a proof of inclusion of that hash. If the assert succeeds, then the coin can confidently use that data in the key and value as a validated input to whatever it may want to do.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-2-nft-ratings">Example 2: NFT ratings<a href="#example-2-nft-ratings" class="hash-link" aria-label="Direct link to Example 2: NFT ratings" title="Direct link to Example 2: NFT ratings">​</a></h4>
<p>A hypothetical example of a proof of inclusion could be NFT ratings. Here&#x27;s how it would work:</p>
<ul>
<li>A critic provides ratings for various NFTs in a DataLayer table, such that people could create offers based on that rating.</li>
<li>A prospective buyer might offer 5 XCH for any NFT with a &quot;blue ribbon&quot; rating from RatingWiz.</li>
<li>To accept the offer, an NFT owner would have to include a proof of inclusion from the rating table that their NFT had that rating.</li>
</ul>
<p>This example would require anyone-can-spend DataLayer proofs of inclusion (these doesn&#x27;t exist yet, but would be straightforward to build). The anyone-can-spend proof of inclusion could also generate a payment to the DataLayer table owner to pay RatingWiz for their services.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resources-and-notes">Resources and notes<a href="#resources-and-notes" class="hash-link" aria-label="Direct link to Resources and notes" title="Direct link to Resources and notes">​</a></h4>
<p>For additional technical resources, see the following:</p>
<ul>
<li><a title="DataLayer RPC API" href="/reference-client/rpc-reference/datalayer-rpc/">DataLayer RPC API</a></li>
<li><a title="DataLayer CLI Reference" href="/reference-client/cli-reference/datalayer-cli/">DataLayer CLI Reference</a></li>
<li><a href="/guides/datalayer-permissions/">DataLayer Permission Guide</a> -- a new feature as of Chia 1.8.0</li>
<li><a href="https://www.chia.net/2022/09/21/enabling-data-for-web3-announcing-chia-datalayer/" target="_blank" rel="noopener noreferrer">DataLayer blog post</a></li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Commands that modify the blockchain include an optional fee. This fee can be specified in two ways:</p><ol>
<li>The <code>-m</code> / <code>--fee</code> parameter can be specified explicitly in the command, as several of the examples in this document show</li>
<li>If the fee option is not explicitly specified, then the <code>data_layer:fee</code> setting in <code>~/.chia/mainnet/config/config.yaml</code> will be used. By default, this is set to 1 billion mojos (0.001 XCH)</li>
<li>If neither of these options is set, then no fee will be used</li>
</ol></div></div>
<hr>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>If you have already installed Chia version 1.6 or greater and started the reference client, you may skip to the next section: <a href="#configure-chia-to-run-datalayer">Configure Chia to run DataLayer</a>.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="datalayer-guide">DataLayer Guide<a href="#datalayer-guide" class="hash-link" aria-label="Direct link to DataLayer Guide" title="Direct link to DataLayer Guide">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-and-run-chia">Install and Run Chia<a href="#install-and-run-chia" class="hash-link" aria-label="Direct link to Install and Run Chia" title="Direct link to Install and Run Chia">​</a></h3>
<p>DataLayer can be activated or deactivated from Chia&#x27;s reference wallet GUI. However, the commands to use it are only available from the CLI or RPC. You can choose whether to <a href="/reference-client/install-and-setup/installation/#from-source">install Chia from source</a> or <a href="https://www.chia.net/downloads/" target="_blank" rel="noopener noreferrer">run the packaged installer</a>.</p>
<ol>
<li>
<p><strong>If you installed from source</strong>, be sure you have activated a virtual environment (you should see <code>(venv)</code> on the left side of your Powershell/terminal window).</p>
</li>
<li>
<p>Run <code>chia version</code>. You should be shown the correct version. For example:</p>
</li>
</ol>
<div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia version</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">1.8.0</span><br></span></code></pre></div></div>
<ol start="3">
<li>(optional) Run <code>chia configure --set-log-level INFO</code>. This will instruct your Chia installation to log more info than it would have with the default level of WARNING:</li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia configure --set-log-level INFO</span><br></span></code></pre></div></div>
<p>Result:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">Logging level updated. Check ~/.chia/mainnet/log/debug.log</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">Restart any running chia services for changes to take effect</span><br></span></code></pre></div></div>
<p>(You will restart Chia later in this guide.)</p>
<ol start="4">
<li>Acquire some XCH. 0.01 XCH is a sufficient amount to get started.</li>
</ol>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you ever need to display your address, run <code>chia keys show</code>. This command will only output your public keys and address; your private keys and seed phrase will not be shown.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-chia-to-run-datalayer">Configure Chia to run DataLayer<a href="#configure-chia-to-run-datalayer" class="hash-link" aria-label="Direct link to Configure Chia to run DataLayer" title="Direct link to Configure Chia to run DataLayer">​</a></h3>
<p>At this point, you should have installed and started Chia. You should also have a synced wallet with some XCH (0.01 XCH is sufficient to get started). You do <em>not</em> need a synced full node.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>You are recommended to complete steps 1 and 2 (port forwarding and firewall configuration) in order to run DataLayer. If you skip these steps, DataLayer might not run properly.</p></div></div>
<ol>
<li>
<p>Configure your router to forward port 8575 (data propagation server) to your local machine. To configure your router&#x27;s settings, typically you will need enter <code>http://192.168.1.1</code> in a web browser, though this address varies for different routers. From your router&#x27;s settings, locate the Port Forwarding section and add a rule to forward port 8575 to your local IP address.</p>
</li>
<li>
<p>You will also need to configure your computer&#x27;s firewall to allow connections on port 8575. This process is different for each OS:</p>
</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Firewall setup</div><div class="admonitionContent_BuS1"><div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Windows</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Linux</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">MacOS</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><p>From a PowerShell prompt, run:</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">start-Process powershell -Verb runAs</span><br></span></code></pre></div></div><p>This will open a new PowerShell window as an Administrator. From this new window, you will need to run four commands, two for incoming connections and two for outgoing connections.</p><div class="language-powershell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-powershell codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">netsh advfirewall firewall add rule name=&quot;allowDataServerIn&quot; dir=in action=allow protocol=TCP localport=8575</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">netsh advfirewall firewall add rule name=&quot;allowDataServerOut&quot; dir=out action=allow protocol=TCP localport=8575</span><br></span></code></pre></div></div><p>Each of these commands should give a response of <code>Ok.</code> Once you have successfully run the commands, exit the Administrator PowerShell window.</p></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Assuming you use iptables, which is installed on most distributions by default, run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">sudo iptables -I INPUT -p tcp -m tcp --dport 8575 -j ACCEPT</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">sudo iptables -I OUTPUT -p tcp -m tcp --dport 8575 -j ACCEPT</span><br></span></code></pre></div></div><p>Next, save the settings. For Ubuntu and Debian, run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">sudo /sbin/iptables-save</span><br></span></code></pre></div></div><p>For CentOS, Red Hat, and Fedora, run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">/sbin/service iptables save</span><br></span></code></pre></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><p>Open /etc/pf.conf in a text editor. You will need administrative privileges. For example:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">sudo vi /etc/pf.conf</span><br></span></code></pre></div></div><p>Add the following lines to the end of the file:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain"># Open port 8575 for Chia Data Propagation Server</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">pass in proto tcp from any to any port 8575</span><br></span></code></pre></div></div><p>Save and close the file.</p><p>To load the changes, run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">sudo pfctl -f /etc/pf.conf</span><br></span></code></pre></div></div><p>To verify that the changes are active, run:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">sudo pfctl -sr | grep 8575</span><br></span></code></pre></div></div></div></div></div></div></div>
<ol start="3">
<li>(optional) If you are going to use a DataLayer as a Service (DLaaS) plugin, you can add custom headers to <code>~/.chia/mainnet/config/config.yaml</code>. For example, you might update the config as follows:</li>
</ol>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token key atrule">data_layer</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">  </span><span class="token key atrule">client_timeout</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"> </span><span class="token number" style="color:#B35C00;font-weight:normal">15</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">  </span><span class="token key atrule">database_path</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"> data_layer/db/data_layer_CHALLENGE.sqlite</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">  </span><span class="token key atrule">downloaders</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    </span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain"> </span><span class="token key atrule">url</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:#383a42">:</span><span class="token number" style="color:#B35C00;font-weight:normal">9456</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">      </span><span class="token key atrule">headers</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        </span><span class="token key atrule">x-api-key</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"> your</span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain">api</span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain">key</span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain">here</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    </span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain"> </span><span class="token key atrule">url</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"> http</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain">//localhost</span><span class="token punctuation" style="color:#383a42">:</span><span class="token number" style="color:#B35C00;font-weight:normal">3145</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">      </span><span class="token key atrule">headers</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        </span><span class="token key atrule">x-api-key</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"> your</span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain">api</span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain">key</span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain">here</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain"></span><span class="token punctuation" style="color:#383a42">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain"></span><span class="token key atrule">uploaders</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">  </span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain"> </span><span class="token key atrule">url</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"> https</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain">//plugin.datalayer.storage</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    </span><span class="token key atrule">headers</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">      </span><span class="token key atrule">x-api-key</span><span class="token punctuation" style="color:#383a42">:</span><span class="token plain"> your</span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain">api</span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain">key</span><span class="token punctuation" style="color:#383a42">-</span><span class="token plain">here</span><br></span></code></pre></div></div>
<p>For more information on this feature, see the description in the relevant <a href="https://github.com/Chia-Network/issue-tracker/issues/483" target="_blank" rel="noopener noreferrer">GitHub issue</a>.</p>
<ol start="4">
<li>Start the DataLayer services from the GUI:</li>
</ol>
<p>(For CLI instructions, skip ahead to step 5.)</p>
<div style="text-align:center"><img src="/img/data_layer/09_start_data.png" alt="Start the DataLayer services"><figcaption><em>Enable DataLayer services.</em></figcaption></div>
<br>
<p>As shown in the above image:</p>
<ul>
<li>Click <code>Settings</code> on the lower left side of your wallet</li>
<li>Click the <code>DATA LAYER</code> menu</li>
<li>Click the slider to <code>Enable Data Layer</code></li>
<li>A slider titled <code>Enable File Propagation Server</code> will appear. Click this to enable it as well</li>
</ul>
<p>Finally, you need to restart Chia. Close the GUI and run steps 3 and 6 above. When Chia starts, it will automatically enable both of the DataLayer services.</p>
<ol start="5">
<li>If the dot to the left of <code>WALLET</code> is green (indicating that your wallet is synced), then you may proceed. If it is still orange, then you need to wait for it turn green before continuing.</li>
</ol>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Regardless of the status of <code>FULL NODE</code>, you may safely proceed with this tutorial:</p><ul>
<li>Orange dot = full node is syncing</li>
<li>Green dot = full node is synced</li>
<li><code>FULL NODE</code> is missing = you are running in <code>Wallet Mode</code></li>
</ul></div></div>
<div style="text-align:center"><img src="/img/data_layer/10_synced.png" alt="Synced wallet"></div>
<br>
<ol start="6">
<li>Start the DataLayer services from the CLI</li>
</ol>
<p>(You can safely skip this step if you already started the DataLayer services from the GUI.)</p>
<p>First, start the DataLayer service:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia start data</span><br></span></code></pre></div></div>
<p>Result:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia_data_layer: started</span><br></span></code></pre></div></div>
<p>Next, start the File Propagation Server:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia start data_layer_http</span><br></span></code></pre></div></div>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia_data_layer_http: started</span><br></span></code></pre></div></div>
<p><strong>Chia and the DataLayer are now installed and configured properly.</strong></p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="note-on-maximum-key-and-value-lengths">Note on Maximum Key and Value Lengths<a href="#note-on-maximum-key-and-value-lengths" class="hash-link" aria-label="Direct link to Note on Maximum Key and Value Lengths" title="Direct link to Note on Maximum Key and Value Lengths">​</a></h2>
<p>You may be wondering how much data DataLayer can handle. When testing locally, there are a few important points to consider:</p>
<ul>
<li>There is no enforced limit on the length of DataLayer keys or values</li>
<li>However, your computer must have enough memory (and other resources) to store the keys and values it downloads. A Raspberry Pi with 4 GB of memory will not be able to support the same size data sets as a server with 512 GB of memory</li>
<li>Additionally, when adding a single key/value pair, the total size of the pair must fit into memory (the individual sizes of the key and value don&#x27;t matter)</li>
<li>When running <code>update_data_store</code> to add multiple keys, the important metric is the total size of <em>all</em> keys and values in the whole store. Individual keys and values within the same command are unimportant in this context</li>
<li>When discussing the lengths of keys and values, we always refer to the <em>hex</em> values <em>after</em> conversion from their original format</li>
<li>The amount of data in your request must be smaller than the value of <code>rpc_server_max_request_body_size</code>, a parameter located in <code>~/.chia/mainnet/config/config.yaml</code>. If you modify this setting, you must restart Chia in order for the change to take effect</li>
</ul>
<p>Keeping all of this in mind, <strong>it is typically safe to insert data sets of up to 50 MiB</strong> (no guarantees, though). We expect to support larger sizes in future versions. For now, however, we have only done minimal testing on larger data sets. For example, using <code>curl</code> to add keys and values to an empty tree required the following lengths of time:</p>
<ul>
<li>100 MiB -- 2 to 4 seconds</li>
<li>1 GiB -- 45 to 60 seconds</li>
<li>2 GiB -- failed to insert</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="using-datalayer">Using DataLayer<a href="#using-datalayer" class="hash-link" aria-label="Direct link to Using DataLayer" title="Direct link to Using DataLayer">​</a></h2>
<p>Chia DataLayer doesn&#x27;t have a GUI. The commands in this tutorial will use the command line interface (CLI). As a reminder, here is the complete reference for the CLI, as well as all available Remote Procedure Calls (RPCs):</p>
<ul>
<li><a title="DataLayer RPC API" href="/reference-client/rpc-reference/datalayer-rpc/">DataLayer RPC API</a></li>
<li><a title="DataLayer CLI Reference" href="/reference-client/cli-reference/datalayer-cli/">DataLayer CLI Reference</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-data-store">Create a data store<a href="#create-a-data-store" class="hash-link" aria-label="Direct link to Create a data store" title="Direct link to Create a data store">​</a></h3>
<p>This requires an on-chain transaction.</p>
<p>The command to create a new store is:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia data create_data_store -m &lt;fee&gt;</span><br></span></code></pre></div></div>
<p>Note that <code>&lt;fee&gt;</code> is a standard transaction fee to use Chia&#x27;s network. This fee is in XCH.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>create_data_store example</summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia data create_data_store -m 0.00001</span><br></span></code></pre></div></div><p>Response:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">{</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;id&#x27;: &#x27;1a119374fc7d7055d3419fdcd7f93065f28a1e4acacdf9c73b933b27b685550f&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;success&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;txs&#x27;:</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    [</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;additions&#x27;:</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            [</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;amount&#x27;: 1,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;parent_coin_info&#x27;: &#x27;0xb4a1a658aaefd10930ecbccd51ac2c9a4853435b14acdb0de84729bfbefc791c&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;puzzle_hash&#x27;: &#x27;0xeff07522495060c066f66f32acc2a77e3a3e737aca8baea4d1a64ea4cdc13da9&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;amount&#x27;: 14999989999999,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;parent_coin_info&#x27;: &#x27;0xb4a1a658aaefd10930ecbccd51ac2c9a4853435b14acdb0de84729bfbefc791c&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;puzzle_hash&#x27;: &#x27;0x478255c372cec71557c20459f4b690fb1b7c57da3fcfc4b6396d78d9a396e384&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;amount&#x27;: 1,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;parent_coin_info&#x27;: &#x27;0x1a119374fc7d7055d3419fdcd7f93065f28a1e4acacdf9c73b933b27b685550f&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;puzzle_hash&#x27;: &#x27;0xd650e81d45c7381183c14c3363a81aa78cb3acfe213e46da26df75cd431557f9&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;amount&#x27;: 1,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;confirmed&#x27;: False,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;confirmed_at_height&#x27;: 0,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;created_at_time&#x27;: 1661141324,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;fee_amount&#x27;: 10000000,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;memos&#x27;: [],</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;name&#x27;: &#x27;0xaee362ae9d0ce3992b3bfb7cc48bde17f3d794cc383ff1d5e49a4d75dbf004d6&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;removals&#x27;:</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            [</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;amount&#x27;: 15000000000000,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;parent_coin_info&#x27;: &#x27;0x81fc1729bad3f19699461b1ee455a92493ef4c1d60ba37d22ac187a18367e08e&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;puzzle_hash&#x27;: &#x27;0x221c0e9cd9b7f536e9a204ef93519e6c9d4b4c9a049bde8d66fa1816c23120d2&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;amount&#x27;: 1,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;parent_coin_info&#x27;: &#x27;0xb4a1a658aaefd10930ecbccd51ac2c9a4853435b14acdb0de84729bfbefc791c&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;puzzle_hash&#x27;: &#x27;0xeff07522495060c066f66f32acc2a77e3a3e737aca8baea4d1a64ea4cdc13da9&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;sent&#x27;: 10,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;sent_to&#x27;: [],</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;spend_bundle&#x27;: {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                &#x27;aggregated_signature&#x27;: &#x27;0x8c431f07698ad69fd14ab04d77683801e6b908e441074f5ef5268350483d194a09a8b3cde681cb5c5fcf6444e0c9d4bf00999e8e6ad1522891baa590f82d92e2876b08e34b1f3156d0fe88ce206e5ed1567863e10a0397fd0a8a66bcbd5007b0&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                &#x27;coin_spends&#x27;:</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                [</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                        &#x27;coin&#x27;:</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                            &#x27;amount&#x27;: 15000000000000,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                            &#x27;parent_coin_info&#x27;: &#x27;0x81fc1729bad3f19699461b1ee455a92493ef4c1d60ba37d22ac187a18367e08e&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                            &#x27;puzzle_hash&#x27;: &#x27;0x221c0e9cd9b7f536e9a204ef93519e6c9d4b4c9a049bde8d66fa1816c23120d2&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                        },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                        &#x27;puzzle_reveal&#x27;: &#x27;0xff02ffff01ff02ffff01ff02ffff03ff0bffff01ff02ffff03ffff09ff05ffff1dff0bffff1effff0bff0bffff02ff06ffff04ff02ffff04ff17ff8080808080808080ffff01ff02ff17ff2f80ffff01ff088080ff0180ffff01ff04ffff04ff04ffff04ff05ffff04ffff02ff06ffff04ff02ffff04ff17ff80808080ff80808080ffff02ff17ff2f808080ff0180ffff04ffff01ff32ff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff06ffff04ff02ffff04ff09ff80808080ffff02ff06ffff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080ffff04ffff01b0b3deeeb00319624e26767c5cf777cf9a02d046510181ed29f233e2847fa8ef28ede05d2770bb1b8f101ea8ae20527d61ff018080&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                        &#x27;solution&#x27;: &#x27;0xff80ffff01ffff33ffa0eff07522495060c066f66f32acc2a77e3a3e737aca8baea4d1a64ea4cdc13da9ff0180ffff33ffa0478255c372cec71557c20459f4b690fb1b7c57da3fcfc4b6396d78d9a396e384ff860da47513597f80ffff34ff840098968080ffff3cffa084f72a9a3ce5152e1d627a259a0c1c90e6af389cb26af48173d84e374ecc518080ffff3dffa03a0ed375dff192685d1ef9a74424788b04655700bee898f0ea8445f8b55d38338080ff8080&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                        &#x27;coin&#x27;:</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                        {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                            &#x27;amount&#x27;: 1,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                            &#x27;parent_coin_info&#x27;: &#x27;0xb4a1a658aaefd10930ecbccd51ac2c9a4853435b14acdb0de84729bfbefc791c&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                            &#x27;puzzle_hash&#x27;: &#x27;0xeff07522495060c066f66f32acc2a77e3a3e737aca8baea4d1a64ea4cdc13da9&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                        },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                        &#x27;puzzle_reveal&#x27;: &#x27;0xff02ffff01ff04ffff04ff04ffff04ff05ffff04ff0bff80808080ffff04ffff04ff0affff04ffff02ff0effff04ff02ffff04ffff04ff05ffff04ff0bffff04ff17ff80808080ff80808080ff808080ff808080ffff04ffff01ff33ff3cff02ffff03ffff07ff0580ffff01ff0bffff0102ffff02ff0effff04ff02ffff04ff09ff80808080ffff02ff0effff04ff02ffff04ff0dff8080808080ffff01ff0bffff0101ff058080ff0180ff018080&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                        &#x27;solution&#x27;: &#x27;0xffa0d650e81d45c7381183c14c3363a81aa78cb3acfe213e46da26df75cd431557f9ff01ffffa00000000000000000000000000000000000000000000000000000000000000000ffa0adcbcbaf4594e8d3057ea3a64a40560720ede80e720f867d2631069c27459de58080&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                ]</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;to_puzzle_hash&#x27;: &#x27;0x0202020202020202020202020202020202020202020202020202020202020202&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;trade_id&#x27;: None,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;type&#x27;: 0,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;wallet_id&#x27;: 0</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;additions&#x27;:</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            [</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;amount&#x27;: 1,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;parent_coin_info&#x27;: &#x27;0xb4a1a658aaefd10930ecbccd51ac2c9a4853435b14acdb0de84729bfbefc791c&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;puzzle_hash&#x27;: &#x27;0xeff07522495060c066f66f32acc2a77e3a3e737aca8baea4d1a64ea4cdc13da9&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;amount&#x27;: 14999989999999,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;parent_coin_info&#x27;: &#x27;0xb4a1a658aaefd10930ecbccd51ac2c9a4853435b14acdb0de84729bfbefc791c&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;puzzle_hash&#x27;: &#x27;0x478255c372cec71557c20459f4b690fb1b7c57da3fcfc4b6396d78d9a396e384&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;amount&#x27;: 1,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;confirmed&#x27;: False,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;confirmed_at_height&#x27;: 0,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;created_at_time&#x27;: 1661141324,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;fee_amount&#x27;: 10000000,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;memos&#x27;: [],</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;name&#x27;: &#x27;0xbb4cb461126d9ea9492e767462b9a4e408e497231c2093474cba2bcfe4397104&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;removals&#x27;:</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            [</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;amount&#x27;: 15000000000000,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;parent_coin_info&#x27;:</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;0x81fc1729bad3f19699461b1ee455a92493ef4c1d60ba37d22ac187a18367e08e&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                    &#x27;puzzle_hash&#x27;: &#x27;0x221c0e9cd9b7f536e9a204ef93519e6c9d4b4c9a049bde8d66fa1816c23120d2&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;sent&#x27;: 0,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;sent_to&#x27;: [],</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;spend_bundle&#x27;: None,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;to_puzzle_hash&#x27;: &#x27;0xeff07522495060c066f66f32acc2a77e3a3e737aca8baea4d1a64ea4cdc13da9&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;trade_id&#x27;: None,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;type&#x27;: 1,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;wallet_id&#x27;: 1</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">}</span><br></span></code></pre></div></div></div></div></details>
<p>The only value you need from the JSON blob is <code>id</code>, the first value in the output. In the above example, this was</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">&#x27;id&#x27;: &#x27;1a119374fc7d7055d3419fdcd7f93065f28a1e4acacdf9c73b933b27b685550f&#x27;,</span><br></span></code></pre></div></div>
<p>You can&#x27;t do anything with this store until it is confirmed on-chain. To check the status of this confirmation, run the <code>get_root</code> command, passing in the <code>id</code>.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>get_root example 1</summary><div><div class="collapsibleContent_i85q"><p>Your data store will be empty when you first create it. In this case, <code>get_root</code> will return an empty hash:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia data get_root --id 1a119374fc7d7055d3419fdcd7f93065f28a1e4acacdf9c73b933b27b685550f</span><br></span></code></pre></div></div><p>Response:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">{</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;confirmed&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;hash&#x27;: &#x27;0x0000000000000000000000000000000000000000000000000000000000000000&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;success&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;timestamp&#x27;: 1661148563</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">}</span><br></span></code></pre></div></div></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>get_root example 2</summary><div><div class="collapsibleContent_i85q"><p>After you have added at least one key, <code>get_root</code> will return a real hash:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia data get_root --id 1a119374fc7d7055d3419fdcd7f93065f28a1e4acacdf9c73b933b27b685550f</span><br></span></code></pre></div></div><p>Response:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">{</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;confirmed&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;hash&#x27;: &#x27;0xd6d6b4d6bbd77aaa5927c8a21a1451b35f4860a7f9a58e51dae04037da9c08e8&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;success&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;timestamp&#x27;: 1661148611</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">}</span><br></span></code></pre></div></div></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="add-and-delete-keys">Add and Delete Keys<a href="#add-and-delete-keys" class="hash-link" aria-label="Direct link to Add and Delete Keys" title="Direct link to Add and Delete Keys">​</a></h3>
<p>This requires an on-chain transaction.</p>
<p>Use <code>update_data_store</code> to modify your singleton. Actions include <code>insert</code> and <code>delete</code>. These can also be chained together.</p>
<p>For more example of using this command, see the <a href="/reference-client/cli-reference/datalayer-cli/#update_data_store">CLI reference</a>.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>update_data_store -- insert example</summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia data update_data_store --id=1a119374fc7d7055d3419fdcd7f93065f28a1e4acacdf9c73b933b27b685550f -d &#x27;[{&quot;action&quot;:&quot;insert&quot;, &quot;key&quot;:&quot;0003&quot;, &quot;value&quot;:&quot;abc123&quot;}]&#x27;</span><br></span></code></pre></div></div><p>Response:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">{</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;success&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;tx_id&#x27;: &#x27;0xed157b50b94a849d3d19a0ef4e1b0e07bda863e4d65bd1527fa6f59062bb5c78&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">}</span><br></span></code></pre></div></div></div></div></details>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>update_data_store -- delete example</summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia data update_data_store --id 1a119374fc7d7055d3419fdcd7f93065f28a1e4acacdf9c73b933b27b685550f --changelist &#x27;[{&quot;action&quot;:&quot;delete&quot;, &quot;key&quot;:&quot;0003&quot;}]&#x27;</span><br></span></code></pre></div></div><p>Response:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">{</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;success&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;tx_id&#x27;: &#x27;0x2a64ef42baf05c6f4d446ba8638c2f2b2c26e5a91ad62e0c5151df40d0f92ec2&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">}</span><br></span></code></pre></div></div></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="view-keys-and-values">View Keys and Values<a href="#view-keys-and-values" class="hash-link" aria-label="Direct link to View Keys and Values" title="Direct link to View Keys and Values">​</a></h3>
<p>You can view the keys and values with <code>get_keys_values</code>. This command will only return data that has been confirmed on-chain -- if you run it immediately after adding data, it may not return the keys you expect.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>get_keys_values example</summary><div><div class="collapsibleContent_i85q"><p>For this example, there are two keys in the store:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia data get_keys_values --id 1a119374fc7d7055d3419fdcd7f93065f28a1e4acacdf9c73b933b27b685550f</span><br></span></code></pre></div></div><p>Response:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">{</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;keys_values&#x27;: [</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;atom&#x27;: None,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;hash&#x27;: &#x27;0x7e193b814080e50aa7780bcf71fd0422a0397ad3e57dc1eac71d93183efb39ba&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;key&#x27;: &#x27;0x0004&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;value&#x27;: &#x27;0x123abc&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;atom&#x27;: None,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;hash&#x27;: &#x27;0xc2dc94c2a85d7db4cfdd1d907bcc441c8fce595db2e2075b973fb8171e2f19a2&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;key&#x27;: &#x27;0x0005&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;value&#x27;: &#x27;0xbeadfeed&#x27;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;success&#x27;: True</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">}</span><br></span></code></pre></div></div></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="view-on-chain-history">View on-chain history<a href="#view-on-chain-history" class="hash-link" aria-label="Direct link to View on-chain history" title="Direct link to View on-chain history">​</a></h3>
<p>Use <code>get_root_history</code> to view the on-chain history of the root hash.</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>get_root_history example</summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia data get_root_history --id 1a119374fc7d7055d3419fdcd7f93065f28a1e4acacdf9c73b933b27b685550f</span><br></span></code></pre></div></div><p>Response:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">{</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;root_history&#x27;: [</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;confirmed&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;root_hash&#x27;: &#x27;0x0000000000000000000000000000000000000000000000000000000000000000&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;timestamp&#x27;: 1661141342</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;confirmed&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;root_hash&#x27;: &#x27;0xe488fa1bf0f712b224df0daf312b3d479f80e3a330d4bebd8f26a0d52dc0ebbb&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;timestamp&#x27;: 1661144917</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;confirmed&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;root_hash&#x27;: &#x27;0x0000000000000000000000000000000000000000000000000000000000000000&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;timestamp&#x27;: 1661145223</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;confirmed&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;root_hash&#x27;: &#x27;0xb5420e65846ded936d1e4855c066247fc461a3b281cd9e0e69f3cfa4df529ba2&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;timestamp&#x27;: 1661145404</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;confirmed&#x27;: True,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;root_hash&#x27;: &#x27;0xd6d6b4d6bbd77aaa5927c8a21a1451b35f4860a7f9a58e51dae04037da9c08e8&#x27;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">            &#x27;timestamp&#x27;: 1661148611</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &#x27;success&#x27;: True</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">}</span><br></span></code></pre></div></div></div></div></details>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-mirror-to-advertise-a-data-store">Create A Mirror to Advertise A Data Store<a href="#create-a-mirror-to-advertise-a-data-store" class="hash-link" aria-label="Direct link to Create A Mirror to Advertise A Data Store" title="Direct link to Create A Mirror to Advertise A Data Store">​</a></h3>
<p>This requires an on-chain transaction.</p>
<p>We include an HTTP server that can be used out of the box. By default it listens to port 8575.</p>
<p>To &quot;advertise&quot; your mirror on-chain you use the <code>add_mirror</code> command. This command takes three arguments:</p>
<ul>
<li><code>i</code> -- Your root&#x27;s ID</li>
<li><code>u</code> -- The URL of your mirror. You can reuse this argument, as shown in the example below</li>
<li><code>a</code> -- The amount (in mojos) that will be locked into the mirror while it exists. In theory, a system could prioritize mirrors according to how much was spent to create them. The <code>amount</code> will be returned to the creator when the mirror is deleted. Minimum <code>amount</code> is 0</li>
</ul>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>add_mirror example</summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia data add_mirror -i 67b5e98abd5fef1a1c44ee63077bc5ef75c6cc4dadc9fd52d63a343922ce496b -u http://www.example2.com:8575 -u http://10.1.1.32:8575/ -a 1000</span><br></span></code></pre></div></div><p>Response:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token boolean" style="color:#B35C00;font-weight:normal">None</span><br></span></code></pre></div></div></div></div></details>
<p>The HTTP server will serve files that are generated by default in the <code>~/.chia/mainnet/data_layer/db/server_files_location_mainnet</code> directory.</p>
<p>Note that you can mirror any Data Store, not just your own.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="subscribe-to-a-data-store">Subscribe to a Data Store<a href="#subscribe-to-a-data-store" class="hash-link" aria-label="Direct link to Subscribe to a Data Store" title="Direct link to Subscribe to a Data Store">​</a></h3>
<p>You can subscribe to a data store in order to watch for changes and download the data from published mirrors by using the <code>subscribe</code> command:</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary>subscribe example</summary><div><div class="collapsibleContent_i85q"><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia data subscribe -store 8f6ed792bbbf5216f8e55064793f74ce01286b9c1d542cc4a357cf7f8712df1d</span><br></span></code></pre></div></div><p>Response:</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token boolean" style="color:#B35C00;font-weight:normal">None</span><br></span></code></pre></div></div><p>Use the <code>subscriptions</code> RPC to list all current subscriptions:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">chia rpc data_layer subscriptions</span><br></span></code></pre></div></div><p>Response:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#383a42;--prism-background-color:#fafafa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#383a42;background-color:#fafafa;font-weight:bold"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">{</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &quot;store_ids&quot;: [</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        &quot;1a119374fc7d7055d3419fdcd7f93065f28a1e4acacdf9c73b933b27b685550f&quot;,</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">        &quot;8f6ed792bbbf5216f8e55064793f74ce01286b9c1d542cc4a357cf7f8712df1d&quot;</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    ],</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">    &quot;success&quot;: true</span><br></span><span class="token-line" style="color:#383a42;font-weight:bold"><span class="token plain">}</span><br></span></code></pre></div></div></div></div></details>
<p>Once subscribed, you will automatically try to download updates from any published mirrors for that singleton. You can use the earlier mentioned commands <code>get_root_history</code> and <code>get_keys_values</code> to look at the history and data of any subscribed data stores. The HTTP server will automatically start to publish data for all subscribed data stores. However, it won&#x27;t be advertised on-chain unless you specifically use <code>add_mirror</code>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Chia-Network/chia-docs/blob/main/docs/guides/datalayer/datalayer-user-guide.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/guides/datalayer-developer-guide/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">DataLayer™</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/guides/datalayer-permissions/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DataLayer Permissions</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#about-datalayer" class="table-of-contents__link toc-highlight">About DataLayer</a></li><li><a href="#datalayer-guide" class="table-of-contents__link toc-highlight">DataLayer Guide</a><ul><li><a href="#install-and-run-chia" class="table-of-contents__link toc-highlight">Install and Run Chia</a></li><li><a href="#configure-chia-to-run-datalayer" class="table-of-contents__link toc-highlight">Configure Chia to run DataLayer</a></li></ul></li><li><a href="#note-on-maximum-key-and-value-lengths" class="table-of-contents__link toc-highlight">Note on Maximum Key and Value Lengths</a></li><li><a href="#using-datalayer" class="table-of-contents__link toc-highlight">Using DataLayer</a><ul><li><a href="#create-a-data-store" class="table-of-contents__link toc-highlight">Create a data store</a></li><li><a href="#add-and-delete-keys" class="table-of-contents__link toc-highlight">Add and Delete Keys</a></li><li><a href="#view-keys-and-values" class="table-of-contents__link toc-highlight">View Keys and Values</a></li><li><a href="#view-on-chain-history" class="table-of-contents__link toc-highlight">View on-chain history</a></li><li><a href="#create-a-mirror-to-advertise-a-data-store" class="table-of-contents__link toc-highlight">Create A Mirror to Advertise A Data Store</a></li><li><a href="#subscribe-to-a-data-store" class="table-of-contents__link toc-highlight">Subscribe to a Data Store</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Approach</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chia.net/approach" target="_blank" rel="noopener noreferrer" class="footer__link-item">White Paper</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Technology</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chia.net/greenpaper" target="_blank" rel="noopener noreferrer" class="footer__link-item">Green Paper</a></li><li class="footer__item"><a href="https://docs.chia.net/consensus-intro" target="_blank" rel="noopener noreferrer" class="footer__link-item">Consensus 1.1</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Developers</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chialisp.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chialisp</a></li><li class="footer__item"><a href="https://docs.chia.net/academy-home/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chia Academy</a></li><li class="footer__item"><a href="https://docs.chia.net/guides/crash-course/introduction" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Guides</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://chia.net/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About</a></li><li class="footer__item"><a href="https://chia.net/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://chia.net/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2025 Chia Network Inc., Licensed under the <a href="https://github.com/Chia-Network/chia-docs/blob/main/LICENSE" target="_blank">Apache License, Version 2.0</a> | <a href="https://chia.net/terms">Terms</a></div></div></div></footer></div>
</body>
</html>
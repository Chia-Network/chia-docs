"use strict";(self.webpackChunkchia_docs=self.webpackChunkchia_docs||[]).push([[6463],{8377:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>c,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>r});const o=JSON.parse('{"id":"chia-blockchain/architecture/light-clients","title":"Light Clients","description":"Light client support is another benefit of Proof of Space and Time (PoST) when compared with Proof of Stake (PoS). In PoST, all proofs can be verified objectively and cryptographically, while maintaining the requirement to control an actual resource at a certain point in time. With Chia\'s consensus, a candidate chain can be compared to an alternate chain objectively for weight, even after being offline for a long time, without relying on a central authority.","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/chia-blockchain/architecture/light-clients.md","sourceDirName":"chia-blockchain/architecture","slug":"/chia-blockchain/architecture/light-clients","permalink":"/zh-Hans/chia-blockchain/architecture/light-clients","draft":false,"unlisted":false,"editUrl":"https://github.com/Chia-Network/chia-docs/blob/main/docs/chia-blockchain/architecture/light-clients.md","tags":[],"version":"current","frontMatter":{"title":"Light Clients","slug":"/chia-blockchain/architecture/light-clients"},"sidebar":"tutorialSidebar","previous":{"title":"Wallets","permalink":"/zh-Hans/chia-blockchain/architecture/wallets"},"next":{"title":"Mempool","permalink":"/zh-Hans/chia-blockchain/architecture/mempool"}}');var i=n(4848),a=n(8453);const l={title:"Light Clients",slug:"/chia-blockchain/architecture/light-clients"},c=void 0,s={},r=[{value:"Obtaining Transactions",id:"obtaining-transactions",level:2}];function h(e){const t={a:"a",h2:"h2",p:"p",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"Light client support is another benefit of Proof of Space and Time (PoST) when compared with Proof of Stake (PoS). In PoST, all proofs can be verified objectively and cryptographically, while maintaining the requirement to control an actual resource at a certain point in time. With Chia's consensus, a candidate chain can be compared to an alternate chain objectively for weight, even after being offline for a long time, without relying on a central authority."}),"\n",(0,i.jsx)(t.p,{children:"For light clients that want to sync up quickly to the chain (for example, mobile wallets), a full node can create a small-sized proof that can convince the light client that the weight of a chain is close to some value. This is called a proof of weight."}),"\n",(0,i.jsx)(t.p,{children:"Naively, the light client could download every single block and all the required proofs and verify them. But, with a large number of blocks, this would require a lot of bandwidth and CPU."}),"\n",(0,i.jsxs)(t.p,{children:["A more efficient method relies on a protocol similar to ",(0,i.jsx)(t.a,{href:"https://eprint.iacr.org/2019/226.pdf",children:"Flyclient"}),". The node (Prover) sends all the sub-epoch summaries from the fork point, including difficulty resets, to the light client."]}),"\n",(0,i.jsx)(t.p,{children:"There is only one sub-epoch every 384 blocks, so the summaries will only reach a few MB of data."}),"\n",(0,i.jsx)(t.p,{children:"The node also deterministically samples several sub-epochs based on the challenge of the last block. Sub-epochs have a chance to be chosen proportional to the difficulty during that sub-epoch. For the chosen sub-epoch, the light client downloads one of the challenge chain blocks (which are approximately 1/32 of all blocks), and computes the average infusion iterations of all challenge blocks in that sub-epoch. Based on this time, the light client can extrapolate how many blocks the reward chain contains."}),"\n",(0,i.jsx)(t.p,{children:"For example, if the challenge blocks all occur with very small iterations (close to the beginning of the sub-slot), there are likely many blocks in that sub-slot. Conversely, if the iterations are close to the middle of the sub-slot, there is likely only one block per sub-slot. This allows the light client to only download 1/32 of the blocks in each sub-slot, but still get a good estimate of the total weight."}),"\n",(0,i.jsx)(t.p,{children:"Furthermore, the last few sub-epochs should be downloaded in full for the light client.\nThis adds a small amount of data, but prevents attackers from creating small forks at the end of the chain."}),"\n",(0,i.jsx)(t.p,{children:"The main difference between this protocol and Flyclient is that blocks are not committed to using a Merkle mountain range, but instead the light client downloads the entire list of sub-epoch hashes from genesis, guaranteeing that the queried sub-epochs are included in the chain. Another difference is that entire sections are downloaded, as opposed to individual blocks."}),"\n",(0,i.jsx)(t.p,{children:"As of December 2021, more analysis needs to be done on how many sub-epochs should be downloaded and what the bounds are for what the proof of weight implies."}),"\n",(0,i.jsx)(t.h2,{id:"obtaining-transactions",children:"Obtaining Transactions"}),"\n",(0,i.jsx)(t.p,{children:"Light clients can fetch the transactions that they are interested in, without having to download every single block or block header. Two wallet protocols are available for this, a less efficient one that maintains better privacy, and a super efficient one that has a privacy tradeoff, namely that the wallet must ask a node for payments made to certain addresses. Both of these protocols are currently supported in the Wallet API."})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>l,x:()=>c});var o=n(6540);const i={},a=o.createContext(i);function l(e){const t=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);
"use strict";(self.webpackChunkchia_docs=self.webpackChunkchia_docs||[]).push([[3386],{7221:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>i});const s=JSON.parse('{"id":"guides/tutorials/offers-cli","title":"Offers - CLI","description":"This tutorial covers Chia offers using the command line interface.","source":"@site/i18n/zh-Hans/docusaurus-plugin-content-docs/current/guides/tutorials/offers-cli.md","sourceDirName":"guides/tutorials","slug":"/guides/offers-cli-tutorial","permalink":"/zh-Hans/guides/offers-cli-tutorial","draft":false,"unlisted":false,"editUrl":"https://github.com/Chia-Network/chia-docs/blob/main/docs/guides/tutorials/offers-cli.md","tags":[],"version":"current","frontMatter":{"slug":"/guides/offers-cli-tutorial","title":"Offers - CLI"},"sidebar":"guides","previous":{"title":"Offers - GUI","permalink":"/zh-Hans/guides/offers-gui-tutorial"},"next":{"title":"DAOs","permalink":"/zh-Hans/guides/daos-developer-guide"}}');var l=a(4848),t=a(8453);const c={slug:"/guides/offers-cli-tutorial",title:"Offers - CLI"},r="Offers tutorial (CLI)",o={},i=[{value:"Note about Windows",id:"note-about-windows",level:2},{value:"CLI commands and reference",id:"cli-commands-and-reference",level:2},{value:"Create a single-token offer",id:"create-a-single-token-offer",level:2},{value:"Accept a single-token offer",id:"accept-a-single-token-offer",level:2},{value:"Cancel an offer",id:"cancel-an-offer",level:2},{value:"Create a multiple-token offer",id:"create-a-multiple-token-offer",level:2},{value:"Accept a multiple-token offer",id:"accept-a-multiple-token-offer",level:2},{value:"Create an expiring Offer (RPC)",id:"create-an-expiring-offer-rpc",level:2},{value:"Potential issues",id:"potential-issues",level:2},{value:"Contents:",id:"contents",level:2},{value:"Maker doesn&#39;t have enough money",id:"maker-doesnt-have-enough-money",level:3},{value:"Taker doesn&#39;t have enough money",id:"taker-doesnt-have-enough-money",level:3},{value:"Taker accepts an unknown CAT offer",id:"taker-accepts-an-unknown-cat-offer",level:3},{value:"Taker attempts to accept an invalid offer",id:"taker-attempts-to-accept-an-invalid-offer",level:3},{value:"Maker cancels an offer locally, Taker accepts the offer",id:"maker-cancels-an-offer-locally-taker-accepts-the-offer",level:3},{value:"Whole coins must be reserved",id:"whole-coins-must-be-reserved",level:3},{value:"Offer involving a CAT1 is invalid",id:"offer-involving-a-cat1-is-invalid",level:3},{value:"Further reading",id:"further-reading",level:2}];function d(e){const n={a:"a",admonition:"admonition",annotation:"annotation",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",math:"math",mi:"mi",mn:"mn",mrow:"mrow",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"offers-tutorial-cli",children:"Offers tutorial (CLI)"})}),"\n",(0,l.jsx)(n.p,{children:"This tutorial covers Chia offers using the command line interface."}),"\n",(0,l.jsxs)(n.p,{children:["See also our ",(0,l.jsx)(n.a,{href:"/reference-client/getting-started/wallet-guide",children:"GUI tutorial"})," and our ",(0,l.jsx)(n.a,{href:"https://chialisp.com/offers",children:"reference document"}),"."]}),"\n",(0,l.jsx)(n.admonition,{type:"note",children:(0,l.jsx)(n.p,{children:'This tutorial occasionally references a token called "CAT King Cole" (CKC). This token is for demonstration purposes only.'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"note-about-windows",children:"Note about Windows"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Important"})," -- If you are running on Windows, many of the commands from this tutorial will result in an exception that is outside of Chia's control. You can safely ignore it."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'Exception ignored in: <function _ProactorBasePipeTransport.__del__ at 0x000001EACD142CA0>\nTraceback (most recent call last):\n  File "C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\proactor_events.py", line 116, in __del__\n    self.close()\n  File "C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\proactor_events.py", line 108, in close\n    self._loop.call_soon(self._call_connection_lost, None)\n  File "C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\base_events.py", line 719, in call_soon\n    self._check_closed()\n  File "C:\\Users\\User\\AppData\\Local\\Programs\\Python\\Python38\\lib\\asyncio\\base_events.py", line 508, in _check_closed\n    raise RuntimeError(\'Event loop is closed\')\nRuntimeError: Event loop is closed\n'})}),"\n",(0,l.jsxs)(n.p,{children:["For more info, see ",(0,l.jsx)(n.a,{href:"https://github.com/aio-libs/aiohttp/issues/4324",children:"this issue on GitHub"}),"."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"cli-commands-and-reference",children:"CLI commands and reference"}),"\n",(0,l.jsx)(n.p,{children:"Chia's command line interface provides a set of commands to make, take, cancel, and list offers. To use offers on the command line, make sure you are using a virtual environment."}),"\n",(0,l.jsx)(n.p,{children:"For more info, see our comprehensive Offers references:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"/reference-client/cli-reference/offer-cli",children:"CLI"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"/reference-client/rpc-reference/offer-rpc",children:"RPC"})}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"create-a-single-token-offer",children:"Create a single-token offer"}),"\n",(0,l.jsx)(n.p,{children:"In this example, we'll offer 0.1 XCH in exchange for 10 USDS."}),"\n",(0,l.jsx)(n.p,{children:"A few assumptions:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["There is only one wallet fingerprint installed locally. (If you have more than one fingerprint, use the ",(0,l.jsx)(n.code,{children:"-f"})," flag to specify which one to use.)"]}),"\n",(0,l.jsx)(n.li,{children:"Wallet ID 1 is a standard Chia wallet."}),"\n",(0,l.jsx)(n.li,{children:"Wallet ID 2 is a Stably USD wallet."}),"\n",(0,l.jsxs)(n.li,{children:["We won't add a fee to the offer (if you want to add a fee, use the ",(0,l.jsx)(n.code,{children:"-m"})," flag)."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Three flags are required to create the offer file:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-o"}),": The Wallet ID and amount being offered."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-r"}),": The Wallet ID and amount being requested."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"-p"}),": The name of the offer file to be created."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"Here's the full command and result:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet make_offer -o 1:0.1 -r 2:10 -p ~/offers/0.1_xch_for_10_usds.offer\nCreating Offer\n--------------\n\nOFFERING:\n  - 0.1 XCH (100000000000 mojos)\nREQUESTING:\n  - 10 Stably USD (10000 mojos)\nConfirm (y/n): y\nCreated offer with ID 62260d78a563620818a43c2cf837a8fca13a808f20ce62f4e42064f46f4c5a91\nUse chia wallet get_offers --id 62260d78a563620818a43c2cf837a8fca13a808f20ce62f4e42064f46f4c5a91 -f 0123456789 to view status\n"})}),"\n",(0,l.jsxs)(n.p,{children:["After running and confirming this command, the offer file ",(0,l.jsx)(n.code,{children:"~/offers/0.1_xch_for_10_usds.offer"})," will be created."]}),"\n",(0,l.jsxs)(n.p,{children:["To view the status, run ",(0,l.jsx)(n.code,{children:"chia wallet get_offers"}),", specifying your offer's ID and your wallet's fingerprint:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet get_offers --id 62260d78a563620818a43c2cf837a8fca13a808f20ce62f4e42064f46f4c5a91 -f 123456789\n\nRecord with id: 62260d78a563620818a43c2cf837a8fca13a808f20ce62f4e42064f46f4c5a91\n---------------\nCreated at: 2021-12-27 08:05:07\nConfirmed at: 0\nAccepted at: N/A\nStatus: PENDING_ACCEPT\n---------------\n"})}),"\n",(0,l.jsx)(n.p,{children:"Congratulations! You have created an offer. A few things to note:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Your wallet has reserved the coin(s) necessary to complete the offer."}),"\n",(0,l.jsxs)(n.li,{children:["The blockchain has ",(0,l.jsx)(n.em,{children:"not"})," recorded this offer."]}),"\n",(0,l.jsx)(n.li,{children:"You can distribute the offer file wherever you want."}),"\n",(0,l.jsx)(n.li,{children:"Anyone who sees the offer file can attempt to accept it."}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"accept-a-single-token-offer",children:"Accept a single-token offer"}),"\n",(0,l.jsx)(n.p,{children:"This example will use a different computer to accept the offer from the previous example. Keep in mind, offers are accepted on a first-come, first-served basis."}),"\n",(0,l.jsxs)(n.p,{children:["To display your wallet's balance before accepting the offer, run ",(0,l.jsx)(n.code,{children:"chia wallet show"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet show\nWallet height: 1335630\nSync status: Synced\nBalances, fingerprint: 9876543210\nWallet ID 1 type STANDARD_WALLET Chia Wallet\n   -Total Balance: 0.0 xch (0 mojo)\n   -Pending Total Balance: 0.0 xch (0 mojo)\n   -Spendable: 0.0 xch (0 mojo)\nWallet ID 2 type COLOURED_COIN Stably USD (Asset ID: 6d95dae356e32a71db5ddcb42224754a02524c615c5fc35f568c2af04774e589)\n   -Total Balance: 10.0  (10000 mojo)\n   -Pending Total Balance: 10.0  (10000 mojo)\n   -Spendable: 10.0  (10000 mojo)\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.p,{children:["To examine the offer, run ",(0,l.jsx)(n.code,{children:"chia wallet take_offer"})," with the ",(0,l.jsx)(n.code,{children:"-e"})," flag:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet take_offer -e ~/0.1_xch_for_10_usds.offer\nSummary:\n  OFFERED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\n  REQUESTED:\n    - Stably USD (Wallet ID: 2): 10 (10000 mojos)\nFees: 0\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.p,{children:["To accept the offer, remove the ",(0,l.jsx)(n.code,{children:"-e"})," flag:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet take_offer ~/0.1_xch_for_10_usds.offer\nSummary:\n  OFFERED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\n  REQUESTED:\n    - Stably USD (Wallet ID: 2): 10 (10000 mojos)\nFees: 0\nWould you like to take this offer? (y/n): y\nAccepted offer with ID d7b91ac37c41edfcf0009075b14d4665bfd1d1d2f1ee4087455147ca5134004c\nUse chia wallet get_offers --id d7b91ac37c41edfcf0009075b14d4665bfd1d1d2f1ee4087455147ca5134004c -f 9876543210 to view its status\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.p,{children:["The offer has been successfully accepted. To see the offer's status, run the ",(0,l.jsx)(n.code,{children:"chia wallet get_offers"})," command:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet get_offers --id d7b91ac37c41edfcf0009075b14d4665bfd1d1d2f1ee4087455147ca5134004c -f 9876543210\n\nRecord with id: d7b91ac37c41edfcf0009075b14d4665bfd1d1d2f1ee4087455147ca5134004c\n---------------\nCreated at: 2021-12-27 08:41:22\nConfirmed at: 1335560\nAccepted at: 2021-12-27 08:41:22\nStatus: CONFIRMED\n---------------\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"Your wallet will now show your updated balances:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet show\nWallet height: 1335630\nSync status: Synced\nBalances, fingerprint: 9876543210\nWallet ID 1 type STANDARD_WALLET Chia Wallet\n   -Total Balance: 0.100000000000 xch (100000000000 mojo)\n   -Pending Total Balance: 0.100000000000 xch (100000000000 mojo)\n   -Spendable: 0.100000000000 xch (100000000000 mojo)\nWallet ID 2 type COLOURED_COIN Stably USD (Asset ID: 6d95dae356e32a71db5ddcb42224754a02524c615c5fc35f568c2af04774e589)\n   -Total Balance: 0.0  (0 mojo)\n   -Pending Total Balance: 0.0  (0 mojo)\n   -Spendable: 0.0  (0 mojo)\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"cancel-an-offer",children:"Cancel an offer"}),"\n",(0,l.jsx)(n.p,{children:"You can cancel any offer you created, as long as it has not been accepted already."}),"\n",(0,l.jsx)(n.p,{children:"Start by listing all of your current offers:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet get_offers\n\nRecord with id: 47fa10e11c743b03bb1d182a6f915de1e563f40c5e6adf24698cbeb7732baa5f\n---------------\nCreated at: 2021-12-27 09:24:30\nConfirmed at: 0\nAccepted at: N/A\nStatus: PENDING_ACCEPT\n---------------\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"Cancel an offer with a Status of PENDING_ACCEPT:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet cancel_offer -id 47fa10e11c743b03bb1d182a6f915de1e563f40c5e6adf24698cbeb7732baa5f\n\nRecord with id: 47fa10e11c743b03bb1d182a6f915de1e563f40c5e6adf24698cbeb7732baa5f\n---------------\nCreated at: 2021-12-27 09:24:30\nConfirmed at: 0\nAccepted at: N/A\nStatus: PENDING_ACCEPT\nSummary:\n  OFFERED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\n  REQUESTED:\n    - Stably USD (Wallet ID: 2): 10 (10000 mojos)\nPending Balances:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\nFees: 0\n---------------\nAre you sure you wish to cancel offer with ID: 47fa10e11c743b03bb1d182a6f915de1e563f40c5e6adf24698cbeb7732baa5f? (y/n): y\nCancelled offer with ID 47fa10e11c743b03bb1d182a6f915de1e563f40c5e6adf24698cbeb7732baa5f\nUse chia wallet get_offers --id 47fa10e11c743b03bb1d182a6f915de1e563f40c5e6adf24698cbeb7732baa5f -f 123456789 to view cancel status\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.p,{children:["To view the status of the cancellation, run ",(0,l.jsx)(n.code,{children:"chia wallet get_offers"}),", specifying your offer's ID and your wallet's fingerprint:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet get_offers --id 47fa10e11c743b03bb1d182a6f915de1e563f40c5e6adf24698cbeb7732baa5f -f 123456789\n\nRecord with id: 47fa10e11c743b03bb1d182a6f915de1e563f40c5e6adf24698cbeb7732baa5f\n---------------\nCreated at: 2021-12-27 09:24:30\nConfirmed at: 0\nAccepted at: N/A\nStatus: CANCELLED\n---------------\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"Note that this command canceled the offer on the blockchain by spending the coins you had offered, and creating new coins of the same type and value. This process did not involve taking the other end of the offer, so you did not receive any funds of the type you had requested. The end result is that your wallet's balance is the same as it was before you made the offer (minus any transaction fees)."}),"\n",(0,l.jsx)(n.p,{children:"The advantage of canceling in this manner is that it ensures that nobody can accept your offer in the future. The disadvantages are that you will need to wait a few minutes for your transaction to be processed, and that you may have to pay a transaction fee. This is the default option, and the option that you should use if you have copied your offer file to another computer or website."}),"\n",(0,l.jsxs)(n.p,{children:["If you have not sent the offer file elsewhere, you can cancel the offer by running the same command with the ",(0,l.jsx)(n.code,{children:"--insecure"})," flag, which will un-reserve the coins for your offer. However, nothing will be recorded on the blockchain. If you have copied your offer file elsewhere, someone could still accept it. The advantages of this option are that it will cancel your offer instantly, and there's no need to include a fee."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"create-a-multiple-token-offer",children:"Create a multiple-token offer"}),"\n",(0,l.jsxs)(n.p,{children:["To create an offer with multiple tokens, simply add ",(0,l.jsx)(n.code,{children:"-o"})," (offer) and ",(0,l.jsx)(n.code,{children:"-r"})," (request) flags to the ",(0,l.jsx)(n.code,{children:"make_offer"})," command as needed. For example:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet make_offer -o 2:10 -o 3:10000 -r 1:0.1 -r 4:9000 -p ~/offers/10usds_10kckc_for_100bmojos_9ksbx.offer\nCreating Offer\n--------------\n\nOFFERING:\n  - 10 Stably USD (10000 mojos)\n  - 10000 CAT King Cole (10000000 mojos)\nREQUESTING:\n  - 0.1 XCH (100000000000 mojos)\n  - 9000 Spacebucks (9000000 mojos)\nConfirm (y/n): y\nCreated offer with ID 9f624c95b81ed3428f74cbe2e400d0d8cccbfe6169fe8e58422af8a86e0a6388\nUse chia wallet get_offers --id 9f624c95b81ed3428f74cbe2e400d0d8cccbfe6169fe8e58422af8a86e0a6388 -f 123456789 to view status\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.p,{children:["To view the offer with a summary of the tokens being offered, use the ",(0,l.jsx)(n.code,{children:"-s"})," flag:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet get_offers --id 9f624c95b81ed3428f74cbe2e400d0d8cccbfe6169fe8e58422af8a86e0a6388 -f 123456789 -s\n\nRecord with id: 9f624c95b81ed3428f74cbe2e400d0d8cccbfe6169fe8e58422af8a86e0a6388\n---------------\nCreated at: 2021-12-27 10:22:07\nConfirmed at: 0\nAccepted at: N/A\nStatus: PENDING_ACCEPT\nSummary:\n  OFFERED:\n    - Stably USD (Wallet ID: 2): 10 (10000 mojos)\n    - CAT King Cole (Wallet ID: 3): 10000 (10000000 mojos)\n  REQUESTED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\n    - Spacebucks (Wallet ID: 4): 9000 (9000000 mojos)\nPending Balances:\n    - Stably USD (Wallet ID: 2): 10 (10000 mojos)\n    - CAT King Cole (Wallet ID: 3): 10000 (10000000 mojos)\nFees: 0\n---------------\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"accept-a-multiple-token-offer",children:"Accept a multiple-token offer"}),"\n",(0,l.jsx)(n.p,{children:"The process to accept a multiple-token offer is the same as that of a single-token offer:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet take_offer ~/offers/10usds_10kckc_for_100bmojos_9ksbx.offer\nSummary:\n  OFFERED:\n    - Stably USD (Wallet ID: 3): 10 (10000 mojos)\n    - CAT King Cole (Wallet ID: 4): 10000 (10000000 mojos)\n  REQUESTED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\n    - Spacebucks (Wallet ID: 2): 9000 (9000000 mojos)\nFees: 0\nWould you like to take this offer? (y/n): y\nAccepted offer with ID 5eb909c87df9ddf598906d95183141029c947c045aa369beee9ab699f08a9be1\nUse chia wallet get_offers --id 5eb909c87df9ddf598906d95183141029c947c045aa369beee9ab699f08a9be1 -f 9876543210 to view its status\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.p,{children:["The offer has been successfully accepted. To see the offer's status, run the ",(0,l.jsx)(n.code,{children:"chia wallet get_offers"})," command:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet get_offers --id 5eb909c87df9ddf598906d95183141029c947c045aa369beee9ab699f08a9be1 -f 9876543210\n\nRecord with id: 5eb909c87df9ddf598906d95183141029c947c045aa369beee9ab699f08a9be1\n---------------\nCreated at: 2021-12-27 10:35:32\nConfirmed at: 1335930\nAccepted at: 2021-12-27 10:35:32\nStatus: CONFIRMED\n---------------\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"Your wallet will now show your updated balances:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet show\nWallet height: 1335942\nSync status: Synced\nBalances, fingerprint: 9876543210\nWallet ID 1 type STANDARD_WALLET Chia Wallet\n   -Total Balance: 0.0 xch (0 mojo)\n   -Pending Total Balance: 0.0 xch (0 mojo)\n   -Spendable: 0.0 xch (0 mojo)\nWallet ID 2 type COLOURED_COIN Spacebucks (Asset ID: 78ad32a8c9ea70f27d73e9306fc467bab2a6b15b30289791e37ab6e8612212b1)\n   -Total Balance: 0.0  (0 mojo)\n   -Pending Total Balance: 0.0  (0 mojo)\n   -Spendable: 0.0  (0 mojo)\nWallet ID 3 type COLOURED_COIN Stably USD (Asset ID: 6d95dae356e32a71db5ddcb42224754a02524c615c5fc35f568c2af04774e589)\n   -Total Balance: 10.0  (10000 mojo)\n   -Pending Total Balance: 10.0  (10000 mojo)\n   -Spendable: 10.0  (10000 mojo)\nWallet ID 4 type COLOURED_COIN CAT King Cole (Asset ID: 1121996b75cce3c746369aced2c8887b02b84e95592c3dc006d82a145adf349a)\n   -Total Balance: 10000.0  (10000 mojo)\n   -Pending Total Balance: 10000.0  (10000 mojo)\n   -Spendable: 10000.0  (10000 mojo)\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"create-an-expiring-offer-rpc",children:"Create an expiring Offer (RPC)"}),"\n",(0,l.jsxs)(n.p,{children:["In this example, we will offer 0.1 CATs (",(0,l.jsx)(n.code,{children:"Launcher ID: 91aa...004r"}),") in exchange for 1 TXCH (",(0,l.jsx)(n.code,{children:"Wallet ID: 1"}),"). In addition, we will add an expiry timestamp so that this Offer will expire on Jan. 1, 2024: In addition, we will add an expiry timestamp so that this Offer will expire on Jan. 1, 2024. This is accomplished with the ",(0,l.jsx)(n.code,{children:"max_time"})," flag:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'chia rpc wallet create_offer_for_ids \'{"offer":{"1":1000000000000,"91aa49303fd325cf8029cc0ee5e19ac78ec33d641d63b50d0ba859309a73004d":-100},"fee":10000000,"driver_dict":{},"validate_only":false, "max_time": 1704070800}\'\n'})}),"\n",(0,l.jsx)(n.p,{children:"Response:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'{\n    "offer": "offer1qqr83wcuu2rykcmqvpsxvgqqemhmlaekcenaz02ma6hs5w600dhjlvfjn477nkwz369h88kll73h37fefnwk3qqnz8s0lle0xp70k7vrwmdq0sfnsf7jns276kh4lah7ark8fkc5kmjeav0nkkmyms8jvjqcrgd9jd46wvwh568qn8qlklu95fmvv060rwr0h4c8r55hwwal5y32l7mnr09ckf2gqqtv3a67c0rra0fyx8y6tlt8e2qk6t0m6s0hl0hd0n9kflhnm2lah9ryzn49yre20axxr3ue2a7neg06mvh7zte0uk9jmzekjndhl5v330qtd2f00q0zeeadv2tcljxmdhjxtdh68tdh68tdk68tp57nmrdkmm5dw7srzlhqhn8h04883476dz7x6mny6jzdcga33n4s8n884cxcekcemz6mk3jk4v925m8z9f8s877t4tn3kdx07q7h6w8t0r0krkc5m8j2m0xu9v3q6es4x0uy92c2us9xuwp0cgp3h0rpwdkcn37486waykwls2k94hn7zlllxl5lkeytd9wv2yxurz5x56r4h9sxq6mac5ea7e5k66wa2xcj0an6kqq4eyqpvpellpl7dayem3phq8yrrl4lspgr8urleflu9zs6ypnxm0e77awkul4mh05cu4qwekejhwru43ztcv7wj4yan0lur7dvkyp4ualchadvjdeluy6kpqevlehlqtxcld0mp2dqctl4l5u065h2utealkaxme27yv5knkhxxgrc7fd57trg0mq0alcz7yu76yexf3mfear3424luwmt87cjqkuw9jmjn26h7xz96yrlyufp6rxfyhl3w8rv2remjywkvwewme3paxt2v8yxhhmd6fdhnuwhnslq7957ye20uafl79echvvpkt2w86e06d985ravvym8huef3hvlkmk0enw4fu44ad3ltshuwqrjlu5cdphlpw3pdpy6led8dt7qwyl90s4ffl0vewuhdjwj70al622xtlc54m4d6n7nsxmpz647l405p2qpq7ec6x9np3m4n8e0h74ua3328nznycrm7j3uu300e0adn8m4hulnuu27jpduqfyctxs2pcyckg307epnev6xa4f7hkx20mlk4ellnlhlqs4kreh2rzju0w6rs5ma60mlxs6v8thtv9tl3lynp7m7nxr0eg5nuhkfaxclysmrf35dmrzgq4stk5nvem5aajer9n07m0rjv3z4l38trd0lgdthakh2setfl3d8kmuw933khanfem0hk66l97a7htg6a9vdegaxjgvl65d8j5es3tq4jtscqkwrgm789ux074amv0r3lqdwcv8t72et85hddwm7mkas2hh6464rx60yk6llk79v6v06rcx9gmljh7zkr335dq89q9flazmz67dwctlv4n8npld5lw3s8wkhj7v57h67rj0nsvw8tn3hesq24vhahlsda2ldk847g8caa0h95wfmtwt4lvm96edwklv0uf9m78svj4dz6mgaqv82a2fl8hn8u7f484yy9uzpe67jnmfea7d6ytj08da0jkkz96t2fv4fdc9ht06ulzf86g43y0pdj7nw3dlcjfwl37550wn5vda70zavknx4h5xxnfhjpy9slrkwcpvxt7704adwslkh8lfp76at40dd0ny6zg4dgjwlkrcphtgy7lsx3jccq",\n    "success": true,\n    "trade_record": {\n        "accepted_at_time": null,\n        "coins_of_interest": [\n            {\n                "amount": 1000000000,\n                "parent_coin_info": "0x3b5d9e333b75c20829f4acf07b122fbbb02df7bbeb033de5dee67df9ac201e24",\n                "puzzle_hash": "0x7059f91bb16c1f24ee9677e2aa3bf454efc66316e69682db4f00004b707c63be"\n            },\n            {\n                "amount": 97119866323,\n                "parent_coin_info": "0x0894a86fc98304960b258e2e68e5eebdafe9efff903a13037b5c22e3bb5513b2",\n                "puzzle_hash": "0xdfcfc555683e8ae18a579fc9e1b62c37b26c73c7790948a9f0815c557e985920"\n            }\n        ],\n        "confirmed_at_index": 0,\n        "created_at_time": 1695625850,\n        "is_my_offer": true,\n        "pending": {\n            "91aa49303fd325cf8029cc0ee5e19ac78ec33d641d63b50d0ba859309a73004d": 1000000000,\n            "unknown": 97119866323\n        },\n        "sent": 0,\n        "sent_to": [],\n        "status": "PENDING_ACCEPT",\n        "summary": {\n            "fees": 10000000,\n            "infos": {\n                "91aa49303fd325cf8029cc0ee5e19ac78ec33d641d63b50d0ba859309a73004d": {\n                    "tail": "0x91aa49303fd325cf8029cc0ee5e19ac78ec33d641d63b50d0ba859309a73004d",\n                    "type": "CAT"\n                }\n            },\n            "offered": {\n                "91aa49303fd325cf8029cc0ee5e19ac78ec33d641d63b50d0ba859309a73004d": 100\n            },\n            "requested": {\n                "xch": 1000000000000\n            }\n        },\n        "taken_offer": null,\n        "trade_id": "0x0561bd8ab330bdc1c12231c6ddd75c4cda2d6e1ae5188274b228a77ff35efb35",\n        "valid_times": {\n            "max_blocks_after_created": null,\n            "max_height": null,\n            "max_secs_after_created": null,\n            "max_time": 1704070800,\n            "min_blocks_since_created": null,\n            "min_height": null,\n            "min_secs_since_created": null,\n            "min_time": null\n        }\n    }\n}\n'})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"potential-issues",children:"Potential issues"}),"\n",(0,l.jsx)(n.p,{children:"This section will detail a non-comprehensive list of issues you might encounter while making or taking offers."}),"\n",(0,l.jsx)(n.h2,{id:"contents",children:"Contents:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#maker-doesnt-have-enough-money",children:"Maker doesn't have enough money"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#taker-doesnt-have-enough-money",children:"Taker doesn't have enough money"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#taker-accepts-an-unknown-cat-offer",children:"Taker accepts an unknown CAT offer"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#taker-attempts-to-accept-an-invalid-offer",children:"Taker attempts to accept an invalid offer"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#maker-cancels-an-offer-locally-taker-accepts-the-offer",children:"Maker cancels an offer locally, Taker accepts the offer"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#whole-coins-must-be-reserved",children:"Whole coins must be reserved"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"#offer-involving-a-cat1-is-invalid",children:"Offer involving a CAT1 is invalid"})}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"maker-doesnt-have-enough-money",children:"Maker doesn't have enough money"}),"\n",(0,l.jsx)(n.p,{children:"Let's say a Maker has wallets for XCH and CKC, with no money in either of them."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet show\nWallet height: 1344432\nSync status: Synced\nBalances, fingerprint: 1234567890\nWallet ID 1 type STANDARD_WALLET Chia Wallet\n   -Total Balance: 0.0 xch (0 mojo)\n   -Pending Total Balance: 0.0 xch (0 mojo)\n   -Spendable: 0.0 xch (0 mojo)\nWallet ID 2 type COLOURED_COIN CAT King Cole (Asset ID: 1121996b75cce3c746369aced2c8887b02b84e95592c3dc006d82a145adf349a)\n   -Total Balance: 0.0  (0 mojo)\n   -Pending Total Balance: 0.0  (0 mojo)\n   -Spendable: 0.0  (0 mojo)\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"The maker attempts to make an ambitious offer: 100 XCH for 1 million CKC. However, the Maker does not have enough money to create this offer. As a result, an Exception is thrown:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet make_offer -o 2:1000000 -r 1:100 -p ~/offers/100xch_for_1mckc.offer\nCreating Offer\n--------------\n\nOFFERING:\n  - 1000000 CAT King Cole (1000000000 mojos)\nREQUESTING:\n  - 100 XCH (100000000000000 mojos)\nConfirm (y/n): y\nException from 'wallet' {'error': 'Error creating offer: insufficient funds in wallet 2', 'success': False}\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"taker-doesnt-have-enough-money",children:"Taker doesn't have enough money"}),"\n",(0,l.jsx)(n.p,{children:"Let's say the Taker has a brand new wallet:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet show\nWallet height: 1336730\nSync status: Synced\nBalances, fingerprint: 1234567890\nWallet ID 1 type STANDARD_WALLET Chia Wallet\n   -Total Balance: 0.0 xch (0 mojo)\n   -Pending Total Balance: 0.0 xch (0 mojo)\n   -Spendable: 0.0 xch (0 mojo)\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"And there's an outstanding offer requesting 0.1 XCH for 10,000 CKC:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet take_offer -e ~/offers/10kckc_for_0.1xch.offer\nSummary:\n  OFFERED:\n    - CAT King Cole (Wallet ID: None): 10000 (10000000 mojos)\n  REQUESTED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\nFees: 0\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"If the Taker attempts to accept the offer, an Exception will be thrown:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet take_offer ~/offers/10kckc_for_0.1xch.offer\nSummary:\n  OFFERED:\n    - CAT King Cole (Wallet ID: None): 10000 (10000000 mojos)\n  REQUESTED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\nFees: 0\nWould you like to take this offer? (y/n): y\nException from 'wallet' {'error': 'insufficient funds in wallet 1', 'success': False}\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"taker-accepts-an-unknown-cat-offer",children:"Taker accepts an unknown CAT offer"}),"\n",(0,l.jsxs)(n.p,{children:["You should be extra careful before accepting offers for unknown CATs. This is because the offer ",(0,l.jsx)(n.em,{children:"might"})," be a scam where a different -- and worthless -- token is actually being offered."]}),"\n",(0,l.jsx)(n.p,{children:"Here's how the scam would work:"}),"\n",(0,l.jsx)(n.p,{children:"Let's say a potential Taker has 0.1 XCH in their wallet."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet show\nWallet height: 1336860\nSync status: Synced\nBalances, fingerprint: 1234567890\nWallet ID 1 type STANDARD_WALLET Chia Wallet\n   -Total Balance: 0.1 xch (100000000000 mojo)\n   -Pending Total Balance: 0.1 xch (100000000000 mojo)\n   -Spendable: 0.1 xch (100000000000 mojo)\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"There is an offer of 0.25 Shibe (an unknown CAT) in exchange for 0.1 XCH. Here's the offer from the Taker's perspective:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet take_offer -e ~/offers/0.25_Shibe_for_0.1_XCH.offer\nSummary:\n  OFFERED:\n    - a2cadb541cb01c67c3bcddc73ecf33c8ffa37b0d013688904b2747cede020477 (Wallet ID: Unknown): 0.25 (250 mojos)\n  REQUESTED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"The Taker decides to accept the offer and it is confirmed successfully:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet take_offer ~/offers/0.25_Shibe_for_0.1_XCH.offer\nSummary:\n  OFFERED:\n    - a2cadb541cb01c67c3bcddc73ecf33c8ffa37b0d013688904b2747cede020477 (Wallet ID: Unknown): 0.25 (250 mojos)\n  REQUESTED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\nFees: 0\nWould you like to take this offer? (y/n): y\nAccepted offer with ID 4ac6a35e5fecb50d85604b19250a942afdc81876fe11db1f9d970c95dcf2c43f\nUse chia wallet get_offers --id 4ac6a35e5fecb50d85604b19250a942afdc81876fe11db1f9d970c95dcf2c43f -f 1234567890 to view its status\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.p,{children:["Notice that the offer file was named ",(0,l.jsx)(n.code,{children:"0.25_Shibe_for_0.1_XCH.offer"}),", but the file name itself does ",(0,l.jsx)(n.em,{children:"not"})," dictate the contents of the offer. The Taker may have inadvertently accepted an offer for a worthless token!"]}),"\n",(0,l.jsxs)(n.p,{children:["Luckily, it is easy to avoid this scam by cross-referencing the unknown CAT's ID before accepting the offer. In this case, the Taker should verify from a trusted source that ",(0,l.jsx)(n.code,{children:"4ac6a35e5fecb50d85604b19250a942afdc81876fe11db1f9d970c95dcf2c43f"})," indeed corresponds to Shibe."]}),"\n",(0,l.jsx)(n.p,{children:"Chia does install a list of known CATs by default, so this scam should be rare, but you should always be diligent in scrutinizing offers for unknown CATs."}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"taker-attempts-to-accept-an-invalid-offer",children:"Taker attempts to accept an invalid offer"}),"\n",(0,l.jsx)(n.p,{children:"If the Maker has canceled the offer on the blockchain, or a Taker has already taken the offer, it is no longer valid."}),"\n",(0,l.jsx)(n.p,{children:"Any potential Takers will receive an Exception upon attempting to take the offer. For example:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet take_offer ~/offers/0.1_xch_for_10_usds.offer\nSummary:\n  OFFERED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\n  REQUESTED:\n    - Stably USD (Wallet ID: 2): 10 (10000 mojos)\nFees: 0\nWould you like to take this offer? (y/n): y\nException from 'wallet' {'error': 'This offer is no longer valid', 'success': False}\n"})}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"maker-cancels-an-offer-locally-taker-accepts-the-offer",children:"Maker cancels an offer locally, Taker accepts the offer"}),"\n",(0,l.jsx)(n.p,{children:"This example will demonstrate that if you need to cancel an offer, you should always do so on-chain unless you are certain the offer file has not left your computer."}),"\n",(0,l.jsx)(n.p,{children:"Let's say a Maker has 0.1 XCH and 1 USDS:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet show\nWallet height: 1344792\nSync status: Synced\nBalances, fingerprint: 9876543210\nWallet ID 1 type STANDARD_WALLET Chia Wallet\n   -Total Balance: 0.1 xch (100000000000 mojo)\n   -Pending Total Balance: 0.1 xch (100000000000 mojo)\n   -Spendable: 0.1 xch (100000000000 mojo)\nWallet ID 2 type COLOURED_COIN Stably USD (Asset ID: 6d95dae356e32a71db5ddcb42224754a02524c615c5fc35f568c2af04774e589)\n   -Total Balance: 1.0  (1000 mojo)\n   -Pending Total Balance: 1.0  (1000 mojo)\n   -Spendable: 1.0  (1000 mojo)\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"The Maker offers 0.1 XCH in exchange for 10 USDS:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet make_offer -o 1:0.1 -r 2:10 -p ~/offers/0.1xch_for_10usds.offer\nCreating Offer\n--------------\n\nOFFERING:\n  - 0.1 XCH (100000000000 mojos)\nREQUESTING:\n  - 10 Stably USD (10000 mojos)\nConfirm (y/n): y\nCreated offer with ID af98fd1f63a8351829d2d2fd34c2e880021e154b9a3d23f215385c1b72831b69\nUse chia wallet get_offers --id af98fd1f63a8351829d2d2fd34c2e880021e154b9a3d23f215385c1b72831b69 -f 9876543210 to view status\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsxs)(n.p,{children:["The Maker then decides to cancel the offer, but not on-chain (using the ",(0,l.jsx)(n.code,{children:"--insecure"})," flag):"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet cancel_offer -id af98fd1f63a8351829d2d2fd34c2e880021e154b9a3d23f215385c1b72831b69 --insecure\n\nRecord with id: af98fd1f63a8351829d2d2fd34c2e880021e154b9a3d23f215385c1b72831b69\n---------------\nCreated at: 2021-12-29 10:03:10\nConfirmed at: 0\nAccepted at: N/A\nStatus: PENDING_ACCEPT\nSummary:\n  OFFERED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\n  REQUESTED:\n    - Stably USD (Wallet ID: 2): 10 (10000 mojos)\nPending Balances:\n    - XCH (Wallet ID: 1): 0.0 (0 mojos)\n    - Stably USD (Wallet ID: 2): 11 (11000 mojos)\nFees: 0\n---------------\nAre you sure you wish to cancel offer with ID: af98fd1f63a8351829d2d2fd34c2e880021e154b9a3d23f215385c1b72831b69? (y/n): y\nCancelled offer with ID af98fd1f63a8351829d2d2fd34c2e880021e154b9a3d23f215385c1b72831b69\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"The Maker verifies that the offer has indeed been canceled:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet get_offers -id af98fd1f63a8351829d2d2fd34c2e880021e154b9a3d23f215385c1b72831b69\n\nRecord with id: af98fd1f63a8351829d2d2fd34c2e880021e154b9a3d23f215385c1b72831b69\n---------------\nCreated at: 2021-12-29 10:03:10\nConfirmed at: 0\nAccepted at: N/A\nStatus: CANCELLED\n---------------\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"After the offer has been canceled, a Taker notices the offer file and decides to accept it:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet take_offer ~/offers/0.1xch_for_10usds.offer\nSummary:\n  OFFERED:\n    - XCH (Wallet ID: 1): 0.1 (100000000000 mojos)\n  REQUESTED:\n    - Stably USD (Wallet ID: 2): 10 (10000 mojos)\nFees: 0\nWould you like to take this offer? (y/n): y\nAccepted offer with ID 8592e2f96b13cf7eee0e1c5bdbf1ef523ee25e6aaf64214c80b9a6ddda17e4da\nUse chia wallet get_offers --id 8592e2f96b13cf7eee0e1c5bdbf1ef523ee25e6aaf64214c80b9a6ddda17e4da -f 2987410941 to view its status\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"Later, the Maker notices that the offer has gone through, despite having been canceled:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet show\nWallet height: 1344854\nSync status: Synced\nBalances, fingerprint: 9876543210\nWallet ID 1 type STANDARD_WALLET Chia Wallet\n   -Total Balance: 0.0 xch (0 mojo)\n   -Pending Total Balance: 0.0 xch (0 mojo)\n   -Spendable: 0.0 xch (0 mojo)\nWallet ID 4 type COLOURED_COIN Stably USD (Asset ID: 6d95dae356e32a71db5ddcb42224754a02524c615c5fc35f568c2af04774e589)\n   -Total Balance: 11.0  (11000 mojo)\n   -Pending Total Balance: 11.0  (11000 mojo)\n   -Spendable: 11.0  (11000 mojo)\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"If the offer had been canceled on-chain, the reserved coins would have been spent. At that point, even if someone else had gotten access to the offer file, the offer itself would've been invalid."}),"\n",(0,l.jsxs)(n.p,{children:["The lesson here is do ",(0,l.jsx)(n.em,{children:"not"})," use the --insecure flag unless you're certain the offer file has never left your computer."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"whole-coins-must-be-reserved",children:"Whole coins must be reserved"}),"\n",(0,l.jsx)(n.p,{children:"Under the coin set model, coins can be of any value. When an offer is created, the Maker's wallet must reserve enough coins to meet the requirements of the offer."}),"\n",(0,l.jsxs)(n.p,{children:["The coin set model ",(0,l.jsx)(n.a,{href:"/chia-blockchain/coin-set-model/intro",children:"has many advantages"})," over the account model, but it can create some situations that take time to understand."]}),"\n",(0,l.jsx)(n.p,{children:"For example, let's say a Maker has 1 XCH and 0 USDS:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet show\nWallet height: 1345098\nSync status: Synced\nBalances, fingerprint: 9876543210\nWallet ID 1 type STANDARD_WALLET Chia Wallet\n   -Total Balance: 1.0 xch (1000000000000 mojo)\n   -Pending Total Balance: 1.0 xch (1000000000000 mojo)\n   -Spendable: 1.0 xch (1000000000000 mojo)\nWallet ID 2 type COLOURED_COIN Stably USD (Asset ID: 6d95dae356e32a71db5ddcb42224754a02524c615c5fc35f568c2af04774e589)\n   -Total Balance: 0.0  (0 mojo)\n   -Pending Total Balance: 0.0  (0 mojo)\n   -Spendable: 0.0  (0 mojo)\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"The Maker received the XCH in one lump sum, so there is a single coin worth 1 XCH in the Maker's wallet."}),"\n",(0,l.jsx)(n.p,{children:"The Maker creates an offer of 0.1 XCH for 10 USDS:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet make_offer -o 1:0.1 -r 2:10 -p ~/offers/0.1xch_for_10usds.offer\nCreating Offer\n--------------\n\nOFFERING:\n  - 0.1 XCH (100000000000 mojos)\nREQUESTING:\n  - 10 Stably USD (10000 mojos)\nConfirm (y/n): y\nCreated offer with ID 5708209d4502049b556d3e00782e36259651eb4fdc0da94f177916bca8e83c1b\nUse chia wallet get_offers --id 5708209d4502049b556d3e00782e36259651eb4fdc0da94f177916bca8e83c1b -f 125588179 to view status\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"While the offer is pending, the Maker attempts to send 0.1 XCH to another address:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet send -i 1 -a 0.1 -t <another wallet address>\nSubmitting transaction...\nException from 'wallet' {'error': \"Can't send more than 0 in a single transaction\", 'success': False}\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"This should be possible -- the Maker has 0.9 XCH, even after taking the offer into account. The reason for the Exception is because the Maker only has a single coin worth 1 XCH, and that coin has already been reserved for the offer."}),"\n",(0,l.jsxs)(n.p,{children:["It's similar to using a ",(0,l.jsxs)(n.span,{className:"katex",children:[(0,l.jsx)(n.span,{className:"katex-mathml",children:(0,l.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(n.semantics,{children:[(0,l.jsxs)(n.mrow,{children:[(0,l.jsx)(n.mn,{children:"10"}),(0,l.jsx)(n.mi,{children:"b"}),(0,l.jsx)(n.mi,{children:"i"}),(0,l.jsx)(n.mi,{children:"l"}),(0,l.jsx)(n.mi,{children:"l"}),(0,l.jsx)(n.mi,{children:"t"}),(0,l.jsx)(n.mi,{children:"o"}),(0,l.jsx)(n.mi,{children:"b"}),(0,l.jsx)(n.mi,{children:"u"}),(0,l.jsx)(n.mi,{children:"y"}),(0,l.jsx)(n.mi,{children:"s"}),(0,l.jsx)(n.mi,{children:"o"}),(0,l.jsx)(n.mi,{children:"m"}),(0,l.jsx)(n.mi,{children:"e"}),(0,l.jsx)(n.mi,{children:"t"}),(0,l.jsx)(n.mi,{children:"h"}),(0,l.jsx)(n.mi,{children:"i"}),(0,l.jsx)(n.mi,{children:"n"}),(0,l.jsx)(n.mi,{children:"g"}),(0,l.jsx)(n.mi,{children:"f"}),(0,l.jsx)(n.mi,{children:"o"}),(0,l.jsx)(n.mi,{children:"r"})]}),(0,l.jsx)(n.annotation,{encoding:"application/x-tex",children:"10 bill to buy something for "})]})})}),(0,l.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(n.span,{className:"mord",children:"10"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"bi"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"llt"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"o"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"b"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"u"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"yso"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"m"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"e"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"t"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"hin"}),(0,l.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),(0,l.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),(0,l.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"or"})]})})]}),"1. Before you receive your change, you can't buy anything else. On the other hand, if you had started with two ",(0,l.jsxs)(n.span,{className:"katex",children:[(0,l.jsx)(n.span,{className:"katex-mathml",children:(0,l.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(n.semantics,{children:[(0,l.jsxs)(n.mrow,{children:[(0,l.jsx)(n.mn,{children:"5"}),(0,l.jsx)(n.mi,{children:"b"}),(0,l.jsx)(n.mi,{children:"i"}),(0,l.jsx)(n.mi,{children:"l"}),(0,l.jsx)(n.mi,{children:"l"}),(0,l.jsx)(n.mi,{children:"s"}),(0,l.jsx)(n.mi,{children:"a"}),(0,l.jsx)(n.mi,{children:"n"}),(0,l.jsx)(n.mi,{children:"d"}),(0,l.jsx)(n.mi,{children:"b"}),(0,l.jsx)(n.mi,{children:"o"}),(0,l.jsx)(n.mi,{children:"u"}),(0,l.jsx)(n.mi,{children:"g"}),(0,l.jsx)(n.mi,{children:"h"}),(0,l.jsx)(n.mi,{children:"t"}),(0,l.jsx)(n.mi,{children:"t"}),(0,l.jsx)(n.mi,{children:"h"}),(0,l.jsx)(n.mi,{children:"e"}),(0,l.jsx)(n.mi,{children:"s"}),(0,l.jsx)(n.mi,{children:"a"}),(0,l.jsx)(n.mi,{children:"m"}),(0,l.jsx)(n.mi,{children:"e"})]}),(0,l.jsx)(n.annotation,{encoding:"application/x-tex",children:"5 bills and bought the same "})]})})}),(0,l.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(n.span,{className:"mord",children:"5"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"bi"}),(0,l.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"ll"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"s"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"an"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"d"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"b"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"o"}),(0,l.jsx)(n.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"ug"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"h"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"tt"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"h"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"es"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"am"}),(0,l.jsx)(n.span,{className:"mord mathnormal",children:"e"})]})})]}),"1 item, you could've purchased something else while waiting for your change."]}),"\n",(0,l.jsx)(n.p,{children:"The Maker can work around this issue by breaking the single large coin into multiple small ones. One simple way to do this would be to send money to him/herself:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet send -i 1 -a 0.1 -t <Maker's wallet address>\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"The Maker's wallet looks the same as before:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet show\nWallet height: 1345200\nSync status: Synced\nBalances, fingerprint: 9876543210\nWallet ID 1 type STANDARD_WALLET Chia Wallet\n   -Total Balance: 1.0 xch (1000000000000 mojo)\n   -Pending Total Balance: 1.0 xch (1000000000000 mojo)\n   -Spendable: 1.0 xch (1000000000000 mojo)\nWallet ID 2 type COLOURED_COIN Stably USD (Asset ID: 6d95dae356e32a71db5ddcb42224754a02524c615c5fc35f568c2af04774e589)\n   -Total Balance: 0.0  (0 mojo)\n   -Pending Total Balance: 0.0  (0 mojo)\n   -Spendable: 0.0  (0 mojo)\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"Even though the Maker's balance hasn't changed, there are now two coins that sum to 1 XCH. The maker can now recreate the old offer:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet make_offer -o 1:0.1 -r 2:10 -p ~/offers/0.1xch_for_10usds.offer\nCreating Offer\n--------------\n\nOFFERING:\n  - 0.1 XCH (100000000000 mojos)\nREQUESTING:\n  - 10 Stably USD (10000 mojos)\nConfirm (y/n): y\nCreated offer with ID 7344ac4ee584725552d3f5a0c713aba2c4eeb1619525753b835c568e89de1274\nUse chia wallet get_offers --id 7344ac4ee584725552d3f5a0c713aba2c4eeb1619525753b835c568e89de1274 -f 125588179 to view status\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"This time if the Maker attempts to send 0.1 XCH to the same wallet as before, the transaction will succeed:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"(venv) $ chia wallet send -i 1 -a 0.1 -t <another wallet address>\nSubmitting transaction...\nTransaction submitted to nodes:\n"})}),"\n",(0,l.jsx)("br",{}),"\n",(0,l.jsx)(n.p,{children:"One of the Maker's coins has been reserved for the offer, and the other has been sent to another wallet. The Maker can further break apart the large coin as needed."}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"offer-involving-a-cat1-is-invalid",children:"Offer involving a CAT1 is invalid"}),"\n",(0,l.jsx)(n.p,{children:"The CAT1 Standard reached its end of life (EOL) with block 2,311,760 in July 2022. Any offers that include a CAT1 on either side of the trade will result in an invalid offer error."}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"further-reading",children:"Further reading"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.chia.net/2022/01/12/chia-offers-are-here-en.html",children:"Offers blog entry"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://chialisp.com/offers",children:"Offers reference"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"/reference-client/getting-started/wallet-guide",children:"GUI tutorial"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"/chia-blockchain/coin-set-model/intro",children:"Info on the coin set model"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},8453:(e,n,a)=>{a.d(n,{R:()=>c,x:()=>r});var s=a(6540);const l={},t=s.createContext(l);function c(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:c(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);
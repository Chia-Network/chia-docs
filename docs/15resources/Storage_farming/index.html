<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">15.2 Storage - Chia farming workload analysis | Chia Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.chia.net/img/og-chia.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.chia.net/img/og-chia.png"><meta data-react-helmet="true" property="og:url" content="https://docs.chia.net/docs/15resources/Storage_farming"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="15.2 Storage - Chia farming workload analysis | Chia Documentation"><meta data-react-helmet="true" name="description" content="Jonmichael Hands, VP Storage, Chia Network. For comments and questions reach out to @storagejm on keybase, or @LebanonJon on Twitter"><meta data-react-helmet="true" property="og:description" content="Jonmichael Hands, VP Storage, Chia Network. For comments and questions reach out to @storagejm on keybase, or @LebanonJon on Twitter"><link data-react-helmet="true" rel="shortcut icon" href="/img/chia_leaf_green.svg"><link data-react-helmet="true" rel="canonical" href="https://docs.chia.net/docs/15resources/Storage_farming"><link data-react-helmet="true" rel="alternate" href="https://docs.chia.net/docs/15resources/Storage_farming" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.chia.net/docs/15resources/Storage_farming" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.23000917.css">
<link rel="preload" href="/assets/js/runtime~main.9d28e1d2.js" as="script">
<link rel="preload" href="/assets/js/main.d9030cc4.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/chia-docs-icon.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/chia-docs-icon.svg" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title"> Chia Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/01introduction/what-is-chia">Docs</a><a href="https://www.chia.net/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia.net</a><a href="https://github.com/Chia-Network/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Chia Github</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">üåû</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">1 - Introduction</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">2 - Architecture</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">3 - Consensus Algorithm</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">4 - Coin Set Model</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">5 - Block Validation</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">6 - Mempool</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">7 - Networking</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">8 - Serialization</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">9 - Keys and Signatures</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">10 - Protocol</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">11 - Pool Protocol</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">12 - RPC APIs</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">13 - Command Line Interface</a></li><li class="theme-doc-sidebar-item-category menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">14 - Python Implementation</a></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">15 - Resources</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/docs/15resources/references">15.1 References</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/15resources/Storage_farming">15.2 Storage - Chia farming workload analysis</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>15.2 Storage - Chia farming workload analysis</h1></header><p>Jonmichael Hands, VP Storage, Chia Network. For comments and questions reach out to @storage_jm on <a href="https://keybase.io/team/chia_network.public" target="_blank" rel="noopener noreferrer">keybase</a>, or <a href="https://twitter.com/LebanonJon" target="_blank" rel="noopener noreferrer">@LebanonJon</a> on Twitter</p><p><a href="https://docs.google.com/spreadsheets/d/1AJP8j673qfbxxju87SjGs174DMVFpzjS/edit?usp=sharing&amp;ouid=108662600751303250659&amp;rtpof=true&amp;sd=true" target="_blank" rel="noopener noreferrer">Model</a> in Excel</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="abstract"></a>Abstract<a class="hash-link" href="#abstract" title="Direct link to heading">#</a></h2><p>Chia uses a consensus called proof of space and time, in which participants prove to the network that they are storing a certain amount of data through a process called farming.</p><p>Farmers respond to network challenges to earn rewards for securing the Chia network, which involves generating proofs of space from stored data. The protocol for farming and harvesting was designed for quick and efficient verification of proofs of space while minimizing disk io (input/output). A harvester service checks plot files for partial proofs of space when a challenge is received. There is a plot filter designed to significantly reduce the amount of disk io required by requiring that a hash of the plot id and challenge contains a certain amount of zeros. We will explore the theoretical disk io requirements based on the protocols, and look at measured disk utilization during a real farming workload. The Chia farming workload differs from traditional enterprise or consumer storage use cases since the data stored in plot files contains no user data. The Chia farming workload is read-only, completely random distribution, and a low amount of data transferred between the device and host. Data durability (defined as the probability of not losing user data) and error rate requirements for Chia are significantly reduced compared to storing user data and may constitute a new class of storage media and promote used hardware that otherwise would not be suitable.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="proof-of-space-verification"></a>Proof of space verification<a class="hash-link" href="#proof-of-space-verification" title="Direct link to heading">#</a></h2><p>The proof of space construction and <a href="/docs/03consensus/proof-of-space/">Section 3.2</a> contains the details on the format for plot files. A plot file size is determined by a k value where each plot is made up of 7 tables each with 2^k entries. When a challenge arrives the plot filter is applied to reduce the disk io by the value of the plot filter constant, which is currently set to 512. The probability of a plot being accessed each challenge, which happens on the signage point interval time, is 1/512. The probability of an individual disk being accessed can be found with the binomial distribution function cumulative probability with a probability per plot, n trials equal to the number of plots on the disk (probability of X successes ‚â• 1) per signage point. The amount of IOPS (input/output operations per second) can be estimated by determining the mean of the plot filter passes per day and multiplying by the number of seeks required for a proof quality check. In the pooling protocol a pool operator requests several partial proofs of space per day per drive to verify that the pool participant is indeed storing as much data as they claim.  The bandwidth and amount of data transferred can be estimated by looking at the average blocksize of the read requests multiplied by the IOPS.</p><p><strong>Constants in proof of space that were chosen for Chia</strong></p><ul><li>Signage point time (seconds): 9.375</li><li>Plot filter: 512</li><li>K value minimum: 32</li><li>IO Proof quality check: 9 read requests</li><li>IO Full proof of space (and partial request from pool): 64 read requests</li><li>Partials per day: set by pool operators, estimated at 300 for reference</li><li>Average IO size per request (kB): 14</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="storage-workload-profile"></a>Storage workload profile<a class="hash-link" href="#storage-workload-profile" title="Direct link to heading">#</a></h2><p>We can estimate the storage workload on a given drive capacity (measured in TB, terabytes) by knowing the k size selected and n number of plots that fit on the drive.</p><table><thead><tr><th>Drive size (TB)</th><th align="right">4</th><th align="right">8</th><th align="right">10</th><th align="right">12</th><th align="right">14</th><th align="right">16</th><th align="right">18</th><th align="right">20</th></tr></thead><tbody><tr><td>k value</td><td align="right">32</td><td align="right">32</td><td align="right">32</td><td align="right">32</td><td align="right">32</td><td align="right">32</td><td align="right">32</td><td align="right">32</td></tr><tr><td>Number of plots</td><td align="right">36</td><td align="right">73</td><td align="right">91</td><td align="right">110</td><td align="right">128</td><td align="right">146</td><td align="right">165</td><td align="right">183</td></tr><tr><td>k value</td><td align="right">34</td><td align="right">34</td><td align="right">34</td><td align="right">34</td><td align="right">34</td><td align="right">34</td><td align="right">34</td><td align="right">34</td></tr><tr><td>Number of plots</td><td align="right">8</td><td align="right">17</td><td align="right">21</td><td align="right">25</td><td align="right">30</td><td align="right">34</td><td align="right">38</td><td align="right">43</td></tr></tbody></table><p>Events per day, plots passing filter = signage points per day ‚úï  n plots / filter constant
number of reads =(Events per day, plots passing filter ‚úï IO Proof quality check) +(IO Full proof of space ‚úï Partials per day<br>
IOPS average =number of reads per day / 86400 seconds
MB read per day = Number of reads ‚úï average IO size per request (kB) / 1000<br>
Bandwidth = IOPS * Block Size</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="average-io-size-per-request"></a>Average IO Size per request<a class="hash-link" href="#average-io-size-per-request" title="Direct link to heading">#</a></h3><p>An IO kernel trace was taken on a sample of drives to determine the block size requests on the block layer (commands sent directly to the drive over the SATA interface), and found that the majority of the IO commands sent were 12 and 16kB transfers. This will likely change very slightly with different storage hardware, operating systems, storage devices, drivers, and filesystems.</p><p><img alt="iosize_hist" src="/assets/images/iosize_hist-190219243e9e76c2bc5bb8d9145983e7.png" title="iosize_hist"></p><p>Measured data from ext4 filesystem in Linux resulted in an average blocksize of
13.9kB with n=44 drives of capacity 18TB
14.5kB with n=94 drives capacity ranging from 8-18TB</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="calculated-data-read-and-disk-bandwidth"></a>Calculated data read and disk bandwidth<a class="hash-link" href="#calculated-data-read-and-disk-bandwidth" title="Direct link to heading">#</a></h3><p>Chia Farming Total Amount of data read per day per drive capacity</p><p><img alt="data_per_day" src="/assets/images/data_per_day-63d731accc72197842f1076e5f7c7b7b.png" title="data_per_day"></p><p>Bandwidth and amount of data read are all directly proportional to the number of io requests required for the proof quality checks and partial proof of space generation. K=32 with a difficulty of 1 is the theoretical maximum bandwidth for Chia farming. It is typical for a pool operator to automatically adjust the difficulty to target enough partials per day to get an accurate estimate of the farming capacity, without a significant increase in io on the device.</p><p><img alt="bw_drive" src="/assets/images/bw_drive-07b3cb42e0a93978256f609a441c466a.png" title="bw_drive"></p><p>As expected, bandwidth per drive scales with the number of plots per drive (which is increased when a higher capacity disk is used) and increases with difficulty. K=34 offers a reduction in io requirements by reducing the number of plots per disk.</p><p><img alt="prob_access" src="/assets/images/prob_access-430f862506ceef20bba0cd6de8c9fea0.png" title="prob_access"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="hard-drive-rated-workloads"></a>Hard drive rated workloads<a class="hash-link" href="#hard-drive-rated-workloads" title="Direct link to heading">#</a></h3><p>Hard disk drive reliability is rated at a specified amount of data read and written per year, expressed in TB/year. Common 3.5in HDDs used in Chia farming are rated at 200-550TB per year workload depending on the drive model and recommended use case. The amount of data written for Chia is often just the size of the drive, because plots are generated on ephemeral storage and then sequentially copied over to the drive. The amount of data read can be calculated by looking at the bandwidth of the drive and multiplying it by time. In the worst case, with the largest hard drive on the market today at 20TB, full of k=32 plots, at difficulty 1 pooling would read an average of 2.1GB per day, or 750 GB per year. This is 0.37% of the rated workload assuming a 200TB/year - Chia is an extremely light workload compared to typical end-user workloads (e.g. NAS, file or object storage, video streaming).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="measured-data"></a>Measured data<a class="hash-link" href="#measured-data" title="Direct link to heading">#</a></h2><p>Data was collected across a sample size of drives of varying capacity, as detailed in the system configuration. The duration of the measured data was 48 hours with a scraping period of 5s.</p><table><thead><tr><th>capacity</th><th>Sample Size</th><th>bandwidth (kB/s)</th><th>IOPS</th><th>blocksize (kB)</th><th>latency (ms)</th></tr></thead><tbody><tr><td>8</td><td>3</td><td>3.45</td><td>0.23</td><td>14.76</td><td>5.18</td></tr><tr><td>10</td><td>2</td><td>4.17</td><td>0.28</td><td>14.72</td><td>7.04</td></tr><tr><td>12</td><td>16</td><td>5.03</td><td>0.34</td><td>14.69</td><td>7.11</td></tr><tr><td>14</td><td>2</td><td>6.02</td><td>0.41</td><td>14.72</td><td>5.21</td></tr><tr><td>16</td><td>27</td><td>6.20</td><td>0.44</td><td>14.14</td><td>6.27</td></tr><tr><td>18</td><td>44</td><td>7.46</td><td>0.51</td><td>14.57</td><td>5.53</td></tr><tr><td>Total</td><td>94</td><td>6.46</td><td>0.45</td><td>14.48</td><td>6.02</td></tr></tbody></table><p>We compare the modeled metrics of an 18TB drive to the measure data collected</p><table><thead><tr><th>Metric</th><th>Estimated/Modeled</th><th>Measured</th></tr></thead><tbody><tr><td>Bandwidth per drive (kB/s)</td><td>4.59 kB/s</td><td>7.46 kB/s</td></tr><tr><td>IOPS</td><td>0.33</td><td>0.51</td></tr><tr><td>Disk busy time</td><td>0.136%</td><td>0.24%</td></tr><tr><td>Latency per request (ms)</td><td>4.3</td><td>6.02</td></tr></tbody></table><p>Disk IOPS</p><p><img alt="IOPS" src="/assets/images/iops-73e6fe55c4999e2d6839ddaa4017bddf.png" title="IOPS"></p><p>Disk bandwidth</p><p><img alt="bw" src="/assets/images/bw-873a300af25d7147fb8dcb19f2979bb8.png" title="bw"></p><p>Latency</p><p><img alt="latency" src="/assets/images/latency-660c0a26ba53ce3873f0cf30ba293a4f.png" title="latency"></p><p>Disk Utilization</p><p><img alt="disk_busy" src="/assets/images/disk_busy-30e336f99ead8b64b141c1435abdef53.png" title="disk_busy"></p><p>CPU Busy Time</p><p><img alt="cpu busy time" src="/assets/images/cpu1-88fa0b4b9b174a63da789a05aae7179b.png" title="cpu"></p><p>System CPU Utilization</p><p><img alt="system utilization" src="/assets/images/cpu-4d37c79ab38c06322e3cfacba6775ebe.png" title="cpu"></p><p>Network Traffic (Chia harvester only)</p><p><img alt="network" src="/assets/images/net-a524b6533296a516877749e576e4c0de.png" title="network traffic"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="measurement-tools"></a>Measurement tools<a class="hash-link" href="#measurement-tools" title="Direct link to heading">#</a></h3><ul><li><a href="https://grafana.com/" target="_blank" rel="noopener noreferrer">Grafana</a></li><li><a href="https://prometheus.io/docs/guides/node-exporter/" target="_blank" rel="noopener noreferrer">Node Exporter</a></li><li><a href="https://prometheus.io/" target="_blank" rel="noopener noreferrer">Prometheus</a></li><li><a href="https://github.com/Open-CAS/standalone-linux-io-tracer" target="_blank" rel="noopener noreferrer">Standalone Linux IO Tracer</a></li><li>dstat, iostat (sysstat)</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="system-configuration"></a>System configuration<a class="hash-link" href="#system-configuration" title="Direct link to heading">#</a></h3><p>Measured data collected from the following system</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">Motherboard: Intel R1208WFTYS</span></span><span class="token-line" style="color:#403f53"><span class="token plain">Intel Xeon Gold 6140 CPU, 128GB DDR4 @ 2400MT/s</span></span><span class="token-line" style="color:#403f53"><span class="token plain">HBA: LSI 9300-8e</span></span><span class="token-line" style="color:#403f53"><span class="token plain">JBOD: Supermicro 90 Bay, SuperChassis 946ED-R2KJBOD</span></span><span class="token-line" style="color:#403f53"><span class="token plain">Drive Models:</span></span><span class="token-line" style="color:#403f53"><span class="token plain">Seagate Exos x16 16TB, Firmware SN03</span></span><span class="token-line" style="color:#403f53"><span class="token plain">WD HC550 18TB, Firmware: PCGNW232WDC</span></span><span class="token-line" style="color:#403f53"><span class="token plain">WD WD120EDAZ: 8, 10, 12, 14TB, Firmware: 81.00A81</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="data-durability-uncorrectable-bit-error-rate-and-chia-farming"></a>Data durability, uncorrectable bit error rate, and Chia farming<a class="hash-link" href="#data-durability-uncorrectable-bit-error-rate-and-chia-farming" title="Direct link to heading">#</a></h2><p>UBER is defined as ‚ÄúA metric for the rate of occurrence of data errors, equal to the number of data errors per bits read.‚Äù
In HDD and SSD, UBER is generally reflected in lifetime values for an entire population, but the actual rates of error and rate of increase are dependent on many factors including time, temperature, and amount of wear on the storage media. In SSDs this is adjusted for and measured per the JESD218B specification which defines UBER for SSDs using ‚ÄúThe
numerator is the total count of data errors detected over the full TBW rating for the population of SSDs, or the sample of SSDs in the endurance verification.‚Äù</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="uber-of-standard-storage-devices"></a>UBER of standard storage devices<a class="hash-link" href="#uber-of-standard-storage-devices" title="Direct link to heading">#</a></h3><p>Consumer HDDs are rated for less than 1 error per 10<sup>14</sup> (sometimes shown as UBER of 10<sup>-14</sup>). This means that if a consumer reads on 800TB of data, they would expect a single read error on average.</p><table><thead><tr><th>Device</th><th>UBER</th><th>Data read per error</th></tr></thead><tbody><tr><td>Consumer HDD</td><td>10-14</td><td>800 TB</td></tr><tr><td>Enterprise HDD</td><td>10-15</td><td>8 PB</td></tr><tr><td>SSD</td><td>10-17</td><td>800 PB</td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="uber-in-chia"></a>UBER in Chia<a class="hash-link" href="#uber-in-chia" title="Direct link to heading">#</a></h3><p>In a storage system containing user data, an uncorrectable read error on a single storage device is handled by redundancy or parity, generally through RAID, erasure code, mirror, or backup of the data. Plot files contain random cryptographic hashes. If a device containing plots fails, no useful data is lost. Therefore, the best practice for Chia is not to include any data protection. If there is a single uncorrectable read error somewhere on the storage device, we could therefore calculate the probability of reading that LBA (logical block address) by using the estimated amount of data read per day in the Chia farming workload - because the reads are perfectly random, each read request coming from the harvester service will have an equal probability of being accessed.</p><p>Using the UBER and the estimated amount of data read per day with Chia farming, we can approximate the number of years it would take to encounter an error while farming Chia.</p><p><img alt="UBER" src="/assets/images/uber-09f9747bd8e9eb88c1981b038bafab88.png" title="UBER"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="what-happens-when-an-error-occurs"></a>What happens when an error occurs?<a class="hash-link" href="#what-happens-when-an-error-occurs" title="Direct link to heading">#</a></h3><p>Each k=32 plot file contains around 4.3 billion proofs. Depending on where the error occurs, in metadata, table 1, etc. there are a certain amount of proofs within a plot file that will be corrupted. In the absolute worst case that an entire plot file gets corrupted. A more likely case would just be that a certain percentage of proofs are corrupt, and the likelihood of reading those given the amount of data read per day in the Chia farming workload is extremely low. If the uncorrectable read error collides with a lookup for a partial proof of space, the farmer would fail that single request for a partial proof of space or proof quality check. This would lower the user‚Äôs estimated capacity for a short duration, but then revert to the mean. In other words, an error in Chia farming is not catastrophic. Chia farming workload is a very good fit for a storage device with a higher error rate, potentially even with an UBER of greater than 10<sup>-13 </sup>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="summary"></a>Summary<a class="hash-link" href="#summary" title="Direct link to heading">#</a></h2><p>Chia is a light workload for a hard drive, 309 times lower disk busy time than an example hyperscale data center workload[2]. Plot files contain random cryptographic hashes that can easily be created and no user data, removing data durability requirements for data storage in Chia farming. Proof of space is a novel use case for hard drives and can accept storage media with a high UBER compared to typical consumer and enterprise workloads. Chia farming will constitute a new class of storage that is optimized for high capacity, write once / read many, low power, and high error rate. Chia farming is a great fit for hard drive technology optimized for sequential write only, such as SMR (Shingled Magnetic Recording), and in the future NVMe ZNS (Zoned Name Spaces) paired with high capacity storage of a lower media grade. Chia farming would be an ideal use case for used storage, given the storage media is high enough capacity to maintain a competitive TCO compared to new more power-efficient disks.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="resources"></a>Resources<a class="hash-link" href="#resources" title="Direct link to heading">#</a></h2><ol><li><a href="https://www.jedec.org/standards-documents/docs/jesd218b01" target="_blank" rel="noopener noreferrer">JEDEC </a>JESD218B.01 SOLID STATE DRIVE (SSD) REQUIREMENTS AND ENDURANCE TEST METHOD</li><li><a href="https://www.usenix.org/system/files/fast21-pan.pdf" target="_blank" rel="noopener noreferrer">Facebook‚Äôs Tectonic Filesystem: Efficiency from Exascale</a></li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Chia-Network/chia-docs/blob/main/docs/15resources/Storage_farming.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/15resources/references"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ 15.1 References</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#abstract" class="table-of-contents__link">Abstract</a></li><li><a href="#proof-of-space-verification" class="table-of-contents__link">Proof of space verification</a></li><li><a href="#storage-workload-profile" class="table-of-contents__link">Storage workload profile</a><ul><li><a href="#average-io-size-per-request" class="table-of-contents__link">Average IO Size per request</a></li><li><a href="#calculated-data-read-and-disk-bandwidth" class="table-of-contents__link">Calculated data read and disk bandwidth</a></li><li><a href="#hard-drive-rated-workloads" class="table-of-contents__link">Hard drive rated workloads</a></li></ul></li><li><a href="#measured-data" class="table-of-contents__link">Measured data</a><ul><li><a href="#measurement-tools" class="table-of-contents__link">Measurement tools</a></li><li><a href="#system-configuration" class="table-of-contents__link">System configuration</a></li></ul></li><li><a href="#data-durability-uncorrectable-bit-error-rate-and-chia-farming" class="table-of-contents__link">Data durability, uncorrectable bit error rate, and Chia farming</a><ul><li><a href="#uber-of-standard-storage-devices" class="table-of-contents__link">UBER of standard storage devices</a></li><li><a href="#uber-in-chia" class="table-of-contents__link">UBER in Chia</a></li><li><a href="#what-happens-when-an-error-occurs" class="table-of-contents__link">What happens when an error occurs?</a></li></ul></li><li><a href="#summary" class="table-of-contents__link">Summary</a></li><li><a href="#resources" class="table-of-contents__link">Resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Approach</div><ul class="footer__items"><li class="footer__item"><a href="https://www.chia.net/approach" target="_blank" rel="noopener noreferrer" class="footer__link-item">White Paper</a></li></ul></div><div class="col footer__col"><div class="footer__title">Technology</div><ul class="footer__items"><li class="footer__item"><a href="https://www.chia.net/greenpaper" target="_blank" rel="noopener noreferrer" class="footer__link-item">Green Paper</a></li><li class="footer__item"><a href="https://www.chia.net/assets/Chia-New-Consensus-0.9.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item">Consensus 1.1</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developers</div><ul class="footer__items"><li class="footer__item"><a href="https://www.chia.net/grants" target="_blank" rel="noopener noreferrer" class="footer__link-item">Grants</a></li><li class="footer__item"><a href="https://www.chialisp.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Chialisp</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items"><li class="footer__item"><a href="https://chia.net/about" target="_blank" rel="noopener noreferrer" class="footer__link-item">About</a></li><li class="footer__item"><a href="https://chia.net/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://chia.net/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">¬© 2022 Chia Network Inc., Licensed under the <a href="https://github.com/Chia-Network/chia-docs/blob/main/LICENSE" target="_blank">Apache License, Version 2.0</a> | <a href="https://www.chia.net/terms">Terms</a></div></div></div></footer></div>
<script src="/assets/js/runtime~main.9d28e1d2.js"></script>
<script src="/assets/js/main.d9030cc4.js"></script>
</body>
</html>